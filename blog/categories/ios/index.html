<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Category: iOS - Developing on Staxmanade</title>
  <meta name="author" content="Jason Jarrett">


   <meta name="description" content="">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <link rel="canonical" href="http://staxmanade.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/DevelopingOnStaxmande" rel="alternate" title="Developing on Staxmanade" type="application/atom+xml">
    <script src="/js/modernizr-2.0.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./js/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/octopress.js" type="text/javascript"></script>
    <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1017448-6']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</head>

<body   >
<header role="banner"><hgroup>
  <h1><a href="/">Developing on Staxmanade</a></h1>
</hgroup>

</header>
<nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/DevelopingOnStaxmande" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
</ul>
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:staxmanade.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
<div id="main">
    <div id="content">

        <div class="blog-index">
            <article>
                  <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/06/debugging-ios-autolayout-issues/">Debugging iOS AutoLayout Issues</a></h1>
    <p class="meta">
          <time datetime="2015-06-01T16:33:59.235Z" pubdate data-updated="true">Jun 1st 2015</time>


        <a href="/2015/06/debugging-ios-autolayout-issues/#disqus_thread" data-disqus-identifier="/2015/06/debugging-ios-autolayout-issues/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>This tip may not be news to you, but it was to me so I'll put this up here to help you, but more to help myself when I get stuck down the road and forget how to do this.</p>
<h1>Background</h1>
<p>I just stumbled upon a way to help when debugging and diagnosing issues around ambiguous auto layout constraints (you know the kind where iOS just picks the one it feels like to remove?).</p>
<p>Today I was researching why I was receiving the following output in my debugger console:</p>
<pre><code>Unable <span class="hljs-built_in">to</span> simultaneously satisfy constraints.
    Probably <span class="hljs-keyword">at</span> least <span class="hljs-constant">one</span> <span class="hljs-operator">of</span> <span class="hljs-operator">the</span> constraints <span class="hljs-operator">in</span> <span class="hljs-operator">the</span> following list is <span class="hljs-constant">one</span> you don<span class="hljs-string">'t want. Try this: (1) look at each constraint and try to figure out which you don'</span>t expect; (<span class="hljs-number">2</span>) find <span class="hljs-operator">the</span> code that added <span class="hljs-operator">the</span> unwanted constraint <span class="hljs-operator">or</span> constraints <span class="hljs-operator">and</span> fix <span class="hljs-keyword">it</span>. (Note: If you<span class="hljs-string">'re seeing NSAutoresizingMaskLayoutConstraints that you don'</span>t understand, refer <span class="hljs-built_in">to</span> <span class="hljs-operator">the</span> documentation <span class="hljs-keyword">for</span> <span class="hljs-operator">the</span> UIView property translatesAutoresizingMaskIntoConstraints) 
(
    <span class="hljs-string">"&lt;NSLayoutConstraint:0x7fc82d3e18a0 H:[UIView:0x7fc82aba1210(768)]&gt;"</span>,
    <span class="hljs-string">"&lt;NSLayoutConstraint:0x7fc82d6369e0 H:[UIView:0x7fc82aba1210]-(0)-|   (Names: '|':UIView:0x7fc82d6b9f80 )&gt;"</span>,
    <span class="hljs-string">"&lt;NSLayoutConstraint:0x7fc82d636a30 H:|-(0)-[UIView:0x7fc82aba1210]   (Names: '|':UIView:0x7fc82d6b9f80 )&gt;"</span>,
    <span class="hljs-string">"&lt;NSLayoutConstraint:0x7fc82d3e7fd0 'UIView-Encapsulated-Layout-Width' H:[UIView:0x7fc82d6b9f80(50)]&gt;"</span>
)

Will attempt <span class="hljs-built_in">to</span> recover <span class="hljs-keyword">by</span> breaking constraint 
&lt;NSLayoutConstraint:<span class="hljs-number">0x7fc82d3e18a0</span> H:[UIView:<span class="hljs-number">0x7fc82aba1210</span>(<span class="hljs-number">768</span>)]&gt;

Make <span class="hljs-operator">a</span> symbolic <span class="hljs-built_in">breakpoint</span> <span class="hljs-keyword">at</span> UIViewAlertForUnsatisfiableConstraints <span class="hljs-built_in">to</span> <span class="hljs-keyword">catch</span> this <span class="hljs-operator">in</span> <span class="hljs-operator">the</span> debugger.
The methods <span class="hljs-operator">in</span> <span class="hljs-operator">the</span> UIConstraintBasedLayoutDebugging category <span class="hljs-command"><span class="hljs-keyword">on</span> <span class="hljs-title">UIView</span> <span class="hljs-title">listed</span> <span class="hljs-title">in</span> &lt;<span class="hljs-title">UIKit</span>/<span class="hljs-title">UIView</span>.<span class="hljs-title">h</span>&gt; <span class="hljs-title">may</span> <span class="hljs-title">also</span> <span class="hljs-title">be</span> <span class="hljs-title">helpful</span>.</span>
</code></pre>
<p>Now, I can tell from the above that theres an issue with the height constraint(s), but looking at this, I have no idea what view is being referenced which makes it quite difficult to jump to XCode and inspect the view's constraints.</p>
<p>But I worked through it, and learned the following along the way. Hope this helps you.</p>
<h1>How to set auto layout breakpoint in Xcode debugger</h1>
<p>Using this text <code>Make a symbolic breakpoint at UIViewAlertForUnsatisfiableConstraints to catch this in the debugger.</code> I found this great post on stack overflow on <a href="http://stackoverflow.com/questions/26389273/how-to-trap-on-uiviewalertforunsatisfiableconstraints/26389957#26389957">How to trap on UIViewAlertForUnsatisfiableConstraints</a> but have copied below for reference.</p>
<blockquote>
<p>You'll want to add a Symbolic Breakpoint. Apple provides an excellent guide on how to do this.</p>
<ol>
<li>Open the Breakpoint Navigator <code>cmd+7</code></li>
<li>Click the <code>Add</code> button in the lower left</li>
<li>Select <code>Add Symbolic Breakpoint</code>...</li>
<li>Where it says <code>Symbol</code> just type in <code>UIViewAlertForUnsatisfiableConstraints</code></li>
</ol>
<p>You can also treat it like any other breakpoint, turning it on and off, adding actions, or log messages.</p>
</blockquote>
<p>But that's only the first step. Once you've run the app and hit the breakpoint, you're left staring at assembly code and memory addresses, for example:</p>
<pre><code>UIKit`UIViewAlertForUnsatisfiableConstraints:
-&gt;  0x1131cc4a2 <span class="hljs-variable">&lt;+0&gt;</span>:   pushq  %rbp
    0x1131cc4a3 <span class="hljs-variable">&lt;+1&gt;</span>:   movq   %rsp, %rbp
    0x1131cc4a6 <span class="hljs-variable">&lt;+4&gt;</span>:   pushq  %r15
    0x1131cc4a8 <span class="hljs-variable">&lt;+6&gt;</span>:   pushq  %r14
    0x1131cc4aa <span class="hljs-variable">&lt;+8&gt;</span>:   pushq  %rbx
    0x1131cc4ab <span class="hljs-variable">&lt;+9&gt;</span>:   pushq  %rax
    0x1131cc4ac <span class="hljs-variable">&lt;+10&gt;</span>:  movq   %rsi, %r14
    0x1131cc4af <span class="hljs-variable">&lt;+13&gt;</span>:  movq   %rdi, %r15
    0x1131cc4b2 <span class="hljs-variable">&lt;+16&gt;</span>:  cmpq   $-0x1, 0x778796(%rip)     ; _UIConstraintBasedLayoutPlaySoundOnUnsatisfiable.result + 7
    0x1131cc4ba <span class="hljs-variable">&lt;+24&gt;</span>:  jne    0x1131cc529               ; <span class="hljs-variable">&lt;+135&gt;</span>
    0x1131cc4bc <span class="hljs-variable">&lt;+26&gt;</span>:  cmpb   $0x0, 0x778785(%rip)      ; _UIConstraintBasedLayoutPlaySoundWhenEngaged.__once + 7
    0x1131cc4c3 <span class="hljs-variable">&lt;+33&gt;</span>:  je     0x1131cc4ed               ; <span class="hljs-variable">&lt;+75&gt;</span>
    0x1131cc4c5 <span class="hljs-variable">&lt;+35&gt;</span>:  movq   0x73cd8c(%rip), %rdi      ; (void <span class="hljs-keyword">*</span>)0x0000000113925248: UIDevice
    0x1131cc4cc <span class="hljs-variable">&lt;+42&gt;</span>:  movq   0x7108e5(%rip), %rsi      ; <span class="hljs-string">"currentDevice"</span>
    0x1131cc4d3 <span class="hljs-variable">&lt;+49&gt;</span>:  movq   0x4d7aee(%rip), %rbx      ; (void <span class="hljs-keyword">*</span>)0x0000000114598000: objc_msgSend
    0x1131cc4da <span class="hljs-variable">&lt;+56&gt;</span>:  callq  <span class="hljs-keyword">*</span>%rbx
    0x1131cc4dc <span class="hljs-variable">&lt;+58&gt;</span>:  movq   0x71e375(%rip), %rsi      ; <span class="hljs-string">"_playSystemSound:"</span>
    0x1131cc4e3 <span class="hljs-variable">&lt;+65&gt;</span>:  movl   $0x3ee, %edx
    0x1131cc4e8 <span class="hljs-variable">&lt;+70&gt;</span>:  movq   %rax, %rdi
    0x1131cc4eb <span class="hljs-variable">&lt;+73&gt;</span>:  callq  <span class="hljs-keyword">*</span>%rbx
    0x1131cc4ed <span class="hljs-variable">&lt;+75&gt;</span>:  cmpq   $-0x1, 0x77877b(%rip)     ; _UIConstraintBasedLayoutLogUnsatisfiable.result + 7
    0x1131cc4f5 <span class="hljs-variable">&lt;+83&gt;</span>:  jne    0x1131cc541               ; <span class="hljs-variable">&lt;+159&gt;</span>
    0x1131cc4f7 <span class="hljs-variable">&lt;+85&gt;</span>:  cmpb   $0x0, 0x77876a(%rip)      ; _UIConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints.__once + 7
    0x1131cc4fe <span class="hljs-variable">&lt;+92&gt;</span>:  je     0x1131cc51e               ; <span class="hljs-variable">&lt;+124&gt;</span>
    0x1131cc500 <span class="hljs-variable">&lt;+94&gt;</span>:  leaq   0x53ba89(%rip), %rdi      ; <span class="hljs-comment">@"Unable to simultaneously satisfy constraints.\n\tProbably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) \n%@\n\nWill attempt to recover by breaking constraint \n%@\n\nMake a symbolic breakpoint at UIViewAlertForUnsatisfiableConstraints to catch this in the debugger.\nThe methods in the UIConstraintBasedLayoutDebugging category on UIView listed in &lt;UIKit/UIView.h&gt; may also be helpful."</span>
    0x1131cc507 <span class="hljs-variable">&lt;+101&gt;</span>: xorl   %eax, %eax
    0x1131cc509 <span class="hljs-variable">&lt;+103&gt;</span>: movq   %r14, %rsi
    0x1131cc50c <span class="hljs-variable">&lt;+106&gt;</span>: movq   %r15, %rdx
    0x1131cc50f <span class="hljs-variable">&lt;+109&gt;</span>: addq   $0x8, %rsp
    0x1131cc513 <span class="hljs-variable">&lt;+113&gt;</span>: popq   %rbx
    0x1131cc514 <span class="hljs-variable">&lt;+114&gt;</span>: popq   %r14
    0x1131cc516 <span class="hljs-variable">&lt;+116&gt;</span>: popq   %r15
    0x1131cc518 <span class="hljs-variable">&lt;+118&gt;</span>: popq   %rbp
    0x1131cc519 <span class="hljs-variable">&lt;+119&gt;</span>: jmp    0x11331930c               ; symbol stub for: NSLog
    0x1131cc51e <span class="hljs-variable">&lt;+124&gt;</span>: addq   $0x8, %rsp
    0x1131cc522 <span class="hljs-variable">&lt;+128&gt;</span>: popq   %rbx
    0x1131cc523 <span class="hljs-variable">&lt;+129&gt;</span>: popq   %r14
    0x1131cc525 <span class="hljs-variable">&lt;+131&gt;</span>: popq   %r15
    0x1131cc527 <span class="hljs-variable">&lt;+133&gt;</span>: popq   %rbp
    0x1131cc528 <span class="hljs-variable">&lt;+134&gt;</span>: retq   
    0x1131cc529 <span class="hljs-variable">&lt;+135&gt;</span>: leaq   0x778720(%rip), %rdi      ; _UIConstraintBasedLayoutPlaySoundOnUnsatisfiable.__once
    0x1131cc530 <span class="hljs-variable">&lt;+142&gt;</span>: leaq   0x4fdb59(%rip), %rsi      ; __block_literal_global68
    0x1131cc537 <span class="hljs-variable">&lt;+149&gt;</span>: callq  0x11331a2a8               ; symbol stub for: dispatch_once
    0x1131cc53c <span class="hljs-variable">&lt;+154&gt;</span>: jmp    0x1131cc4bc               ; <span class="hljs-variable">&lt;+26&gt;</span>
    0x1131cc541 <span class="hljs-variable">&lt;+159&gt;</span>: leaq   0x778728(%rip), %rdi      ; _UIConstraintBasedLayoutLogUnsatisfiable.__once
    0x1131cc548 <span class="hljs-variable">&lt;+166&gt;</span>: leaq   0x4fdbc1(%rip), %rsi      ; __block_literal_global76
    0x1131cc54f <span class="hljs-variable">&lt;+173&gt;</span>: callq  0x11331a2a8               ; symbol stub for: dispatch_once
    0x1131cc554 <span class="hljs-variable">&lt;+178&gt;</span>: jmp    0x1131cc4f7               ; <span class="hljs-variable">&lt;+85&gt;</span>
</code></pre>
<h1>What next?</h1>
<p>We can use the Xcode debug console output to gather more information than we see it initially provides.</p>
<p>In the above example I'm going to take the following output:</p>
<pre><code>Will attempt to recover by breaking constraint &lt;NSLayoutConstraint:0x7fc82d3e18a0 H:[UIView:0x7fc82aba1210(768)]&gt;
</code></pre>
<p>Pull out the <code>UIView</code>'s memory address <code>0x7fd8fe59a440</code> and use the XCode console to get dig deeper and try to get a better understanding.</p>
<h1>Printing views from memory addresses</h1>
<p>The memory address <code>0x7fd8fe59a440</code> is a pointer to a <code>UIView</code>. Since we know that a <code>UIView</code> has other selectors we can query, we can begin to use these to dig deeper into the object and get a better understanding of which part of our view have auto layout constraints that are not playing nicely.</p>
<p>First we try to look at just the UIView and see if that helps us get a grasp as to which view is causing our troubles.</p>
<pre><code>po 0x7fc82aba1210
</code></pre>
<p>If this doesn't provide enough info as the below sample output shows (not very helpful).</p>
<pre><code>(lldb) po <span class="hljs-number">0</span>x7<span class="hljs-built_in">fc</span>82aba1210
&lt;UIView: <span class="hljs-number">0</span>x7<span class="hljs-built_in">fc</span>82aba1210; frame = (<span class="hljs-number">0</span> <span class="hljs-number">0</span>; <span class="hljs-number">768</span> <span class="hljs-number">359</span>); autoresize = RM+BM; layer = &lt;CALayer: <span class="hljs-number">0</span>x7<span class="hljs-built_in">fc</span>82d338960&gt;&gt;
</code></pre>
<p>Maybe printing it's <a href="https://developer.apple.com/library/ios/technotes/tn2239/_index.html#//apple_ref/doc/uid/DTS40010638-CH1-SUBSECTION34"><code>recursiveDescription</code></a> will help out and in my case gives me a better idea of which component I'm actually trying to look at.</p>
<pre><code>(lldb) po [<span class="hljs-number">0</span>x7fc82aba1210 recursiveDescription] 
&lt;UIView: <span class="hljs-number">0</span>x7fc82aba1210; <span class="hljs-variable">frame =</span> (<span class="hljs-number">0</span> <span class="hljs-number">0</span>; <span class="hljs-number">768</span> <span class="hljs-number">359</span>); <span class="hljs-variable">autoresize =</span> RM+BM; <span class="hljs-variable">layer =</span> &lt;CALayer: <span class="hljs-number">0</span>x7fc82d338960&gt;&gt;
   | &lt;MYAPPButton: <span class="hljs-number">0</span>x7fc82d61c800; <span class="hljs-variable">baseClass =</span> UIButton; <span class="hljs-variable">frame =</span> (<span class="hljs-number">0</span> <span class="hljs-number">0</span>; <span class="hljs-number">768</span> <span class="hljs-number">359</span>); <span class="hljs-variable">opaque =</span> NO; <span class="hljs-variable">autoresize =</span> RM+BM; <span class="hljs-variable">layer =</span> &lt;CALayer: <span class="hljs-number">0</span>x7fc82ab96570&gt;&gt;
   |    | &lt;UIImageView: <span class="hljs-number">0</span>x7fc82d3f7b10; <span class="hljs-variable">frame =</span> (<span class="hljs-number">0</span> <span class="hljs-number">0</span>; <span class="hljs-number">0</span> <span class="hljs-number">0</span>); <span class="hljs-variable">clipsToBounds =</span> YES; <span class="hljs-variable">opaque =</span> NO; <span class="hljs-variable">userInteractionEnabled =</span> NO; <span class="hljs-variable">layer =</span> &lt;CALayer: <span class="hljs-number">0</span>x7fc82d6e7020&gt;&gt;
   | &lt;UIImageView: <span class="hljs-number">0</span>x7fc82d54a1c0; <span class="hljs-variable">frame =</span> (<span class="hljs-number">314</span> <span class="hljs-number">110</span>; <span class="hljs-number">140</span> <span class="hljs-number">140</span>); <span class="hljs-variable">autoresize =</span> RM+BM; <span class="hljs-variable">userInteractionEnabled =</span> NO; <span class="hljs-variable">layer =</span> &lt;CALayer: <span class="hljs-number">0</span>x7fc82d52def0&gt;&gt;
</code></pre>
<p>Or if that's not enough context, then we can look at the view's superview and potentially even walk up the view's tree, printing out a different levels trying to understand which component is having trouble with auto layout.</p>
<pre><code>po [[0x7fc82aba1210 superview] recursiveDescription]
</code></pre>
<p>Once you've narrowed down which view inside which component is causing you trouble, now it's up to digging and finding the problematic constraint...</p>
<h1>Fix it</h1>
<p>This part I can't add much color to help you, except to start by looking in your storyboard, xib or code wherever the constraints are being added to the particular view we diagnosed above.</p>
<p>Hopefully this walk-through helps at least a little in diagnosing your auto layout constraint issues.</p>
<p>Happy debugging!</p>
</div>

            </article>
            <article>
                  <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/02/fail-fast-with-ios-images/">Fail Fast With iOS Images</a></h1>
    <p class="meta">
          <time datetime="2015-02-12T17:06:12.682Z" pubdate data-updated="true">Feb 12th 2015</time>


        <a href="/2015/02/fail-fast-with-ios-images/#disqus_thread" data-disqus-identifier="/2015/02/fail-fast-with-ios-images/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><h1>Problem: iOS app has unwieldy, unorganized and poorly named images</h1>
<p>I've been working on a team that took over a good sized legacy iOS project where it's usage of images became a little unwieldy. Between the various app clones (targets), shared images, and images that aren't even used we'd like to reorganize, rename and just clean up the app in general.</p>
<p>But, one thing that makes me nervous is how easy it is to rename an image, forget or miss a magic-string that tries to load that image and now we've introduced a bug that may be difficult to diagnose or even discover that we introduced it.</p>
<h1>Let's fail fast?</h1>
<p>Failing fast in this context means, how can we, during development and testing time quickly fail when running the app to determine where an image attempting to be loaded does not.</p>
<blockquote>
<p>Ideally we wouldn't even have these magic-strings to deal with. Using some tool to automatically generate a compile-time safe construct that we can use to load images. However until both A) I find the darn tool that I once-upon stumbled across that does this (please leave a comment to remind me if you find it before I do...) and B) we get sed tool integrated, I threw this little helper to quickly fail fast and help us find broken image references within our iOS applications.</p>
</blockquote>
<h1>How does it work?</h1>
<p>It's a simple little <a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html">Category</a> that overrides the <code>imageNamed:</code> selector of <code>UIImage</code> and if the original cannot load an image (returns <code>nil</code>) then it will fail with a helpful assertion message.</p>
<p>This utility allowed us to quickly find images that were missing while doing our big clean sweep.</p>
<h1>How to integrate?</h1>
<p>It should be as simple as adding the <code>.h</code> &amp; <code>.m</code> files to your project and their respective targets and you should be off to the races.</p>
<p><script src="https://gist.github.com/6f462e1829a9976783c0.js?file=UIImage%2BFailFast.h"></script></p>
<p><script src="https://gist.github.com/6f462e1829a9976783c0.js?file=UIImage%2BFailFast.m"></script></p>
<h1>For DEBUG mode only...</h1>
<p>If you look closely you'll notice <code>#if DEBUG</code> wraps the implementation so when we ship to the app store we don't end up causing a crash in production if a missing image sneaks by.</p>
<p>Happy Missing Image Bashing!</p>
</div>

            </article>
            <article>
                  <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/01/how-to-install-clang-format-and-formatting-objective-c-files/">How to install clang-format and formatting Objective-C files</a></h1>
    <p class="meta">
          <time datetime="2015-01-14T05:49:01.820Z" pubdate data-updated="true">Jan 13th 2015</time>


        <a href="/2015/01/how-to-install-clang-format-and-formatting-objective-c-files/#disqus_thread" data-disqus-identifier="/2015/01/how-to-install-clang-format-and-formatting-objective-c-files/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>Formatting your code so it follows whatever conventions your team/company/self define is important. As developers who have to read code on a regular basis, you have to train ourselves to mentally parse code and spot where bugs may be lurking.</p>
<p>However, if your code is not formatted in a consistent fashion, the cognitive load placed on your brain increases dramatically. Not only do you have to read, parse, and conceptualize the code you're reviewing, your brain is now having to decide if anomalies in the formatting of your project's source code are because of a problem in the code, or merely a difference in the code formatting or styling.</p>
<p>Easy and automatic code formatting tools were something I really missed when I started using Xcode because Visual Studio's built-in formatting of a file is as simple as <code>CTRL+k+d</code>.</p>
<p>This has definitely improved in recent years with the introduction of <a href="http://alcatraz.io/">Alcatraz</a> and <a href="https://github.com/travisjeffery/ClangFormat-Xcode">ClangFormat-Xcode</a> and I'd highly recommend you check them out.</p>
<p>But, what if you just acquired a legacy project, that was hacked on by quite a number of different developers, with different styles, that's a total mess (from a style consistency perspective)? Or what if you wanted to have an easy <code>rake</code> task that automatically formatted the necessary code files?</p>
<p>This is where a great little tool from the <a href="http://llvm.org">LLVM</a> project <code>clang-format</code> comes in handy.</p>
<p><s>Unfortunately it's not as easy to install as <code>brew install clang-format</code></s> (It's now as easy to install as <code>brew install clang-format</code>), but I'll show you not only how to get it installed manually, but a command to easily format your code.</p>
<h1>How to install <code>clang-format</code> manually</h1>
<p>Thanks to <a href="http://nacho4d-nacho4d.blogspot.de/2013/11/clang-format.html">this post</a> for describing how to get (an older version of the tool), I put together the following steps that I hope you find useful.</p>
<ol>
<li>Go to the <a href="http://llvm.org/releases/download.html">LLVM Download page</a></li>
<li>In chrome dev tools (On my mac, <code>⌘+⌥+J</code> aka <code>CMD+Option+J, make sure the</code>Elements<code>tab is selected, and</code>CMD+F<code>within the html source for</code>macosx-apple-darwin`.
<ul>
<li>as of writing this, I get a link to the following url <a href="http://llvm.org/releases/3.5.0/clang+llvm-3.5.0-macosx-apple-darwin.tar.xz"><code>http://llvm.org/releases/3.5.0/clang+llvm-3.5.0-macosx-apple-darwin.tar.xz</code></a></li>
</ul>
</li>
<li>Copy that URL and place it into the following set of commands.</li>
</ol>
<p>From a command prompt, navigate to a folder where you'd like to save or store the <code>clang</code> tools.</p>
<ol>
<li>Remove the older version if there was one, and create a folder to work in
<code>rm -rf ./clang-format/ &amp;&amp; mkdir -p ./clang-format</code></li>
<li>Take the previously discovered link from above and use the following to download it into our working folder.
<code>curl 'http://llvm.org/releases/3.5.0/clang+llvm-3.5.0-macosx-apple-darwin.tar.xz' -o './clang-format/clang-format.tar.xz'</code></li>
<li>Extract the tar file
<code>tar xvfJ clang-format/clang-format.tar.xz -C ./clang-format</code></li>
<li>Remove any previously sym-linked linked version you have
<code>rm -f ~/bin/clang-format</code></li>
<li>Link the downloaded clang-format command into our <code>~/bin</code> folder
<code>ln -s $(pwd)/$(find clang-format | grep bin/clang-format$) ~/bin/clang-format</code></li>
<li>Test the command works
<code>clang-format --help</code></li>
</ol>
<p>Here are all of the steps above as a script:</p>
<pre><code>rm -rf ./clang-<span class="hljs-keyword">format</span>/ &amp;&amp; mkdir -p ./clang-<span class="hljs-keyword">format</span>
curl <span class="hljs-string">'http://llvm.org/releases/3.5.0/clang+llvm-3.5.0-macosx-apple-darwin.tar.xz'</span> -o <span class="hljs-string">'./clang-format/clang-format.tar.xz'</span>
tar xvfJ clang-<span class="hljs-keyword">format</span>/clang-<span class="hljs-keyword">format</span>.tar.xz -C ./clang-<span class="hljs-keyword">format</span>
rm -f ~/bin/clang-<span class="hljs-keyword">format</span>
ln -s <span class="hljs-variable">$(</span><span class="hljs-keyword">pwd</span>)/<span class="hljs-variable">$(</span>find clang-<span class="hljs-keyword">format</span> | grep bin/clang-<span class="hljs-keyword">format</span><span class="hljs-variable">$)</span> ~/bin/clang-<span class="hljs-keyword">format</span>
clang-<span class="hljs-keyword">format</span> --<span class="hljs-keyword">help</span>
</code></pre>
<h1>How to setup your project style guide</h1>
<p>Now that you have the command line <code>clang-format</code> tool installed, you can walk through how to use it to format our Objective-C code files. Let's walk through some steps I used to apply a standard code format to the project.</p>
<p>But, before you use the command line tool to rip through our project, let's first set the standards you'd like clang-format to adhere to when formatting our code.</p>
<p>At the root of your project (probably where your <code>.git</code> folder is), create a file called <code>.clang-format</code></p>
<p>The <code>.clang-format</code> file contains the formatting rules for a project. Its structure is <a href="http://www.yaml.org/">YAML</a> and is what the <code>clang-format</code> CLI can read to format your project's Objective-C files.</p>
<p>For details about the <code>.clang-format</code> file, you can <a href="http://clang.llvm.org/docs/ClangFormatStyleOptions.html">check out the docs</a> to get a list of all of the options possible in this file.</p>
<p>Here is one I have used before.</p>
<pre><code><span class="hljs-attribute">BasedOnStyle</span>: <span class="hljs-string">Chromium</span>

<span class="http"><span class="hljs-attribute">AlignTrailingComments</span>: <span class="hljs-string">true</span>
<span class="hljs-attribute">AllowShortIfStatementsOnASingleLine</span>: <span class="hljs-string">false</span>
<span class="hljs-attribute">BreakBeforeBraces</span>: <span class="hljs-string">Attach</span>
<span class="hljs-attribute">ColumnLimit</span>: <span class="hljs-string">0</span>
<span class="hljs-attribute">IndentWidth</span>: <span class="hljs-string">4</span>
<span class="hljs-attribute">KeepEmptyLinesAtTheStartOfBlocks</span>: <span class="hljs-string">true</span>
<span class="hljs-attribute">Language</span>: <span class="hljs-string">Cpp</span>
<span class="hljs-attribute">MaxEmptyLinesToKeep</span>: <span class="hljs-string">4</span>
<span class="hljs-attribute">ObjCSpaceAfterProperty</span>: <span class="hljs-string">true</span>
<span class="hljs-attribute">ObjCSpaceBeforeProtocolList</span>: <span class="hljs-string">false</span>
<span class="hljs-attribute">PointerBindsToType</span>: <span class="hljs-string">false</span>
<span class="hljs-attribute">SpacesBeforeTrailingComments</span>: <span class="hljs-string">1</span>
<span class="hljs-attribute">TabWidth</span>: <span class="hljs-string">4</span>
<span class="hljs-attribute">UseTab</span>: <span class="hljs-string">Never</span>
</span></code></pre>
<p>If you want to ignore a folder from being touched, you can place a <code>.clang-format</code> in that folder with the following option set:</p>
<pre><code><span class="hljs-attribute">BasedOnStyle</span>: <span class="hljs-string">None</span>
</code></pre>
<h1>Format all our files at once</h1>
<p>Now that you have a <code>.clang-format</code> file which helps to define our project's styling conventions, you can begin our initial formatting sweep.</p>
<p>First let's create a command that gives us all the files you want to process.</p>
<p>Here's my initial example (executed in a zsh shell):</p>
<p><code>ls MyProject/*.[hm]</code></p>
<p>Tweak this however you need so that you get a list of files to format from your project. You may want to be careful to exclude a CocoaPods folder, or other third party libraries and once you are happy with it, you can then pipe its output to <code>clang-format</code>.</p>
<p><code>ls MyProject/*.[hm] | xargs clang-format -i -style=file</code></p>
<p>You can use the <code>xargs</code> command to execute the <code>clang-format</code> command for each file in the output <code>ls</code>.</p>
<h3><code>clang-format</code> options</h3>
<p>In the above example you use the following <code>clang-format</code> options:</p>
<ul>
<li><code>-i</code> tells it to do an in-place edit of the file</li>
<li><code>style=file</code> this tells <code>clang-format</code> to use our <code>.clang-format</code> style rules when formatting.</li>
</ul>
<h1>Did you have your project under source control before doing this?</h1>
<p>I sure hope you have the project in source control. You should now be able to <code>git diff</code> or whatever you do to view your source changes and see the files that have been modified by the <code>clang-format</code> command.</p>
<p>I hope this post was helpful in showing you how to install <code>clang-format</code> and use it to format your existing Objective-C project.</p>
</div>

            </article>
            <article>
                  <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2014/03/infinite-scrolling-uicollectionview/">Infinite Scrolling UICollectionView with Asyncronously Loading</a></h1>
    <p class="meta">
          <time datetime="2014-03-15T19:17:00.000Z" pubdate data-updated="true">Mar 15th 2014</time>


        
    </p>
</header>
<div class="entry-content"><p>The other day I set out to create an iOS UICollectionView that allowed a user to scroll vertically through an infinite-ish list of items where the data came from a paginated back-end web service. Most of the examples out there deal with synchronous in-memory. I needed an asynchronous paginated example.</p>
<p>I'm new enough to iOS development that solutions don't yet roll off the wire of my keyboard, so I still google for how others attack a problem and adapt their strategy to fit my needs.</p>
<p>It seemed like it took me all day to track down the pieces I needed to put together a solution. But I found enough to put together a prototype.</p>
<p>If you need something like this, I've pushed my prototype up to <a href="https://github.com/staxmanade/PaginatedCollectionView">GitHub</a> and hopefully it'll give you enough hints to get started on your own implementation.</p>
<p>I'm open to feedback. Post any suggestions/alternative ideas to the github repo.</p>
<h1>Where do I get it?</h1>
<h2><a href="https://github.com/staxmanade/PaginatedCollectionView">HERE</a></h2>
<p>Hope you find this useful.</p>
</div>

            </article>
            <div class="pagination">
                <a href="/blog/archives">Blog Archives</a>
            </div>
        </div>



    </div>
</div>
<footer role="contentinfo"><p>
  Copyright &copy; 2015 - Jason Jarrett - <span class="credit">Powered by <a href="http://togglejs.github.io">Toggle</a></span>
</p>

</footer>
  



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



</body>
</html>
