<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Category: TypeScript - Developing on Staxmanade</title>
  <meta name="author" content="Jason Jarrett">


   <meta name="description" content="">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <link rel="canonical" href="https://staxmanade.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/DevelopingOnStaxmande" rel="alternate" title="Developing on Staxmanade" type="application/atom+xml">
    <script src="/js/modernizr-2.0.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./js/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/octopress.js" type="text/javascript"></script>
    <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">


<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-6814534742514314",
          enable_page_level_ads: true
     });
</script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1017448-6']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</head>

<body   >
<header role="banner"><hgroup>
  <h1><a href="/">Developing on Staxmanade</a></h1>

   <a class="subscribe-button" href="/subscribe">Subscribe</a>
</hgroup>

</header>
<nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/DevelopingOnStaxmande" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
</ul>
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

<div>
  <form action="//www.google.com" id="cse-search-box">
    <div>
      <input type="hidden" name="cx" value="partner-pub-6814534742514314:2581894146" />
      <input type="hidden" name="ie" value="UTF-8" />
      <input type="text" name="q" size="25" />
      <input type="submit" name="sa" value="Search" />
    </div>
  </form>

  <script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
</div>
</nav>
<div id="main">
    <div id="content">

        <div class="blog-index">
            <article>
                  <header>
    <h1 class="entry-title"><a href="https://staxmanade.com/2017/02/porting-a-large-jspm-babeljs-project-to-typescript/">Porting a Large JSPM BabelJS project to Typescript</a></h1>
    <p class="meta">
          <time datetime="2017-02-20T06:33:46.360Z" pubdate data-updated="true">Feb 19th 2017</time>


        <a href="/2017/02/porting-a-large-jspm-babeljs-project-to-typescript/#disqus_thread" data-disqus-identifier="/2017/02/porting-a-large-jspm-babeljs-project-to-typescript/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>I've been working on a project for over a year now that was originally written in ES6 with (some async/await ES7) using <a href="https://babeljs.io/">BabelJS</a> to transpile and really enjoying the experience of using the latest javascript.</p>
<p>ES6/7 was great at the beginning, when I had 1, then 2... then 5 files. The project was small, I could pretty much load the entire application into my own head at once, reason, tweak, plow forward.</p>
<p>It didn't take too long before the project grew beyond a single load into memory. Now I'm mentally paging out components from different files as I work on various sections of the application.</p>
<p>Just like anything, once the project grew to this point, it became a little more difficult to maintain. Now, I consider myself a <a href="https://staxmanade.com/2015/08/habit-of-a-solid-developer-introduction/">fairly solid developer</a>, and that's likely how I made it this far without a compiler as my components were small, surface areas tight and the interactions between them were well managed. I also had a decent number of <a href="https://staxmanade.com/2015/03/in-app-unit-tests/">in-app unit and integration tests</a> because generally (but not always) I'm a <a href="https://staxmanade.com/2012/01/you-are-responsible-for-making-that/">test-first kind of guy</a>.</p>
<p>However, that didn't stop me from breaking things, making mistakes or just out-right screwing up a javascript file here and there along the way.</p>
<p>While working on this project, it always niggled me that the project would keep growing without the ability for the most basic of unit-tests to run (the compiler). Almost a year ago I even remember trying to use Typescript but using it with JSPM and without having VisualStudio Code all together, it just never came together (or I just didn't try hard enough).</p>
<p>But this past week, I gave it another go, and while I'm not totally there (or where I'd like to end up), I'm quite happy with the results I've made so far and am impressed and quite happily working in a project that has completely been ported to Typescript from ES6/7 using BabelJS.</p>
<h1>First some idea about the project.</h1>
<p>Now, when it comes to large software projects, I'm pretty sure I shouldn't be calling this project a &quot;large&quot; as the subject of this post seems to label it... But for a system built only by me in some nights and weekends, it is the largest single app I've built alone, so that's where I'm defining &quot;Large&quot;.</p>
<p>The project has just about a hundred javascript files/components/classes/modules and comes in just above <code>12,000</code> lines of code. That's not counting of course all the dependencies pulled in through JSPM (using both NPM and Github). In fact I really need to look at my dependencies and see where I can trim some fat, but that's not the subject of this post.</p>
<h1>Porting from Babel to TypeScript</h1>
<p>With some context about the project this is coming from out of the way, I thought it would be helpful to outline the steps (or stumbles) I took along the way to get my project up and running using TypeScript with JSPM.</p>
<h1>Pre-migration steps</h1>
<p>Below are steps I took to get this thing going. I doubt they're perfect or even apply to your or anyone elses projects, but here's hoping they're helpful</p>
<ol>
<li>In a fresh temp folder, I used the <code>jspm init</code> command to setup a fresh new project and selected the <code>Typescript</code> transpiler option.</li>
</ol>
<blockquote>
<p>this allowed me to inspect what a &quot;fresh&quot; project from JSPM would look like with Typescript setup.</p>
</blockquote>
<ol start="2">
<li>The next thing I did was review the angular getting started guide to see what Typescript specific configurations they used.</li>
</ol>
<blockquote>
<p>Now, my project isn't Angular (it's actually React based), but I thought I could learn a little something along the way. I don't know if I actually gleaned anything while doing this (as I'm writing this post a ways after I actually did the work, but as an FYI, you might learn something reading it)</p>
</blockquote>
<h1>What steps did I take to port the project?</h1>
<p>Looking back at the series of commits during my port, here's basically what I did. In some cases order doesn't matter below, but I left this list in the order of my projects git commit log.</p>
<ol>
<li>Renaming each file with the <code>.jsx</code> extension to <code>.tsx</code> (Typescript's variant of JSX) (note: not renaming anything but code I wrote - so don't touch anything in <code>jspm_packages</code> or <code>node_modules</code> folders etc.</li>
<li><code>jspm install ts</code> &lt;-- installing the <a href="https://github.com/frankwallis/plugin-Typescript">Typescript jspm plugin</a></li>
<li>Updated my <code>jspm.config.js</code> <code>transpiler</code> flag with the following:</li>
</ol>
<pre><code class="language-diff"><span class="hljs-deletion">-  transpiler: "plugin-babel",</span>
<span class="hljs-addition">+  transpiler: "Typescript",</span>
<span class="hljs-addition">+  TypescriptOptions: {</span>
<span class="hljs-addition">+    "tsconfig": true // indicates that a tsconfig exists that should be used</span>
<span class="hljs-addition">+  },</span>
</code></pre>
<p>Then I updated my <code>jspm.config.js</code>'s <code>app</code> section with the following.</p>
<pre><code class="language-diff">   packages: {
<span class="hljs-deletion">-    "app": {</span>
<span class="hljs-deletion">-      "defaultExtension": false,</span>
<span class="hljs-deletion">-      "main": "bootstrap.jsx",</span>
<span class="hljs-deletion">-       "meta": {</span>
<span class="hljs-deletion">-        "*": {</span>
<span class="hljs-deletion">-          "babelOptions": {</span>
<span class="hljs-deletion">-            "plugins": [</span>
<span class="hljs-deletion">-              "babel-plugin-transform-react-jsx",</span>
<span class="hljs-deletion">-              "babel-plugin-transform-decorators-legacy"</span>
<span class="hljs-deletion">-            ]</span>
<span class="hljs-deletion">-          }</span>
<span class="hljs-deletion">-        }</span>
<span class="hljs-deletion">-      }</span>
<span class="hljs-deletion">-    },</span>
<span class="hljs-addition">+    "app": { // all files within the app folder</span>
<span class="hljs-addition">+      "main": "bootstrap.tsx", // main file of the package (will be important later)</span>
<span class="hljs-addition">+      "format": "system", // module format</span>
<span class="hljs-addition">+      "defaultExtension": "ts", // default extension of all files</span>
<span class="hljs-addition">+      "meta": {</span>
<span class="hljs-addition">+        "*.ts": { // all ts files will be loaded with the ts loader</span>
<span class="hljs-addition">+          "loader": "ts"</span>
<span class="hljs-addition">+        },</span>
<span class="hljs-addition">+        "*.tsx": { // all ts files will be loaded with the ts loader</span>
<span class="hljs-addition">+          "loader": "ts"</span>
<span class="hljs-addition">+        },</span>
<span class="hljs-addition">+      }</span>
<span class="hljs-addition">+    },</span>
</code></pre>
<ol start="4">
<li>Created a <code>tsconfig.json</code> file</li>
</ol>
<pre><code class="language-javascript">{
 <span class="hljs-string">"compilerOptions"</span>: {
    <span class="hljs-string">"target"</span>: <span class="hljs-string">"es5"</span>,                <span class="hljs-comment">/* target of the compilation (es5) */</span>
    <span class="hljs-string">"module"</span>: <span class="hljs-string">"system"</span>,             <span class="hljs-comment">/* System.register([dependencies], function) (in JS)*/</span>
    <span class="hljs-string">"moduleResolution"</span>: <span class="hljs-string">"node"</span>,     <span class="hljs-comment">/* how module gets resolved (needed for Angular 2)*/</span>
    <span class="hljs-string">"emitDecoratorMetadata"</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">/* needed for decorators */</span>
    <span class="hljs-string">"experimentalDecorators"</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">/* needed for decorators (@Injectable) */</span>
    <span class="hljs-string">"noImplicitAny"</span>: <span class="hljs-literal">false</span>,         <span class="hljs-comment">/* any has to be written explicitly*/</span>
    <span class="hljs-string">"jsx"</span>: <span class="hljs-string">"react"</span>
  },
  <span class="hljs-string">"exclude"</span>: [   <span class="hljs-comment">/* since compiling these packages could take ages, we want to ignore them*/</span>
    <span class="hljs-string">"jspm_packages"</span>,
    <span class="hljs-string">"node_modules"</span>
  ],
  <span class="hljs-string">"compileOnSave"</span>: <span class="hljs-literal">false</span>        <span class="hljs-comment">/* on default the compiler will create js files */</span>
</code></pre>
<ol start="5">
<li>Renamed <code>*.js</code> files to <code>*.ts</code>. (Similar to step 1 above with <code>jsx -&gt; tsx</code> but now just the plain JavaScript files)</li>
<li>In all of my source code where I used to do this: <code>import foo from './foo.js'</code> I removed the <code>.js</code> extensions like <code>import foo from './foo'</code></li>
<li>I did NOT remove the <code>.jsx</code> extension in my <code>import</code> statements - but renamed them to <code>tsx</code> so <code>import foo from './foo.jsx'</code> became <code>import foo from './foo.tjs'</code></li>
<li>Next I added a file at the root of my client project called <code>globalTypes.d.ts</code>, this is where I could hack in some type definitions that I use globally in the project.</li>
<li>Then I started adding my type definitions...</li>
</ol>
<p>I used the <a href="https://github.com/typings/typings">typings</a> tool to search for TypeScript type definitions. And if I found one, I would typically try to install them from <code>npm</code>.</p>
<p>For example: searching for <code>react</code> like <code>typings search react</code> shows me that there is a DefinitelyTyped version of the type defs and <a href="https://blogs.msdn.microsoft.com/Typescript/2016/06/15/the-future-of-declaration-files/">I now know</a> that we can use NPM to install them by typing <code>npm install --save @types/react</code></p>
<p>So I installed a ton of external library typings.</p>
<ol start="11">
<li>Next, started looking around my editor <a href="https://code.visualstudio.com/">VisualStudio Code</a> in hopes to see a bunch of typing errors reported, and was surprised to see very few. No, not because I'm so good at JavaScript that my TypeScript was perfect. Far from it... The problem I had was the <code>tsconfig.json</code> file was not at the root of my project (was at the root of my client site) - but it was nested several folders down from the root of my project. For some reason the editor wasn't picking it up until I opened the editor from the location the <code>tsconfig.json</code> file was rooted, things didn't work.</li>
</ol>
<blockquote>
<p>Honestly, I don't know what the above was about - but was something I ran into. I can't say for certain if it is still an issue - I think I'm starting to see editor features load up regardless of what folder I open things - so your mileage may vary.</p>
</blockquote>
<ol start="12">
<li>Once the TypeScript editor features started lighting up in VS Code, my next steps were start to take the TypeScript's feedback and implement either typing work-arounds or fixing actual bugs the compiler found.</li>
</ol>
<p>THE END - ish</p>
<h1>Where am I now?</h1>
<p>The above steps were really all I went through to port this project over to TypeScript and it was relatively seamless. That's not to say it was simple or easy, but definitely do-able, and worth it.</p>
<p>It's been a few weeks since I ported the project to TypeScript and I'm really kicking myself for not doing it sooner.</p>
<p>The editor assist with intellisense of function calls from internal and external modules and their usage/function signatures saves time researching external documentation.</p>
<h1>Other observations since the move.</h1>
<ol>
<li>Builds seem to be a little faster with TypeScript than Babel. I can't say I can prove this. I didn't do any actual tests on this, but just a feeling I got after migration.</li>
<li>Sourcemaps seem to actually work. Whenever I used BabelJS, debugging and stepping through async/await it just never seemed to line up right for me. This was likely user-error or in-proper configuration of babel on my part, so who knows... but having working source-maps is AMAZING, especially with the <code>async/await</code> feature.</li>
<li>One area of concern that I haven't yet worked through. Is the JSPM typescript loading up in the browser - or running <code>jspm bundle app</code> at the command line doesn't report any typescript errors - or fail any builds. However, I'm glad it doesn't because something isn't quite rite with my configuration as every import of a <code>.tsx</code> file reports an error. So, for now I'm just relying on the red squigglies in my VS Code editor to help me catch typing errors.</li>
</ol>
<p>If you go for this port in your own project, I hope this was helpful, and that your port goes well.</p>
<p>Happy TypeScripting!</p>
</div>

            </article>
            <article>
                  <header>
    <h1 class="entry-title"><a href="https://staxmanade.com/2016/03/oops---how-a-simple-bit-of-automation-put-nuget-on-edge---/">Oops - how a simple bit of automation put NuGet services on edge...</a></h1>
    <p class="meta">
          <time datetime="2016-03-30T20:06:46.955Z" pubdate data-updated="true">Mar 30th 2016</time>


        <a href="/2016/03/oops---how-a-simple-bit-of-automation-put-nuget-on-edge---/#disqus_thread" data-disqus-identifier="/2016/03/oops---how-a-simple-bit-of-automation-put-nuget-on-edge---/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>This past week I received an email from Microsoft's NuGet team asking if I could look into a bit of an issue with <a href="http://definitelytyped.org/">DefinitelyTyped's</a> NuGet package publishing.</p>
<h2>Some Background</h2>
<p>A really long time ago, I wanted to access DefinitelyTyped packages within Visual Studio via the NuGet package manager. So I quickly wrote up a <a href="https://github.com/DefinitelyTyped/NugetAutomation">powershell script</a> to accomplish this. This script has run almost continuously ever since, and primarily without issue.</p>
<blockquote>
<p>There's been a couple tweaks/issues along the way - as to be expected, but it's been primarily hands-off.</p>
</blockquote>
<p>As of today, <a href="https://www.nuget.org/profiles/DefinitelyTyped">these NuGet packages</a> have been downloaded over <code>5,268,852</code> times - wow.</p>
<h1>What does the automation do?</h1>
<p>All of the NuGet packages generated for DefinitelyTyped are run through a build process on the good servers at <a href="https://www.appveyor.com/">AppVeyor</a> (Thanks AppVeyor).</p>
<p>Every 2 hours the task does some git-fu to figure out what DT packages have updated (since the last run) and publishes updated NuGet packages for each updated DT package.</p>
<h1>The initial problem report:</h1>
<p>First let me say that thanks to Yishai and Maarten from Microsoft who brought the issue to my attention and were extremely polite and patient with the raised issue. So thank you, thank you, thank you for the support and being so friendly while working through this...</p>
<p><img src="/images/posts/nuget-automation-oops-initial-email.png" alt="service status image of problem with nuget"></p>
<h1>Looking at <a href="http://status.nuget.org">status.nuget.org</a></h1>
<p>It was pretty easy to see that every 2 hours a large spike in uploads to NuGet was happening.</p>
<p><img src="/images/posts/nuget-automation-oops-before.png" alt="service status image of problem with nuget"></p>
<p><img src="/images/posts/nuget-automation-oops-status-text.png" alt="service status image of problem with nuget"></p>
<blockquote>
<p>While I can't say for certain this incident report on the status page was due to the NuGet automation, it was around the same time the automation was pushing extra builds (and right before I was contacted by Microsoft).</p>
</blockquote>
<h1>Was that my automation oops?</h1>
<p>I didn't recall getting an error email from AppVeyor so I was initially suspicious. But logging in and looking at build history: hmmm. Looking back at my email, looks like I did receive the first failed build email - but must have been busy day as I didn't happen to notice that one email (when I usually do from other projects).</p>
<p><img src="/images/posts/nuget-automation-oops-appveyor-status.png" alt="service status image of problem with nuget"></p>
<p>YIKES!... so I quickly responded to Microsoft saying I'd shut down the automated portion and dig into it.</p>
<h1>The Problem &amp; Resolution</h1>
<p>Turns out the problem was due to a <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/pull/8605">large pull request</a> that updated about every package in the DT repo. This meant it had to publish every single package, but for some reason (not showing in the logs) the AppVeyor job was failing at the end and not saving the fact that the packages were being updated on NuGet...</p>
<p>I have a way to run the NuGet publish manually on a local machine so I pulled down the project and ran the complete build. This took quite a while (almost 3 hours) and eventually I discovered the problem.</p>
<p>At the end of the script is a <code>git commit -m {msg}</code> command. This is an important step as it records what has been updated/published. The problem was due to the large number of packages published, the <code>{msg}</code> was so big that it was throwing an error saying the command line command was too long to execute. Causing the system to not complete the cycle and end up re-publishing all nuget packages every 2 hours.</p>
<p>I was able to manually commit with <a href="https://github.com/DefinitelyTyped/NugetAutomation/commit/6d2a95975849749b496e48d12e199b9561dc2cfd">a shorter message</a> and it brought the system back to normal.</p>
<p>And below is NuGet status after the fix.</p>
<p><img src="/images/posts/nuget-automation-oops-after.png" alt="service status image of problem with nuget"></p>
<h1>Thanks NuGet!</h1>
<p>Turns out the NuGet team put some time into optimizing the publishing process of their service - so maybe there was a benefit to this whole fiasco, but hopefully we won't be hammering the system going forward :)</p>
<p>So I'd like to say thanks again to the NuGet team for your kind support email and professional way of handling the issue. This is a great example of how Microsoft is helping the OSS community and their support is really taking off and showing promise!</p>
<h3>Also Good Point</h3>
<p><img src="/images/posts/nuget-automation-oops-gates-quote.png" alt="service status image of problem with nuget"></p>
<p>Happy NuGetting!</p>
</div>

            </article>
            <article>
                  <header>
    <h1 class="entry-title"><a href="https://staxmanade.com/2015/08/playing-with-typescript-and-jsx/">Hello World with TypeScript and JSX</a></h1>
    <p class="meta">
          <time datetime="2015-08-18T16:41:22.058Z" pubdate data-updated="true">Aug 18th 2015</time>


        <a href="/2015/08/playing-with-typescript-and-jsx/#disqus_thread" data-disqus-identifier="/2015/08/playing-with-typescript-and-jsx/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><blockquote>
<p>If you're looking for a solid TypeScript JSX tutorial <a href="https://github.com/RyanCavanaugh/jsx-intro#reusable-components">this is a great resource</a>.</p>
</blockquote>
<p>Last night I wanted to play with TypeScripts new support for <a href="http://jsx.github.io/">JSX</a>. In this post I'll walk through my process, and what I learned along the way. Hopefully you find this useful.</p>
<p>While it doesn't yet exist in the current version (at the time of this writing TypeScript is at 1.5), you can however grab a copy of the nightly builds from npm.</p>
<h1>Get the most recent nightly build.</h1>
<pre><code>npm install -g typescript@next
</code></pre>
<blockquote>
<p>The rest of this post was run against nightly build <code>Version 1.6.0-dev.20150814</code>.</p>
</blockquote>
<h2>Given this sample React/JSX</h2>
<pre><code><span class="hljs-keyword">var</span> HelloMessage = React.createClass({
  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> &lt;div&gt;Hello {<span class="hljs-keyword">this</span>.props.name}&lt;/div&gt;;
  }
});

React.render(&lt;HelloMessage name=<span class="hljs-string">"John"</span> /&gt;, mountNode);
</code></pre>
<h1>Create a TypeScript version of a JSX file.</h1>
<p>Just like how TypeScript doesn't read <code>.js</code> but looks for <code>.ts</code> files (<a href="https://staxmanade.com/2014/05/how-to-compile-plain-star-dot-js-javascript-files-with-the-typescript-compiler/">unless you hack it</a>). TypeScript doesn't read <code>.jsx</code> files. It instead looks for <code>.tsx</code> files.</p>
<p>So if you save the above sample as a <code>helloWorld.tsx</code>, we can then run the <code>tsc</code> compiler against our <code>helloWorld.tsx</code> file.</p>
<p>If I run <code>tsc helloWorld.tsx</code> I get the following errors:</p>
<pre><code>&gt; tsc helloWorld<span class="hljs-class">.tsx</span>
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">1</span>,<span class="hljs-number">20</span>)</span></span>: error TS2304: Cannot find name <span class="hljs-string">'React'</span>.
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">3</span>,<span class="hljs-number">12</span>)</span></span>: error TS17004: Cannot use JSX unless the <span class="hljs-string">'--jsx'</span> flag is provided.
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">7</span>,<span class="hljs-number">1</span>)</span></span>: error TS2304: Cannot find name <span class="hljs-string">'React'</span>.
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">7</span>,<span class="hljs-number">14</span>)</span></span>: error TS17004: Cannot use JSX unless the <span class="hljs-string">'--jsx'</span> flag is provided.
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">7</span>,<span class="hljs-number">44</span>)</span></span>: error TS2304: Cannot find name <span class="hljs-string">'mountNode'</span>.
</code></pre>
<h1>Working through the errors...</h1>
<p>I could just show you the final output that compiles, but want to include my learning process (stumbling) as I fumble through and figure out the new command.</p>
<h1>Fixing <code>error TS2304: Cannot find name 'React'.</code></h1>
<p>If you've been using TypeScript for any amount of time, the first error should be easy to see. The compiler knows nothing about this thing called <code>React</code>. And I haven't used React with TypeScript before. I don't want to go write a bunch of TypeScript type definitions for react and can easily pull down ones created already by using <code>tsd</code> to install the Definitely Typed definitions for <code>React</code>.</p>
<h3>What is tsd?</h3>
<p>If you haven't seen <a href="http://definitelytyped.org/tsd/">TSD</a> before it's a great package manger utility for TypeScript Type Definitions.</p>
<p>It can be easily installed with <code>npm install -g tsd</code>.</p>
<h3>Installing React Type Definitions</h3>
<blockquote>
<p>UPDATE: Originally below I used <code>tsd</code> to install <code>react</code> but if you check out the comments <code>react-global</code> works out better and you can avoid some of the hacks I put in place to compile React below.</p>
</blockquote>
<p><code>tsd install react</code> which <code>tsd</code> will download from <a href="http://definitelytyped.org">Definitely Typed</a> the <code>react.d.ts</code> and place it in <code>./typings/react/react.d.ts</code>.</p>
<p>I then reference the file in our <code>helloWorld.tsx</code> which gives me the following:</p>
<pre><code><span class="hljs-comment">/// &lt;reference path="./typings/react/react.d.ts" /&gt;</span>

<span class="hljs-keyword">var</span> HelloMessage = React.createClass({
  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> &lt;div&gt;Hello {<span class="hljs-keyword">this</span>.props.name}&lt;/div&gt;;
  }
});

React.render(&lt;HelloMessage name=<span class="hljs-string">"John"</span> /&gt;, mountNode);
</code></pre>
<p>When I re-run <code>tsc helloWorld.tsx</code> hoping to get rid of the first error: hmmm</p>
<pre><code>&gt; tsc helloWorld<span class="hljs-class">.tsx</span>
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">3</span>,<span class="hljs-number">20</span>)</span></span>: error TS2304: Cannot find name <span class="hljs-string">'React'</span>.
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">5</span>,<span class="hljs-number">12</span>)</span></span>: error TS17004: Cannot use JSX unless the <span class="hljs-string">'--jsx'</span> flag is provided.
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">9</span>,<span class="hljs-number">1</span>)</span></span>: error TS2304: Cannot find name <span class="hljs-string">'React'</span>.
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">9</span>,<span class="hljs-number">14</span>)</span></span>: error TS17004: Cannot use JSX unless the <span class="hljs-string">'--jsx'</span> flag is provided.
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">9</span>,<span class="hljs-number">44</span>)</span></span>: error TS2304: Cannot find name <span class="hljs-string">'mountNode'</span>.
</code></pre>
<p>Well, that didn't get rid of our <code>error TS2304: Cannot find name 'React'.</code>. This threw me for a bit but eventually figured out that you need set it up by adding <code>import React = __React;</code>.</p>
<p>So that gives us this:</p>
<pre><code><span class="hljs-comment">/// &lt;reference path="./typings/react/react.d.ts" /&gt;</span>
<span class="hljs-preprocessor"><span class="hljs-keyword">import</span> React = __React;</span>

<span class="hljs-keyword">var</span> HelloMessage = React.createClass({
  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> &lt;div&gt;Hello {<span class="hljs-keyword">this</span>.props.name}&lt;/div&gt;;
  }
});

React.render(&lt;HelloMessage name=<span class="hljs-string">"John"</span> /&gt;, mountNode);
</code></pre>
<p>Now we should see some errors going away. <strong>And we do...</strong></p>
<pre><code>&gt; tsc helloWorld<span class="hljs-class">.tsx</span>
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">6</span>,<span class="hljs-number">12</span>)</span></span>: error TS17004: Cannot use JSX unless the <span class="hljs-string">'--jsx'</span> flag is provided.
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">10</span>,<span class="hljs-number">14</span>)</span></span>: error TS2607: JSX element class does not support attributes because it does not have <span class="hljs-tag">a</span> <span class="hljs-string">'props'</span> property
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">10</span>,<span class="hljs-number">14</span>)</span></span>: error TS17004: Cannot use JSX unless the <span class="hljs-string">'--jsx'</span> flag is provided.
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">10</span>,<span class="hljs-number">44</span>)</span></span>: error TS2304: Cannot find name <span class="hljs-string">'mountNode'</span>.
</code></pre>
<h1>Fixing <code>error TS17004: Cannot use JSX unless the '--jsx' flag is provided.</code></h1>
<p>The next error is new to me, but it makes some sense, so I add the <code>--jsx</code> flag to <code>tsc</code> and try <code>tsc --jsx helloWorld.tsx</code>, but looks like I missed a parameter to <code>--jsx</code>.</p>
<pre><code>&gt; tsc --jsx helloWorld.tsx
<span class="hljs-keyword">message</span> TS6081: Argument <span class="hljs-keyword">for</span> <span class="hljs-string">'--jsx'</span> must be <span class="hljs-string">'preserve'</span> <span class="hljs-keyword">or</span> <span class="hljs-string">'react'</span>.
</code></pre>
<p>In the current iteration of TypeScript 1.6 appears to have two options for <code>--jsx</code>, both <code>preserve</code> or <code>react</code>.</p>
<ul>
<li><code>preserve</code> will keep the <code>jsx</code> in the output. I presume this is so you can use tools like <code>JSX</code> to actually provide the translation.</li>
<li><code>react</code> will remove the <code>jsx</code> syntax and turn it in to plain javascript so <code>&lt;div&gt;&lt;/div&gt;</code> in the TSX file would become <code>React.createElement(&quot;div&quot;, null)</code>.</li>
</ul>
<p>By passing the <code>react</code> option, here's where we end up:</p>
<pre><code>&gt; tsc --jsx react helloWorld<span class="hljs-class">.tsx</span>
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">11</span>,<span class="hljs-number">14</span>)</span></span>: error TS2607: JSX element class does not support attributes because it does not have <span class="hljs-tag">a</span> <span class="hljs-string">'props'</span> property
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">11</span>,<span class="hljs-number">44</span>)</span></span>: error TS2304: Cannot find name <span class="hljs-string">'mountNode'</span>.
</code></pre>
<p>I'm going to tackle the last error next, as initially I didn't understand the JSX error above.</p>
<h1>Fixing <code>error TS2304: Cannot find name 'mountNode'.</code></h1>
<p>This one I'll just make the compiler happy and presume we defined <code>mountNode</code> as an html element probably a <code>&lt;div id=&quot;mountNode&quot;&gt;&lt;/div&gt;</code> somewhere in the global scope to keep this example short.</p>
<p>I place <code>declare var mountNode: any;</code> near the top of my <code>helloWorld.tsx</code> file and we're left with one last error:</p>
<pre><code>&gt; tsc <span class="hljs-comment">--jsx react helloWorld.tsx</span>
helloWorld.tsx(<span class="hljs-number">10</span>,<span class="hljs-number">14</span>): <span class="hljs-keyword">error</span> TS2607: JSX element <span class="hljs-type">class</span> <span class="hljs-keyword">does</span> <span class="hljs-keyword">not</span> support attributes because <span class="hljs-keyword">it</span> <span class="hljs-keyword">does</span> <span class="hljs-keyword">not</span> have a 'props' <span class="hljs-keyword">property</span>
</code></pre>
<h1>Fixing <code>error TS2607: JSX element class does not support attributes because it does not have a 'props' property</code></h1>
<p>This last error is actually the one that had me stumped, and mostly why I'm writing this lengthy post so I hope you find it and can work through it a little quicker than it took me.</p>
<p>What's happening here is TypeScript is doing what it was intended to do. It's statically checking our JSX in this case.</p>
<p>If you look at our sample above where we call <code>React.createClass(...)</code> and compare that to the type definition we see: <code>function createClass&lt;P, S&gt;(spec: ComponentSpec&lt;P, S&gt;): ClassicComponentClass&lt;P&gt;;</code> you may notice <code>P</code> and <code>S</code> generic parameters to <code>createClass&lt;P, S&gt;</code> which I didn't supply earlier.</p>
<p>The naming here wasn't immediately obvious, but some snooping around in the type definitions and I eventually found out <code>P</code> is referring to the type we pass in defining the structure of the react <code>props</code> and <code>S</code> defines the <code>state</code>.</p>
<p>So in this Hello World example when we placed <code>name=&quot;John&quot;</code> attribute inside the <code>&lt;HelloMessage name=&quot;John&quot; /&gt;</code> element and since we didn't give a <code>P</code> or <code>S</code> to the <code>React.createClass&lt;P,S&gt;(...)</code>, TypeScript was providing static type checking against an unknown type for <code>P &amp; S</code>. In this case saying that we can't apply the attributes to the element because we did not provide a generic type <code>P</code> to define what <code>props</code> are allowed to be included.</p>
<p>To fix this I create a type by using an <code>interface</code> like below:</p>
<pre><code><span class="hljs-tag">interface</span> <span class="hljs-tag">HelloWorldProps</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">name</span>:<span class="hljs-value"> string</span></span>;
}</span>
</code></pre>
<p>When I call <code>React.createClass</code> I pass in the <code>HelloWorldProps</code> interface for the <code>props</code> (<code>P</code>) and an <code>any</code> for the state (<code>S</code>) like so: <code>React.createClass&lt;HelloWorldProps, any&gt;(...)</code></p>
<h1>YAY IT COMPILES!!!</h1>
<p>Compiling the below by using <code>tsc --jsx react helloWorld.tsx</code></p>
<pre><code><span class="hljs-comment">/// &lt;reference path="./typings/react/react.d.ts" /&gt;</span>
<span class="hljs-preprocessor"><span class="hljs-keyword">import</span> React = __React;</span>
declare <span class="hljs-keyword">var</span> mountNode: any;

<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">HelloWorldProps</span> </span>{
  name: string;
}

<span class="hljs-keyword">var</span> HelloMessage = React.createClass&lt;HelloWorldProps, any&gt;({
  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> &lt;div&gt;Hello {<span class="hljs-keyword">this</span>.props.name}&lt;/div&gt;;
  }
});

React.render(&lt;HelloMessage name=<span class="hljs-string">"John"</span> /&gt;, mountNode);
</code></pre>
<p>We get the following output in <code>helloWorld.js</code></p>
<pre><code><span class="hljs-comment">/// &lt;reference path="./typings/react/react.d.ts" /&gt;</span>
<span class="hljs-keyword">var</span> React = __React;
<span class="hljs-keyword">var</span> HelloMessage = React.createClass({
    render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> React.createElement(<span class="hljs-string">"div"</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">"Hello "</span>, <span class="hljs-keyword">this</span>.props.name, React.createElement(<span class="hljs-string">"div"</span>, <span class="hljs-literal">null</span>));
    }
});
React.render(React.createElement(HelloMessage, {<span class="hljs-string">"name"</span>: <span class="hljs-string">"John"</span>}), mountNode);
</code></pre>
<h1>Let's improve it now...</h1>
<p>Since we started with a plain JavaScript version of our sample and we're now using TypeScript we get to take advantage of some of what TypeScript brings to the table.</p>
<p>But before we do this, let's first break our code (from a compiler) perspective to see what the above gave us...</p>
<h1>Let's break our example on purpose to see how TypeScript responds?</h1>
<p>I changed one character in two places in the working <code>helloWorld.tsx</code> file and when I run the compiler I get the following two errors. Can you spot what changed?</p>
<pre><code><span class="hljs-comment">/// &lt;reference path="./typings/react/react.d.ts" /&gt;</span>
<span class="hljs-keyword">import</span> React = __React;
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">var</span> mountNode: <span class="hljs-built_in">any</span>;

<span class="hljs-interface"><span class="hljs-keyword">interface</span> HelloWorldProps </span>{
  Name: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">var</span> HelloMessage = React.createClass&lt;HelloWorldProps, <span class="hljs-built_in">any</span>&gt;({
  render: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> &lt;div&gt;Hello {<span class="hljs-keyword">this</span>.props.mane} &lt;div&gt;&lt;<span class="hljs-regexp">/div&gt;&lt;/</span>div&gt;;
  }
});

React.render(&lt;HelloMessage name=<span class="hljs-string">"John"</span> /&gt;, mountNode);
</code></pre>
<p>Output:</p>
<pre><code>&gt; tsc --jsx react helloWorld<span class="hljs-class">.tsx</span>
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">15</span>,<span class="hljs-number">14</span>)</span></span>: error TS2324: Property <span class="hljs-string">'Name'</span> is missing <span class="hljs-keyword">in</span> type <span class="hljs-string">'HelloWorldProps'</span>.
helloWorld.<span class="hljs-function"><span class="hljs-title">tsx</span><span class="hljs-params">(<span class="hljs-number">15</span>,<span class="hljs-number">28</span>)</span></span>: error TS2339: Property <span class="hljs-string">'name'</span> does not exist on type <span class="hljs-string">'HelloWorldProps'</span>.
</code></pre>
<p>Did you spot the change made? If you did, <strong>amazing</strong>. If you didn't, don't feel bad - it's a very simple and easy error to make when writing plain javascript. One that can't be found without actually executing plain JS, debugging, running unit tests or other checkers before even finding the error.</p>
<p>If you didn't spot the change by looking directly at the code, can you spot the change by reading the compiler error output?</p>
<p>Ok, give up? - I changed the <code>name</code> to <code>Name</code> in the <code>HelloWorldProps</code> interface definition AND in the JSX <code>this.props.mane</code> I spelled the props name <code>mane</code> wrong (should be <code>Name</code> according to our interface definition). So then why did we only get the error on line 15 (that's the <code>React.render(...)</code> line).</p>
<p>TypeScript in this case is using the <code>HelloWorldProps</code> interface and it's definition to type-check the attributes used in the JSX <code>&lt;HelloMessage /&gt;</code>.</p>
<p>This is great, the compiler found the error right in the JSX before we even tried to execute the code.</p>
<h1>Why didn't it detect the <code>mane</code> mis-spelled variable?</h1>
<p>I'm going to just take a guess on this one but I'm not a React guy yet, so it may have something to do with react internals (that I'm not feeling like digging into at the moment).</p>
<p>If you look at the <code>react.d.ts</code> you'll see that <code>React.createClass&lt;P,S&gt;()</code> returns a type of <code>ClassicComponentClass&lt;P&gt;</code>.</p>
<p>Thanks to a tip from Ryan (ya, the famous Ryan from the TypeScript team) has a great <a href="https://github.com/RyanCavanaugh/jsx-intro">write up about TypeScript and JSX</a> we should be avoiding all of the above use of <code>React.createClass(...)</code> and instead using the <code>ES6</code> <code>extends</code> functionality which we can leverage in TypeScript.</p>
<h1>Let's re-write...</h1>
<p>Turning the <code>HelloMessage</code> variable into an ES6 <code>class</code> we now also get type checking inside the component on <code>this.props</code> options. <strong>YAY!!!</strong>:</p>
<pre><code><span class="hljs-comment">/// &lt;reference path="./typings/react/react.d.ts" /&gt;</span>
<span class="hljs-keyword">import</span> <span class="hljs-type">React</span> = __React;
declare <span class="hljs-keyword">var</span> mountNode: any;

interface <span class="hljs-type">HelloWorldProps</span> <span class="hljs-keyword">extends</span> <span class="hljs-type">React</span>.<span class="hljs-type">Props</span>&lt;any&gt; {
  <span class="hljs-type">Name</span>: string;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloMessage</span> <span class="hljs-keyword"><span class="hljs-keyword">extends</span></span> <span class="hljs-title">React</span>.<span class="hljs-title">Component&lt;HelloWorldProps</span>, {</span>}&gt; {
  render() {
    <span class="hljs-keyword">return</span> &lt;div&gt;<span class="hljs-type">Hello</span> {<span class="hljs-keyword">this</span>.props.mane}&lt;/div&gt;;
  }
}

<span class="hljs-type">React</span>.render(&lt;<span class="hljs-type">HelloMessage</span> name=<span class="hljs-string">"John"</span> /&gt;, mountNode);
</code></pre>
<p>The above gives us the following errors:</p>
<pre><code>&gt; tsc <span class="hljs-comment">--jsx react helloWorld.tsx</span>
helloWorld.tsx(<span class="hljs-number">11</span>,<span class="hljs-number">35</span>): error TS2339: <span class="hljs-keyword">Property</span> <span class="hljs-attribute">'mane</span>' does <span class="hljs-keyword">not</span> exist <span class="hljs-keyword">on</span> <span class="hljs-keyword">type</span> <span class="hljs-attribute">'HelloWorldProps</span>'.
helloWorld.tsx(<span class="hljs-number">15</span>,<span class="hljs-number">14</span>): error TS2324: <span class="hljs-keyword">Property</span> <span class="hljs-attribute">'Name</span>' <span class="hljs-keyword">is</span> missing <span class="hljs-keyword">in</span> <span class="hljs-keyword">type</span> <span class="hljs-attribute">'HelloWorldProps</span>'.
helloWorld.tsx(<span class="hljs-number">15</span>,<span class="hljs-number">28</span>): error TS2339: <span class="hljs-keyword">Property</span> <span class="hljs-attribute">'name</span>' does <span class="hljs-keyword">not</span> exist <span class="hljs-keyword">on</span> <span class="hljs-keyword">type</span> <span class="hljs-attribute">'HelloWorldProps</span>'.
</code></pre>
<h1>Final Answer</h1>
<p>So, a bit long winded, but below is the final sample HelloWorld React TypeScript JSX prototype.</p>
<pre><code><span class="hljs-comment">/// &lt;reference path="./typings/react/react.d.ts" /&gt;</span>
<span class="hljs-keyword">import</span> <span class="hljs-type">React</span> = __React;
declare <span class="hljs-keyword">var</span> mountNode: any;

interface <span class="hljs-type">HelloWorldProps</span> <span class="hljs-keyword">extends</span> <span class="hljs-type">React</span>.<span class="hljs-type">Props</span>&lt;any&gt; {
  name: string;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloMessage</span> <span class="hljs-keyword"><span class="hljs-keyword">extends</span></span> <span class="hljs-title">React</span>.<span class="hljs-title">Component&lt;HelloWorldProps</span>, {</span>}&gt; {
  render() {
    <span class="hljs-keyword">return</span> &lt;div&gt;<span class="hljs-type">Hello</span> {<span class="hljs-keyword">this</span>.props.name}&lt;/div&gt;;
  }
}

<span class="hljs-type">React</span>.render(&lt;<span class="hljs-type">HelloMessage</span> name=<span class="hljs-string">"John"</span> /&gt;, mountNode);
</code></pre>
<h1>Wrap-up</h1>
<p>While it seemed a bit challenging getting started with TypeScript and JSX I could really see the benefit of the compiler helping out with React components going forward, and look forward to the future of this part of the project.</p>
<p>Thanks to the TypeScript team and community that helped bring all of this support together!</p>
<p>Happy <code>TSXing</code>!</p>
</div>

            </article>
            <article>
                  <header>
    <h1 class="entry-title"><a href="https://staxmanade.com/2015/04/look-at-where-definitelytyped-is-now/">Look at where DefinitelyTyped is Now</a></h1>
    <p class="meta">
          <time datetime="2015-04-13T04:18:37.055Z" pubdate data-updated="true">Apr 12th 2015</time>


        <a href="/2015/04/look-at-where-definitelytyped-is-now/#disqus_thread" data-disqus-identifier="/2015/04/look-at-where-definitelytyped-is-now/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><h1>A Little Wondering</h1>
<p>I installed Visual Studio 2015 the other night and was just poking around and stumbled upon the <a href="http://cordova.apache.org/">Cordova</a> Project Template that is provided. This not necessarily that new, but is new to me as I spend most of my time these days working on a Mac doing iOS, Docker (for server-side stuff) and other projects. Though, I miss and still enjoy the benefits of Visual Studio for some projects.</p>
<p>While looking over the project template, I was surprised to see a familiar folder structure <code>typings/cordova/*</code> in the project.</p>
<h2>Why is this folder structure familiar?</h2>
<p>Because I created it almost 2 years ago when I <a href="https://staxmanade.com/2013/02/definitelytyped-typescript-definitions/">threw together</a> a <a href="https://github.com/DefinitelyTyped/NugetAutomation">PowerShell script</a> that chucks <a href="https://github.com/borisyankov/DefinitelyTyped">DefinitelyTyped</a> TypeScript definitions up onto <a href="http://www.nuget.org/">NuGet</a>.</p>
<p>Another example of the folder structure, while I can't say for certain, but I can only guess that when the <a href="https://github.com/winjs/winjs">winjs</a> started converting over to TypeScript that they chose to put their type definitions into the same structure. I won't claim to have inspired it, but would be cool to say I did.</p>
<p>It was a bit surprising and humbling to discover Microsoft had in one of their default templates a reference to some TypeScript type definitions that (while I didn't have anything to do with the creation of the definitions, nor <a href="https://github.com/borisyankov/DefinitelyTyped">DefinitelyTyped</a>) I did created the simple little utility that runs continuously up on <a href="http://teamcity.codebetter.com/">TeamCity.CodeBetter.com</a> and tirelessly updates NuGet packages as they change over on DefinitelyTyped.</p>
<p>This reminded me, that I hadn't checked up on the NuGet user account for DefinitelyTyped in quite a while so I decided to head over to the <a href="http://NuGet.org">NuGet.org</a>, take a glance at the account and check out how many downloads there had been?</p>
<p><img src="/images/posts/definitelyTypedNugetAccountApril2015.png" alt="DefinitelyTyped NuGet account"></p>
<p>** HOLY Typings **, there've been over 2 million DT type definitions?</p>
<p>This little ditty was neat to find. I haven't done a ton with TypeScript in a while, but it's quite amazing to see the traction it is starting to gain.</p>
<p>This means that the <a href="http://teamcity.codebetter.com/">TeamCity over at CodeBetter</a> has pretty much been cranking out new and updated DefinitelyTyped TypeScript definitions for almost the last two years, but it's time to re-visit...</p>
<h1>Thanks TeamCity @ CodeBetter</h1>
<p>Before all of the new, cool, and hip online continuous integration systems came to be, one of the only free options for open source was an instance of <a href="https://www.jetbrains.com/teamcity/">JetBrains TeamCity</a> over at <a href="http://codebetter.com/">CodeBetter</a> and I'd like to throw out a big thank you for those at CodeBetter who put the time and effort into hosting this service for many of the .Net OSS projects out there.</p>
<h1>Hello AppVeyor</h1>
<p>I recently ported this job to an <a href="http://www.appveyor.com/">AppVeyor</a> build for the DT project and after a quick round of using their wonderful support to work through a hurdle, I completed a <a href="https://ci.appveyor.com/project/JasonJarrett/nugetautomation">new build</a> at AppVeyor that replicated the one originally hosted on the TeamCity server.</p>
<p>So a HUGE thanks to AppVeyor for creating such great product, and offering free builds to the OSS community.</p>
<p>I'll keep an eye on the new build for a while (before I forget about it) and hopefully it'll run for another long time to come.</p>
<p>Happy TypeScripting!</p>
</div>

            </article>
            <article>
                  <header>
    <h1 class="entry-title"><a href="https://staxmanade.com/2014/05/how-to-compile-plain-star-dot-js-javascript-files-with-the-typescript-compiler/">How to compile plain *.js (JavaScript) files with the TypeScript Compiler</a></h1>
    <p class="meta">
          <time datetime="2014-05-18T17:27:29.000Z" pubdate data-updated="true">May 18th 2014</time>


        <a href="/2014/05/how-to-compile-plain-star-dot-js-javascript-files-with-the-typescript-compiler/#disqus_thread" data-disqus-identifier="/2014/05/how-to-compile-plain-star-dot-js-javascript-files-with-the-typescript-compiler/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><h1>Challenge</h1>
<p>Let's say you've been tasked with researching what porting your existing JavaScript solution to <a href="http://typescriptlang.com">TypeScript</a> may look like or maybe you're curious what this process would be like before you propose it to a lead or project manager.</p>
<p>The first hurdle you may stumble upon is - the <code>tsc</code> (TypeScript compiler) requires all of your files end with a <code>.ts</code> file extension. This can make quickly prototyping a port challenging. To get an idea of what a port to TypeScript will look like you don't want to deal with first renaming all of your files to .ts. Especially since there are probably files you want to not rename to TypeScript (like jQuery or AngularJS etc.</p>
<p>And since:</p>
<blockquote>
<p>TypeScript is a typed superset of JavaScript that compiles to plain JavaScript.</p>
</blockquote>
<p>it seems reasonable that you could acquire the benefits of the TypeScript compiler for even your existing JavaScript codebase.</p>
<h1>Challenge Accepted.</h1>
<p>The TypeScript compiler is open source, so let's take a dive into the compiler to see if this is something we can work around...</p>
<h3>What are the steps we need to accomplish to make the compiler accept plain <code>.js</code> files?</h3>
<ol>
<li>Get It</li>
<li>Copy it</li>
<li>Hack it</li>
<li>Use it</li>
</ol>
<h2>Get it</h2>
<p>Before we can get too far, let's first install the compiler onto our system.</p>
<p>I'll use <a href="http://npmjs.org">npm</a> to install <a href="https://www.npmjs.org/package/typescript">typescript</a></p>
<pre><code>npm install -g typescript
</code></pre>
<p>Note the <code>-g</code> here tells <code>npm</code> to install typescript globally. This adds the TypeScript compiler to your <code>PATH</code> so you can get right at <code>tsc</code>'ing your TypeScript code.</p>
<h2>Copy it</h2>
<p>We probably don't want to modify the globally installed version of <code>tsc</code> so we'll create a copy on our system to play around with. But, before we can do that we need to find where it is.</p>
<p>If on Windows or Mac</p>
<pre><code>where tsc
</code></pre>
<blockquote>
<p>NOTE: if you're using the PowerShell console on windows be sure to type out <code>where.exe tsc</code> because <code>where</code> is aliased to <code>Where-Object</code> in PowerShell which won't help us out in this case.</p>
</blockquote>
<p>Once you've found the path to your version of <code>tsc</code></p>
<p>Mine was in</p>
<ul>
<li><code>C:\Users\jason\AppData\Roaming\npm\tsc</code></li>
<li><code>C:\Users\jason\AppData\Roaming\npm\tsc.cmd</code></li>
</ul>
<p>Look at the contents of the <code>tsc.cmd</code> for Windows and <code>tsc</code> for non Windows machines. You'll notice that they are essentially executing <code>node.exe</code> passing in an argument to another <code>tsc</code> file in the <code>node_modules</code> path.</p>
<p>Take the two <code>tsc</code> and <code>tsc.cmd</code> files, copy them into a working folder <code>MyJSCompiler</code> and rename them. I named mine <code>jsc</code> <a href="https://www.youtube.com/watch?v=iDOhFIX3sWE">and he shall be my squishy</a>. Then take the contents of the <code>node_modules/typescript/*</code> folder (and path structure) and copy them to your working directory.</p>
<p>When you're done you should have a directory that looks something like this</p>
<pre><code>
﻿﻿--MyJSCompiler
  <span class="hljs-string">|   jsc                 &lt;-- notice the re-named file from tsc -&gt; jsc</span>
  <span class="hljs-string">|   jsc.cmd             &lt;-- notice the re-named file from tsc.cmd -&gt; jsc.cmd</span>
  <span class="hljs-string">|   </span>
  ----node_modules
      ----.bin
      <span class="hljs-string">|       tsc</span>
      <span class="hljs-string">|       tsc.cmd</span>
      <span class="hljs-string">|       </span>
      ----typescript
          <span class="hljs-string">|   .npmignore</span>
          <span class="hljs-string">|   CopyrightNotice.txt</span>
          <span class="hljs-string">|   LICENSE.txt</span>
          <span class="hljs-string">|   package.json</span>
          <span class="hljs-string">|   README.txt</span>
          <span class="hljs-string">|   ThirdPartyNoticeText.txt</span>
          <span class="hljs-string">|   </span>
          ----bin
              <span class="hljs-string">|   lib.d.ts</span>
              <span class="hljs-string">|   tsc</span>
              <span class="hljs-string">|   tsc.js</span>
              <span class="hljs-string">|   typescript.js</span>
              <span class="hljs-string">|   </span>
              ----resources
                  <span class="hljs-string">|   diagnosticMessages.generated.json</span>
                  <span class="hljs-string">|   </span>
                  ----(*.json files excluded for brevity)

</code></pre>
<p>Now you should be able to call your local version of <code>jsc</code> at the command line.</p>
<h2>Hack it</h2>
<p>Since we have a local version we can hack on now, let's find out what needs to change. Thanks to <a href="http://stackoverflow.com/users/1704166/ryan-cavanaugh">Ryan</a> for already giving us a clue <a href="http://stackoverflow.com/questions/17533301/can-i-compile-a-js-file-with-the-typescript-compiler-without-renaming-it-to-a/17533590#17533590">here</a>.</p>
<p>Open up the <code>node_modules/typescript/bin/tsc.js</code> file (in our working directory from the previous step) and apply the below diff/changes.</p>
<pre><code class="language-diff">     function isTSFile(fname) {
<span class="hljs-deletion">-        return isFileOfExtension(fname, ".ts");</span>
<span class="hljs-addition">+        return isFileOfExtension(fname, ".ts") || isFileOfExtension(fname, ".js");</span>
     }
</code></pre>
<p>We've now implemented a small tweak to the TypeScript compiler that allows us to compile plain JavaScript files.</p>
<h2>Use it</h2>
<p>I won't be going into how to use the <code>tsc</code> compiler in this post, but you can now call the compiler passing along your <code>*.js</code> files and begin learning what changes you will need to make to your existing codebase to satisfy the compiler.</p>
<p>Be sure to use the <code>--out FILE</code> or <code>--outDir DIRECTORY</code> options because if you don't the compiler will take the input javascript file and overwrite it with it's compiled version.</p>
<h1>!!WARNING!! I'll say that again, to use it, be sure to use the <code>--out FILE</code> or <code>--outDir DIRECTORY</code> options because if you don't the compiler will take the input javascript file and overwrite the original with it's compiled version.</h1>
<p>With source control, this can potentially be a fun experiment to see what TypeScript's version looks compared to your own, but I'll leave that up to you to play with.</p>
<p>Best of luck on your port to TypeScript.</p>
</div>

            </article>
            <article>
                  <header>
    <h1 class="entry-title"><a href="https://staxmanade.com/2013/10/introducing-totypescriptd-automatic/">Introducing ToTypeScriptD - Automatic TypeScript Definition files for C++/CX or .Net assemblies</a></h1>
    <p class="meta">
          <time datetime="2013-11-01T05:06:00.000Z" pubdate data-updated="true">Oct 31st 2013</time>


        
    </p>
</header>
<div class="entry-content">
<div class='post'>
<p>If you’re unfamiliar with <a href="http://typescriptlang.org" target="_blank">TypeScript</a>, I’d highly recommend checking it out. <strong>It’s my new preferred way to write JavaScript based applications.</strong></p>  <p>If you write an application in TypeScript and need to interact with an external set of either JavaScript or <a href="http://en.wikipedia.org/wiki/C%2B%2B/CX" target="_blank">C++/CX</a> dependencies then you will quickly find that you are going to be mucking with some TypeScript Definition files and the more you take a dependency on the WinRT runtime the more type definitions you probably need to manually create.</p>  <p>It’s true that the TypeScript team has created a set of TypeScript Definition files for WinRT and WinJS, but I <a href="https://typescript.codeplex.com/discussions/462409" target="_blank">couldn’t get any comment</a> as to how they were generated. And the more I looked into what was provided, the more I realized that there were inconsistencies and inaccuracies that were not good. Which led me to believe that they weren’t working on a super-secret tool to automatically generate these for us.</p>  <h3>What is <a href="https://github.com/ToTypeScriptD/ToTypeScriptD" target="_blank">ToTypeScriptD</a> ?</h3>  <p><a href="https://github.com/ToTypeScriptD/ToTypeScriptD" target="_blank">ToTypeScriptD</a> is a quick little attempt at automatically taking the type system provided to us by a C++/CX winmd or .Net assembly file and projecting that into a set of TypeScript Definition files. This tool can basically take anything that is <a href="http://www.ecma-international.org/publications/standards/Ecma-335.htm">Ecma 355</a> Common Language Infrastructure (CLI) and spit out a .d.ts file for you automatically.</p>  <h3>Why would I need this?</h3>  <p>In the <a href="https://github.com/ToTypeScriptD/ToTypeScriptD#can-you-tell-me-why-i-would-use-this" target="_blank">project readme</a> I describe two use-cases that I know of (so far).</p>  <ol>   <li>If you build a 'Modern' (come on, we still call it Metro) Windows 8 app with <code>WinJS</code> and want to leverage <code>TypeScript</code>, wouldn't it be nice to get a set of TypeScript Definition files that reflect the native API's you're calling in the platform without manually creating the definition files?       <br></li>    <li>Say your building an MVC/WebAPI server application. It would be useful if your C.I./Build system could generate a set of TypeScript interfaces that were based on the server objects used to render your JSON API. This can be useful for client side JavaScript/TypeScript libraries that need to consume these objects and also provide a simple way to document the format of the input and output API response objects. </li> </ol>  <h3>How do I get the project and start using it?</h3>  <blockquote>   <p>Before you install the tool and dive in head first, I would like warn you that I have only been working on this for about 2 weeks (in my off-hours) and there is going to be lots of room for improvement. But it’s currently generating a solid set of .d.ts files for .winmd files.</p> </blockquote>  <p>Head over to the <a href="https://github.com/ToTypeScriptD/ToTypeScriptD" target="_blank">project home page</a> and check out the <a href="https://github.com/ToTypeScriptD/ToTypeScriptD" target="_blank">Readme</a> for some quick-start information.</p>  <p>I’d would love to hear feedback. If anyone is interested in helping out, you can submit new issues or review the open issues list and start submitting pull requests.</p>  <p>Happy TypeScripting!</p>  </div>
</div>

            </article>
            <article>
                  <header>
    <h1 class="entry-title"><a href="https://staxmanade.com/2013/08/typescript-presentation-at-northern/">TypeScript Presentation at the Northern Nevada Software Developers Group (NNSDG)</a></h1>
    <p class="meta">
          <time datetime="2013-08-31T17:33:00.000Z" pubdate data-updated="true">Aug 31st 2013</time>


        
    </p>
</header>
<div class="entry-content">
<div class='post'>
<p>This past week I gave a talk on <a href="http://typescriptlang.org" target="_blank">TypeScript</a> which was fun and well received.</p>  <p>If you have any interest in the slides they are hosted up on GitHub</p>  <ul>   <li><a href="https://staxmanade.github.io/TypeScriptPresentation/#/1">https://staxmanade.github.io/TypeScriptPresentation/#/1</a> </li> </ul>  <p>Or if you just want to look at the talk in <a href="http://daringfireball.net/projects/markdown/" target="_blank">MarkDown</a></p>  <ul>   <li><a href="https://github.com/staxmanade/TypeScriptPresentation/blob/master/TypeScriptPresentation.md">https://github.com/staxmanade/TypeScriptPresentation/blob/master/TypeScriptPresentation.md</a> </li> </ul>  <p><font style="background-color: #ffffff">The markdown page is useful for a quick lookup on syntax if you forgot how something should look. I’d like to continue to evolve the presentation, so if you have any feedback or suggestions, please feel free to open a pull request and start a conversation.</font></p>  <p>Thanks to those who attended!</p>  </div>
</div>

            </article>
            <div class="pagination">
                <a href="/blog/archives">Blog Archives</a>
            </div>
        </div>



    </div>
</div>
<footer role="contentinfo"><p>
  This work is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License
  </a>.

</p>
<p>
  Copyright &copy; 2008-2018 - <a href="/about">Jason Jarrett</a> - <span class="credit">Powered by <a href="http://togglejs.github.io">Toggle</a></span>
</p>


<style>
  .jj-signup-form {
    text-align: right;
    position: fixed;
    bottom: 0;
    right: 0;
    width: 300px;
    display: none;
  }
</style>

<style>
    .jj-signup-form {
        border-width: thin;
        border-color: black;
        border-style: solid;
        background-color: white;
    }
</style>
<div class="jj-signup-form">
    <button class="jj-signup-form-close">Close</button>
    <div>
        <!-- Begin MailChimp Signup Form -->
        <link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
        <style type="text/css">
            #mc_embed_signup {
                background: #fff;
                clear: left;
                font: 14px Helvetica, Arial, sans-serif;
            }
            /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
        </style>
        <div id="mc_embed_signup">
            <form action="//staxmanade.us8.list-manage.com/subscribe/post?u=9a6f3f89fc58e1bbbddf5c3f8&amp;id=9e5406be65" method="post"
                id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                <div id="mc_embed_signup_scroll">
                    <h2>Don't miss a post...</h2>
                    <div class="mc-field-group">
                        <label for="mce-FNAME">First Name </label>
                        <input type="text" value="" name="FNAME" class="" id="mce-FNAME">
                    </div>
                    <div class="mc-field-group">
                        <label for="mce-EMAIL">Email Address  <span class="asterisk">*</span>
</label>
                        <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
                    </div>
                    <div id="mce-responses" class="clear">
                        <div class="response" id="mce-error-response" style="display:none"></div>
                        <div class="response" id="mce-success-response" style="display:none"></div>
                    </div>
                    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_9a6f3f89fc58e1bbbddf5c3f8_9e5406be65" tabindex="-1" value=""></div>
                    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
                </div>
            </form>
        </div>
        <script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script>
        <script type='text/javascript'>
            (function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[1]='FNAME';ftypes[1]='text';fnames[0]='EMAIL';ftypes[0]='email';}(jQuery));var $mcj = jQuery.noConflict(true);
        </script>
        <!--End mc_embed_signup-->
    </div>
</div>

<script src="//cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.1/js.cookie.min.js"></script>
<script>
  (function(){
    try {
      if (Cookies.get('IKnowItIsACrappyPopupButMeh') !== "clicked") {
        document.querySelector('.jj-signup-form-close').addEventListener('click', function(){
            document.querySelector('.jj-signup-form').style.display = "none";
            Cookies.set("IKnowItIsACrappyPopupButMeh", "clicked", { expires: 180 });
        });

        setTimeout(function(){
          if(window.jjdisableSignupPopup) {
            return;
          }
          document.querySelector('.jj-signup-form').style.display = "initial";
        }, 1000);
      }

    } catch(e) {
        console.log(e);
    }
  })();

</script>
</footer>
  



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



</body>
</html>
