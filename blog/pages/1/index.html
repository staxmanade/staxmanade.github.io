<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Developing on Staxmanade - Developing on Staxmanade</title>
  <meta name="author" content="Jason Jarrett">


   <meta name="description" content="Jason Jarrett&#x27;s Blog and Website.">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <link rel="canonical" href="http://staxmanade.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/DevelopingOnStaxmande" rel="alternate" title="Developing on Staxmanade" type="application/atom+xml">
    <script src="/js/modernizr-2.0.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./js/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/octopress.js" type="text/javascript"></script>
    <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1017448-6']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</head>

<body   >
<header role="banner"><hgroup>
  <h1><a href="/">Developing on Staxmanade</a></h1>

   <a href="/subscribe" style="
      font: bold 16px Arial;
      text-decoration: none;
      background-color: #ED1C24;
      color: white;
      padding: 6px 10px;
      border-top: 1px solid #CCCCCC;
      border-right: 1px solid #333333;
      border-bottom: 1px solid #333333;
      border-left: 1px solid #CCCCCC;
      position: absolute;
      right: 20px;
        ">Subscribe</a>
</hgroup>

</header>
<nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/DevelopingOnStaxmande" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
</ul>
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:staxmanade.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
<div id="main">
    <div id="content">
        
<div class="blog-index">
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2016/05/configuring-git-to-use-different-name-and-email-depending-on-folder-context/">Configuring Git to Use Different Name and Email Depending on Folder Context</a></h1>
    <p class="meta">
          <time datetime="2016-05-25T22:16:39.455Z" pubdate data-updated="true">May 25th 2016</time>


        <a href="/2016/05/configuring-git-to-use-different-name-and-email-depending-on-folder-context/#disqus_thread" data-disqus-identifier="/2016/05/configuring-git-to-use-different-name-and-email-depending-on-folder-context/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>Thought I'd share how I'm configuring <code>user.name</code> and <code>user.email</code> for git on my work computer. This is really just a post so when I forget how I did in the future I can google my own blog and be reminded...</p>
<p>I have always struggled with accidentally committing to an OSS project my work name/email or visa-versa, committing to a work git repo with my personal name/email.</p>
<p>For most, <code>user.name</code> shouldn't change, unless you're company ties your <code>user.name</code> to something specific to the company like a username. (Contrast: <code>user.name = Jason Jarrett</code> and <code>user.name = jjarrett</code>).</p>
<p>When I clone projects I always clone them into a folder structure that looks like</p>
<pre><code>|____~/code
| |____personal/  &lt;--- <span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> where I would put some OSS projects <span class="hljs-literal">that</span> I may be working <span class="hljs-literal">on</span> <span class="hljs-keyword">or</span> contributing <span class="hljs-keyword">to</span>.
| |____work/      &lt;--- obviously work code goes <span class="hljs-keyword">in</span> here
</code></pre>
<p>Thanks to <a href="http://collectiveidea.com/blog/archives/2016/04/04/multiple-personalities-in-git/">this post</a> where I learned about <a href="http://direnv.net/">direnv</a> and followed the last option I basically used these steps...</p>
<h1>Setup</h1>
<ol>
<li>
<p>Install <code>direnv</code> - <code>brew install direnv</code> (What about Windows? see <a href="https://github.com/direnv/direnv/issues/124">this github issue</a> and help make it work)</p>
</li>
<li>
<p>Create <code>.envrc</code> file <strong>for each profile</strong> needing to be setup with the following content</p>
<pre><code>export GIT_AUTHOR_EMAIL=<span class="hljs-tag">&lt;<span class="hljs-title">your</span> <span class="hljs-attribute">email</span>&gt;</span>
export GIT_AUTHOR_NAME=<span class="hljs-tag">&lt;<span class="hljs-title">your</span> <span class="hljs-attribute">name</span>&gt;</span>
export GIT_COMMITTER_EMAIL=<span class="hljs-tag">&lt;<span class="hljs-title">your</span> <span class="hljs-attribute">email</span>&gt;</span>
export GIT_COMMITTER_NAME=<span class="hljs-tag">&lt;<span class="hljs-title">your</span> <span class="hljs-attribute">name</span>&gt;</span>
</code></pre>
</li>
<li>
<p>After installing and setting the <code>.envrc</code> files <a href="http://direnv.net/"><code>direnv</code></a> will prompt to use the env file which we accept by running <code>direnv allow</code>.</p>
</li>
</ol>
<p>Now I should have the following structure</p>
<pre><code>|<span class="hljs-string">____~/code
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">____personal/
</span>|<span class="hljs-string">    </span>|<span class="hljs-string">____.envrc   &lt;-- env settings with personal git user/email
</span>|<span class="hljs-string"> </span>|<span class="hljs-string">____work/
</span>|<span class="hljs-string">    </span>|<span class="hljs-string">____.envrc   &lt;-- env settings with work git user/email

</span></code></pre>
<h1>What did this do?</h1>
<p>Each time we <code>cd</code> into either a <code>personal/</code> or <code>work/</code> folder <code>direnv</code> will setup our shell with environment variables contained in that folder's <code>.envrc</code> file. This will then allow Git which respects these env vars and now we don't have to think about committing the wrong name/email to the wrong Git repositories.</p>
<p>Happy Gitting!</p>
</div>

      <a href="/2016/05/configuring-git-to-use-different-name-and-email-depending-on-folder-context/#disqus_thread" data-disqus-identifier="/2016/05/configuring-git-to-use-different-name-and-email-depending-on-folder-context/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2016/05/how-not-to-start-asynchronous-communication/">How NOT to Start Asynchronous Communication</a></h1>
    <p class="meta">
          <time datetime="2016-05-20T21:50:33.499Z" pubdate data-updated="true">May 20th 2016</time>


        <a href="/2016/05/how-not-to-start-asynchronous-communication/#disqus_thread" data-disqus-identifier="/2016/05/how-not-to-start-asynchronous-communication/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><div style="height: 100px">&nbsp;</div>
<h2>Hey!</h2>
<div style="height: 2000px">&nbsp;</div>
<h1>Don't you hate it when...</h1>
<p>...someone is using a beautifully designed asynchronous tool to communicate with you but instead they try to pretend it is synchronous?</p>
<p>Please!!! If you ever have to communicate with someone through an asynchronous-able tool like a text message, instant messaging, or email don't just say <code>Hey!</code> and wait for a response.</p>
<p>Try saying <code>Hey! I wonder if you could...</code> or some alternative where the single message can contain both a polite introduction <code>Hey</code> along with some actionable context about why the polite introduction has taken place. If you can't begin to privde the initial context and are waiting for the other person to respond with <code>Hey</code>, you've both wasted their time and yours.</p>
<p>Often times a single chat message can distract someone who is concentrating hard on a subject. If a hollow <code>Hey!</code> is provided, you've likely pulled whoever you wanted to talk to out of that concetration as well as not provide them enough context to be abel to respond or help you. Instead they're possibly sitting there waiting for you to say something next, or maybe you're waiting for them to say Hey back (which you may never get)...</p>
<p>Asynchronous communication can be an amazing productivity tool if used efficiently.</p>
<p>Happy Chatting!</p>
</div>

      <a href="/2016/05/how-not-to-start-asynchronous-communication/#disqus_thread" data-disqus-identifier="/2016/05/how-not-to-start-asynchronous-communication/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2016/04/easily-convert-css-to-react-inline-styles/">Easily Convert CSS to React Inline Styles</a></h1>
    <p class="meta">
          <time datetime="2016-04-21T04:52:14.458Z" pubdate data-updated="true">Apr 20th 2016</time>


        <a href="/2016/04/easily-convert-css-to-react-inline-styles/#disqus_thread" data-disqus-identifier="/2016/04/easily-convert-css-to-react-inline-styles/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p><a target="blank" href="http://staxmanade.com/CssToReact/">
<img align="right" src="http://staxmanade.com/CssToReact/images/CssToReact-logo.svg">
</a></p>
<h3>TL;DR</h3>
<p>Click the logo to jump the tool...</p>
<h2>The More Info Stuff</h2>
<p>So you're working on a React app. It's up and running in you're favorite browser but you notice an issue with some layout. You think, ok, this should be easy to fix. You open up the developer tools, hack on some CSS within the browser till you get it looking just the way you want it to. Maybe it's several CSS properties you added or tweaked so you copy each of them into the clipboard so you can transfer them back to your application.</p>
<p>Then you realize, these styles aren't coming from a CSS style sheet, they're in-line styles right in you're React component.</p>
<p>Now you're like, FINE, I'll manually translate this to React-style-inline-CSS. This is no biggie if you do it once in a while. Except that time when you missed removing a dash or mis-cased a letter or maybe you forgot a JSON comma, or left a CSS semicolon. Never happened to you? Oh, you are so amazing if only I was as super cool as you. For myself and probably another 1 or 2 of you out there these problems do come up, but don't have to.</p>
<p>I hacked together a <a href="http://staxmanade.com/CssToReact/">little tool</a> that automates this translation. Allows you to paste you're <code>CSS</code> into a <code>textarea</code>, it translates to React inline style JSON CSS and you can copy it out while avoiding translation bugs.</p>
<p>You can see the project here: <a href="http://staxmanade.com/CssToReact/">CssToReact</a>
If you have a suggestion or want to pull-request it your self you can check it out here: <a href="https://github.com/staxmanade/CssToReact">Source to Project</a></p>
<blockquote>
<p>Aside: This should really be a plugin to my text editor where we can right click and say &quot;Paste as React Style&quot; instead, but for now it's a single simple little web page that will automate the translation for you. (I haven't looked for the plugin - if it exists or ever is created let me know in the comments...)</p>
</blockquote>
<p>Happy CSS Conversions!</p>
</div>

      <a href="/2016/04/easily-convert-css-to-react-inline-styles/#disqus_thread" data-disqus-identifier="/2016/04/easily-convert-css-to-react-inline-styles/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2016/04/slightly-modified--cd--command-for-powershell--now-with-dot-dot-dot-dot---/">Slightly modified “CD” Command for Powershell: Now with dot.dot.dot.dot...</a></h1>
    <p class="meta">
          <time datetime="2016-04-10T16:40:42.307Z" pubdate data-updated="true">Apr 10th 2016</time>


        <a href="/2016/04/slightly-modified--cd--command-for-powershell--now-with-dot-dot-dot-dot---/#disqus_thread" data-disqus-identifier="/2016/04/slightly-modified--cd--command-for-powershell--now-with-dot-dot-dot-dot---/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>A while back I wrote about a replacement for the <code>cd</code> command on powershell that I wrote which provides some fun features such as history tracking, support cd'ing to a folder when a file path is given, etc... It's been a while since I've touched this helpful little tool which sometimes I even forget I wrote it because it's something that's used practically every day and &quot;it just works&quot;.</p>
<p>For more information, check out the older posts about it here <a href="http://staxmanade.com/2011/07/slightly-modified-cd-command-for/">Slightly modified “CD” Command for Powershell</a> and here: <a href="http://staxmanade.com/2012/11/more-than-slightly-modified-cd-command/">More than slightly modified “CD” command for PowerShell</a>.</p>
<h1>It now supports <code>cd ...</code></h1>
<p>Well, today I threw a quick feature into this utility that I've become accustomed to using in zsh on my Mac.</p>
<p>On many *nix command prompts you can type something like <code>cd ....</code>. This command translates indo <code>cd ..; cd ..; cd ..</code> (but executed as one command). The first <code>..</code> counts as one directory and then each ane every <code>.</code> after that counts as another directory up the tree.</p>
<p>So now within PowerShell when I <code>cd</code> down into a deep folder structure, I can now use <code>cd .......</code> to go back up <code>N</code> folders.</p>
<p>NOICE!</p>
<p>Happy CD'ing!</p>
</div>

      <a href="/2016/04/slightly-modified--cd--command-for-powershell--now-with-dot-dot-dot-dot---/#disqus_thread" data-disqus-identifier="/2016/04/slightly-modified--cd--command-for-powershell--now-with-dot-dot-dot-dot---/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2016/03/oops---how-a-simple-bit-of-automation-put-nuget-on-edge---/">Oops - how a simple bit of automation put NuGet services on edge...</a></h1>
    <p class="meta">
          <time datetime="2016-03-30T20:06:46.955Z" pubdate data-updated="true">Mar 30th 2016</time>


        <a href="/2016/03/oops---how-a-simple-bit-of-automation-put-nuget-on-edge---/#disqus_thread" data-disqus-identifier="/2016/03/oops---how-a-simple-bit-of-automation-put-nuget-on-edge---/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>This past week I received an email from Microsoft's NuGet team asking if I could look into a bit of an issue with <a href="http://definitelytyped.org/">DefinitelyTyped's</a> NuGet package publishing.</p>
<h2>Some Background</h2>
<p>A really long time ago, I wanted to access DefinitelyTyped packages within Visual Studio via the NuGet package manager. So I quickly wrote up a <a href="https://github.com/DefinitelyTyped/NugetAutomation">powershell script</a> to accomplish this. This script has run almost continuously ever since, and primarily without issue.</p>
<blockquote>
<p>There's been a couple tweaks/issues along the way - as to be expected, but it's been primarily hands-off.</p>
</blockquote>
<p>As of today, <a href="https://www.nuget.org/profiles/DefinitelyTyped">these NuGet packages</a> have been downloaded over <code>5,268,852</code> times - wow.</p>
<h1>What does the automation do?</h1>
<p>All of the NuGet packages generated for DefinitelyTyped are run through a build process on the good servers at <a href="https://www.appveyor.com/">AppVeyor</a> (Thanks AppVeyor).</p>
<p>Every 2 hours the task does some git-fu to figure out what DT packages have updated (since the last run) and publishes updated NuGet packages for each updated DT package.</p>
<h1>The initial problem report:</h1>
<p>First let me say that thanks to Yishai and Maarten from Microsoft who brought the issue to my attention and were extremely polite and patient with the raised issue. So thank you, thank you, thank you for the support and being so friendly while working through this...</p>
<p><img src="/images/posts/nuget-automation-oops-initial-email.png" alt="service status image of problem with nuget"></p>
<h1>Looking at <a href="http://status.nuget.org">status.nuget.org</a></h1>
<p>It was pretty easy to see that every 2 hours a large spike in uploads to NuGet was happening.</p>
<p><img src="/images/posts/nuget-automation-oops-before.png" alt="service status image of problem with nuget"></p>
<p><img src="/images/posts/nuget-automation-oops-status-text.png" alt="service status image of problem with nuget"></p>
<blockquote>
<p>While I can't say for certain this incident report on the status page was due to the NuGet automation, it was around the same time the automation was pushing extra builds (and right before I was contacted by Microsoft).</p>
</blockquote>
<h1>Was that my automation oops?</h1>
<p>I didn't recall getting an error email from AppVeyor so I was initially suspicious. But logging in and looking at build history: hmmm. Looking back at my email, looks like I did receive the first failed build email - but must have been busy day as I didn't happen to notice that one email (when I usually do from other projects).</p>
<p><img src="/images/posts/nuget-automation-oops-appveyor-status.png" alt="service status image of problem with nuget"></p>
<p>YIKES!... so I quickly responded to Microsoft saying I'd shut down the automated portion and dig into it.</p>
<h1>The Problem &amp; Resolution</h1>
<p>Turns out the problem was due to a <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/pull/8605">large pull request</a> that updated about every package in the DT repo. This meant it had to publish every single package, but for some reason (not showing in the logs) the AppVeyor job was failing at the end and not saving the fact that the packages were being updated on NuGet...</p>
<p>I have a way to run the NuGet publish manually on a local machine so I pulled down the project and ran the complete build. This took quite a while (almost 3 hours) and eventually I discovered the problem.</p>
<p>At the end of the script is a <code>git commit -m {msg}</code> command. This is an important step as it records what has been updated/published. The problem was due to the large number of packages published, the <code>{msg}</code> was so big that it was throwing an error saying the command line command was too long to execute. Causing the system to not complete the cycle and end up re-publishing all nuget packages every 2 hours.</p>
<p>I was able to manually commit with <a href="https://github.com/DefinitelyTyped/NugetAutomation/commit/6d2a95975849749b496e48d12e199b9561dc2cfd">a shorter message</a> and it brought the system back to normal.</p>
<p>And below is NuGet status after the fix.</p>
<p><img src="/images/posts/nuget-automation-oops-after.png" alt="service status image of problem with nuget"></p>
<h1>Thanks NuGet!</h1>
<p>Turns out the NuGet team put some time into optimizing the publishing process of their service - so maybe there was a benefit to this whole fiasco, but hopefully we won't be hammering the system going forward :)</p>
<p>So I'd like to say thanks again to the NuGet team for you're kind support email and professional way of handling the issue. This is a great example of how Microsoft is helping the OSS community and their support is really taking off and showing promise!</p>
<h3>Also Good Point</h3>
<p><img src="/images/posts/nuget-automation-oops-gates-quote.png" alt="service status image of problem with nuget"></p>
<p>Happy NuGetting!</p>
</div>

      <a href="/2016/03/oops---how-a-simple-bit-of-automation-put-nuget-on-edge---/#disqus_thread" data-disqus-identifier="/2016/03/oops---how-a-simple-bit-of-automation-put-nuget-on-edge---/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2016/01/developer-friendly-react-component-errors/">Developer Friendly React Component Errors</a></h1>
    <p class="meta">
          <time datetime="2016-01-31T07:20:41.092Z" pubdate data-updated="true">Jan 30th 2016</time>


        <a href="/2016/01/developer-friendly-react-component-errors/#disqus_thread" data-disqus-identifier="/2016/01/developer-friendly-react-component-errors/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>One of the biggest pain points I've run into while building an application with Facebook's <a href="https://facebook.github.io/react/">React</a> is when you goof something up and you get an error in one of the React component lifecycle methods such as <code>render</code>, <code>componentWillMount</code>, <code>componentDidUpdate</code>, etc. The biggest problem is the lack of a <a href="http://staxmanade.com/2016/01/habit-of-a-solid-developer-rapid-feedback/">feedback loop</a> because React is swallowing exceptions, so you don't see the reported error in your developer console or any global error handlers called. There's even a chance you don't know something is going wrong (yet).</p>
<p>If I google for <code>react try catch</code> the first search result hit landed me on this <a href="https://github.com/facebook/react/issues/2461">GitHub issue on error boundaries</a> (status: <code>open</code> as of this writing). There is a pull-request with what looks to be a potential work around, but until this lands and it provides enough of a solution I hope the below can help you.</p>
<p>If you read the comments of this post you'll see <a href="https://github.com/facebook/react/issues/2461#issuecomment-114155631">this helpful comment</a> where Skiano links to a <a href="https://github.com/skiano/react-safe-render/blob/feature/safe-methods/index.js">github repo</a> with a pretty good wrapper that re-writes React components so the lifecycle methods get a useful <code>try/catch</code> and can properly log errors.</p>
<p>I liked the approach provided above but since I'm working on a project that is using <a href="https://babeljs.io">BabelJS</a> and <code>ES6/7</code>, I wanted to see if I could try using the new <a href="https://github.com/wycats/javascript-decorators">ES7 Decorators</a> which Babel supports to allow tagging certain ES6 React classes with this try/catch wrapper.</p>
<p>Below is what it looks like if you end up using it.</p>
<h1>Usage with an es7 @decorator</h1>
<pre><code><span class="hljs-literal">import</span> React from <span class="hljs-string">'react'</span>;
<span class="hljs-literal">import</span> wrapReactLifecycleMethodsWithTryCatch from <span class="hljs-string">'react-component-errors'</span>

<span class="hljs-annotation">@wrapReactLifecycleMethodsWithTryCatch</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyComponent</span> : <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  componentDidMount(){
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error(<span class="hljs-string">"Test error"</span>);
  }
  render(){
    <span class="hljs-keyword">return</span> &lt;div&gt;Hello&lt;/div&gt;;
  }
}
</code></pre>
<p>But you can also use this without the decorator pattern just by passing the class through the wrapper function.</p>
<h1>Usage without a decorator</h1>
<pre><code><span class="hljs-keyword">import</span> wrapReactComponentMethodsWithTryCatch from `react-log-errors.js`

<span class="hljs-keyword">var</span> MyComponent = React.createClass({
  componentDidMount: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error(<span class="hljs-string">"Test error"</span>);
  },
  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> &lt;div&gt;Hello&lt;/div&gt;;
  }
});

wrapReactComponentMethodsWithTryCatch(MyComponent);
</code></pre>
<h1>How to get it?</h1>
<ul>
<li>NPM: <a href="https://www.npmjs.com/package/react-component-errors">react-component-errors</a></li>
<li>GitHub: <a href="https://github.com/staxmanade/react-component-errors">staxmanade/react-component-errors</a></li>
</ul>
<h1>NOT tested for performance...</h1>
<p>FYI: this is primarily built as a development tool and has not been performance tested. While I haven't noticed any performance issues - I wouldn't recommend sending to production as is without a deeper impact analysis.</p>
<p>Happy React Debugging!</p>
</div>

      <a href="/2016/01/developer-friendly-react-component-errors/#disqus_thread" data-disqus-identifier="/2016/01/developer-friendly-react-component-errors/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2016/01/habit-of-a-solid-developer-rapid-feedback/">Habit of a Solid Developer - Part 9 - Rapid Feedback</a></h1>
    <p class="meta">
          <time datetime="2016-01-31T06:20:41.092Z" pubdate data-updated="true">Jan 30th 2016</time>


        <a href="/2016/01/habit-of-a-solid-developer-rapid-feedback/#disqus_thread" data-disqus-identifier="/2016/01/habit-of-a-solid-developer-rapid-feedback/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>﻿
<div class="seriesNote">
    <p>This article is <strong>Part 9</strong> of <strong>11</strong> in a series about <strong>Habit of a Solid Developer</strong>.</p>
    <ul>
        <li>
            Part 1 - <a href="/2015/08/habit-of-a-solid-developer-introduction/">Introduction</a>
        </li>
        <li>
            Part 2 - <a href="/2015/09/habit-of-a-solid-developer-automatically-enforce-project-conventions/">Automatically Enforce Project Conventions</a>
        </li>
        <li>
            Part 3 - <a href="/2015/09/habit-of-a-solid-developer-self-prescribed-code-reviews/">Self Prescribed Code Reviews</a>
        </li>
        <li>
            Part 4 - <a href="/2015/09/habit-of-a-solid-developer-git-dance/">Git Dance</a>
        </li>
        <li>
            Part 5 - <a href="/2015/10/habit-of-a-solid-developer-update-or-add-documentation-while-reading-code/">Update or Add Documentation while Reading Code</a>
        </li>
        <li>
            Part 6 - <a href="/2015/10/habit-of-a-solid-developer-dig-a-little-deeper/">Dig a Little Deeper</a>
        </li>
        <li>
            Part 7 - <a href="/2015/11/habit-of-a-solid-developer-changes-should-be-taken-with-baby-steps/">Changes Should be Taken with Baby Steps</a>
        </li>
        <li>
            Part 8 - <a href="/2015/11/habit-of-a-solid-developer-podcasts/">Podcasts</a>
        </li>
        <li>
            Part 9 - (current) - Rapid Feedback
        </li>
    </ul>
</div></p>
<p>Find your feedback loop and then try to find ways to increase it's it's ability to report feedback sooner.</p>
<p>Feedback can come in many ways, and no matter what that feedback loop is, finding ways to increase it's ability to get you feedback sooner is generally going to help you in the long run.</p>
<p>If you think of a typical software development lifecycle, you can find ways to improve feedback loops in nearly all levels of the process. In a aesign phase, reviewing designs with the client/steakholder is one way to get feedback. During development you can get feedback from your unit tests or compiler or even your editors, when you manually review changes made in the application, or especially code reviews with other developers. QA's main purpose is to create a solid feedback loop about quality and while it's generally a slower feedback loop than other forms feedback it is extremly important and should generally not be overlooked or ignored. Once the app is in the wild, customers give feedback and you're applications can report various types of feedback such as crashes or customer sign-up numbers.</p>
<p>You've likely heard of the idea of <a href="https://en.wikipedia.org/wiki/Fail-fast">Failing Fast</a> (if not, you should). In the end, failing fast is a great a type of feedback.</p>
<p>Try pair programming, having a partner watch for and point out silly mistakes, or propose alternative approaches. The instant feedback is hugely beneficial. Leverage the feedback of other tools such as a compiler, unit tests, or manual testing.</p>
<p>When working with a new code library or dependency, don't make assumptions about how something works, even though the <a href="https://en.wikipedia.org/wiki/Principle_of_least_astonishment">principle of least astonishment</a> is nice to follow, don't assume that's how it works. Prove it, test it, fail fast or gather feedback on the exercise.</p>
<p>Test assumptions and prove to yourself that the assumptions are either right or wrong. This could come down to how you expect a library function to behave for certain inputs, or this could apply to how you <strong>think</strong> the customer wanted you to implement a feature.</p>
<p>Don't wait till the product is shipped to learn that's not what your customer asked for, try and find out ways to get that feedback sooner. Send it to some early adopters or beta users.</p>
<p>No matter what area of the process you work in or with, take a step back and look at your current feedback loops, how can you inject new feedback loops or improve the speed at which existing feedback loops can reach you. Can you turn a nightly build into an hourly build or check-in build (or auto-build on file save)? Of course too much feedback can get overwhelming, so take the ones that provide the most value to you and your process and find ways to optimize them.</p>
<p>Happy Feedback!</p>
</div>

      <a href="/2016/01/habit-of-a-solid-developer-rapid-feedback/#disqus_thread" data-disqus-identifier="/2016/01/habit-of-a-solid-developer-rapid-feedback/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/11/habit-of-a-solid-developer-podcasts/">Habit of a Solid Developer - Part 8 - Podcasts</a></h1>
    <p class="meta">
          <time datetime="2015-11-24T06:20:41.092Z" pubdate data-updated="true">Nov 23rd 2015</time>


        <a href="/2015/11/habit-of-a-solid-developer-podcasts/#disqus_thread" data-disqus-identifier="/2015/11/habit-of-a-solid-developer-podcasts/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>﻿
<div class="seriesNote">
    <p>This article is <strong>Part 8</strong> of <strong>11</strong> in a series about <strong>Habit of a Solid Developer</strong>.</p>
    <ul>
        <li>
            Part 1 - <a href="/2015/08/habit-of-a-solid-developer-introduction/">Introduction</a>
        </li>
        <li>
            Part 2 - <a href="/2015/09/habit-of-a-solid-developer-automatically-enforce-project-conventions/">Automatically Enforce Project Conventions</a>
        </li>
        <li>
            Part 3 - <a href="/2015/09/habit-of-a-solid-developer-self-prescribed-code-reviews/">Self Prescribed Code Reviews</a>
        </li>
        <li>
            Part 4 - <a href="/2015/09/habit-of-a-solid-developer-git-dance/">Git Dance</a>
        </li>
        <li>
            Part 5 - <a href="/2015/10/habit-of-a-solid-developer-update-or-add-documentation-while-reading-code/">Update or Add Documentation while Reading Code</a>
        </li>
        <li>
            Part 6 - <a href="/2015/10/habit-of-a-solid-developer-dig-a-little-deeper/">Dig a Little Deeper</a>
        </li>
        <li>
            Part 7 - <a href="/2015/11/habit-of-a-solid-developer-changes-should-be-taken-with-baby-steps/">Changes Should be Taken with Baby Steps</a>
        </li>
        <li>
            Part 8 - (current) - Podcasts
        </li>
        <li>
            Part 9 - <a href="/2016/01/habit-of-a-solid-developer-rapid-feedback/">Rapid Feedback</a>
        </li>
    </ul>
</div></p>
<p>One of the best investments I made into my own education in the software development field was when I convinced my boss to purchase an mp3 player (It was <a href="http://amzn.to/1FLNZGO">a Zune back in the day</a> and was perfect for the job).</p>
<p>My company didn't seem to mind spending several thousand once a year to send me to a developer conference, but in comparison, a cheap purchase of a music player that I could sync Podcasts to was the best investment my employer could have made. With almost 1.5 hours commuting in the car round-trip, I was able to soak up a large amount of technology related information each and every day. My co-workers were always wondering where and how I would come up with the knowledge about frameworks, tools, designs and other ideas.</p>
<h1>Equipment Needed</h1>
<p>You can likely go fancy with equipment, but I keep it pretty simple. Player and <a href="http://amzn.to/1HkxC4R">earbud headphones</a>.</p>
<h3>A podcast player</h3>
<p>Since everyone is different and how they want to consume podcast often varies, I'm not going to spend time recommending hardware/apps. If you have a smartphone, you already have a great podcast player in your pocket. Just take some time and look at 3rd party podcast player apps that are in your phone's app store. If you don't have a smartphone, there are <a href="http://amzn.to/1Hky570">lots of options</a> from just about anywhere. I use my iPhone since it's always with me and I can use the <a href="https://geo.itunes.apple.com/us/app/downcast/id393858566?mt=8&amp;at=10lPYJ">Downcast</a> app which has some great features that don't come with the standard iTunes podcast player.</p>
<blockquote>
<p>Side note: I'm currently <a href="http://staxmanade.com/apps/xbox-one-podcast/development/">building a podcast player</a> with the intent of launching on Xbox One. If you have any interest, come check it out...</p>
</blockquote>
<h3>Some earbud headphones</h3>
<p>Be sure to pick a pair of <a href="http://amzn.to/1HkxC4R">earbud headphones</a> that have the mic button control. There is a button on there that can be used to control the play/pause of what you're listening to. This is handy because I can setup a podcast to play, place the phone in my pocket, stick an earbud in an ear and go about my task while listening to a podcast. With the mic button if my wife wants to talk to me it's a simple click to pause the show. If you haven't given this a try, I recommend it.</p>
<h1>Choosing Podcasts</h1>
<p>There are lots of ways to decide what podcasts to listen to, but here are some approaches I find useful.</p>
<p>When I don't know what's out there on a subject, I like to browse iTunes for a search term, select a few in the area of interest, download a couple shows and give them a listen.</p>
<p>While listening to podcasts, I pay attention to other shows that are mentioned or recommended. If I like the one I'm currently listening to and they suggest I check out another podcast, there's a good chance I'll like it as well.</p>
<p>Don't feel like you have to commit to the podcast, if you listen to a few shows and you don't like the format or topics discussed, unsubscribe from the ones that don't add value to either you're education or entertainment setting. I find it is also a good idea to delete episodes on topics you have no interest in, or skip ones if they're not keeping your attention.</p>
<p>There is so much good content out there that you should never feel you need to listen to something that isn't going to keep your interest.</p>
<h1>When to listen.</h1>
<p>I no longer commute 1.X hours a day since I started <a href="http://staxmanade.com/2014/12/thoughts-on-working-remotely-from-home/">working remotely</a>, but that doesn't mean I don't have time to listen to podcasts. In fact, the number of podcasts that I subscribe to (and listen to) has actually gone up since my commuter days.</p>
<h3>Time/places to consume the content.</h3>
<ol>
<li>Obviously commuting to work is a great place to listen to podcasts. Put down the crappy celebrity gossip ridden talk radio (unless you're into that sort of thing) and soak up some higher quality informative podcasts.</li>
<li>Household chores is a great time to listen. Distention got podcasts while folding laundry or putting away dishes really helps with the mundane tasks.</li>
<li>Driving to pick up kids or after dropping them off. This was funny to me, on an episode of <a href="http://www.startupsfortherestofus.com/episodes/episode-240-podcasts-for-startup-founders">Startups for the rest of us</a> Rob said:</li>
</ol>
<blockquote>
<p>And the one other thing I do is, let’s say I’m going to go travel, from the <strong>time that I step in my car and leave my house</strong>, I have an earbud in. So I drive to the airport with an earbud in. I get out, I check in, I go through security, all with an earbud in. I wait and I get on the plane, and on the plane, maybe I’ll watch a movie, but if I’m going to try to sleep, typically I’ll listen to podcast. So there is like hours on both ends of a flight as an example. I can churn through 30 podcast episodes as long as I delete some, I’ll skip a few or I’ll skip around, that kind of stuff. I also have an earbud in when I’m making breakfast in the morning. I have one when I’m making dinner in the evening, when I’m doing dishes, when I’m out doing yard work, when I’m taking out the trash. Like most of my off time, when I’m not with my kids and when I’m kind of doing manual tasks. Even if it’s like five minutes of manual tasks, I can crank through stuff. So that’s kind of my process. How about you? - See more at: <a href="http://www.startupsfortherestofus.com/episodes/episode-240-podcasts-for-startup-founders#sthash.RMZtrseu.dpuf">http://www.startupsfortherestofus.com/episodes/episode-240-podcasts-for-startup-founders#sthash.RMZtrseu.dpuf</a></p>
</blockquote>
<h1>Ramp up the playback speed</h1>
<p>Most good podcast players have the ability to adjust the rate of playback while listening to the audio. Don't remember my old Zune having 1.5X playback speed, but oh man, once I discovered 1.5x playback speed on my <a href="https://geo.itunes.apple.com/us/app/downcast/id393858566?mt=8&amp;at=10lPYJ">Downcast</a> app it's crazy how much content I can zip through (and still enjoy) at the faster rate.</p>
<p>It may take some getting used to the higher speeds but for me, 1.5X is just about right. I'd like to try more 1.75x but Downcast doesn't support it - it jumps up to 2X. When I try listening to 2x speed I find it requires more focus to understand what's going on and is much less of a enjoyable listening experience. I'm thinking I can get there if I train my brain to listen to it...</p>
<h1>Listening to developer related podcasts</h1>
<p>Keeping up on developer focused podcasts was where I got my start with podcasts and are still the core of my listening genre. Hearing about certain technologies multiple times on different podcasts may be just enough for me to start digging into the technology myself.</p>
<p>While I mentioned above about deleting podcasts that I have no interest in, I do enjoy the surprise episode of some technology I didn't think I'd be interested in that opens my eyes to something I hadn't known before. Even though it may turn out I never use sed technology, at least knowing a little about it can be beneficial if I have to apply it to a problem set in the future. This way, I at least been introduced to the idea and can research it further should I feel the need.</p>
<h1>Subscribe to other subjects</h1>
<p>If you start to become an <a href="http://staxmanade.com/about/podcasts">oversumer of podcasts like myself</a>, that's OK. Just make sure you're not consuming the same style of podcasts (in my case only development related). Try to diversify your subscriptions. While I really enjoy all my developer related podcasts and they are still core to much of my listening habits, some of my favorite podcast have nothing to do with software development. Give a look at <a href="http://staxmanade.com/about/podcasts">some that I follow</a>, ask what others are listening to, and have fun exploring all the great content that is out there.</p>
<p>Happy Listening &amp; Learning!</p>
</div>

      <a href="/2015/11/habit-of-a-solid-developer-podcasts/#disqus_thread" data-disqus-identifier="/2015/11/habit-of-a-solid-developer-podcasts/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/11/testing-asyncronous-code-with-mochajs-and-es7-async-await/">Testing Asynchronous Code with MochaJS and ES7 async/await</a></h1>
    <p class="meta">
          <time datetime="2015-11-12T02:59:21.475Z" pubdate data-updated="true">Nov 11th 2015</time>


        <a href="/2015/11/testing-asyncronous-code-with-mochajs-and-es7-async-await/#disqus_thread" data-disqus-identifier="/2015/11/testing-asyncronous-code-with-mochajs-and-es7-async-await/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>A JavaScript project I'm working on recently underwent a pretty good refactor. Many of the modules/methods in the application worked in a synchronous fashion which meant their unit tests were also generally synchronous. This was great because synchronous code is pretty much always easier to test since they're simpler and easier to reason about.</p>
<p>However, even though I new early on that I would likely have to turn a good number of my synchronous methods into asynchronous ones I tried holding off on that as long as absolutely necessary. I was in a mode of prototyping as much of the application out as possible before I wanted to be worried/thinking about asynchronous aspects of the code base.</p>
<p>Part of why I held of on this was because I was pretty confident using the new proposed ES7 <code>async/await</code> syntax to turn the sync code into async code relatively easily. While there were a few bumps along the refactor actually went extremely well.</p>
<p>An example of one bump I ran into included replacing <code>items.forEach(item =&gt; item.doSomethingNowThatWillBecomeAsyncSoon())</code> with something that worked asynchronously and I found <a href="http://pouchdb.com/2015/03/05/taming-the-async-beast-with-es7.html">this blog post</a> immensely helpful. Basically, don't try to await a <code>forEach</code> instead build a list of promises you can await.</p>
<p>Another one I ran into was dealing with async mocha tests, which is what the rest of this post is about.</p>
<p><a href="https://mochajs.org">MochaJS</a> is great because the asynchronous testing has been there from the beginning. If you've <code>done</code> (see what I did there?) any asynchronous testing with MochaJS then you already know that you can signal to Mocha an asynchronous test is <code>done</code> by calling the test's async callback method.</p>
<p>Before we look at how to test asynchronous Mocha tests leveraging the new ES 7 async/await syntax, let's first take a little journey through some of the various asynchronous testing options with Mocha.</p>
<blockquote>
<p>Note: you will see example unit tests that use the <code>expect(...).to.equal(...)</code> style assertions from <a href="http://chaijs.com/api/bdd/">ChaiJS</a>.</p>
</blockquote>
<h1>How to create an asynchronous MochaJS test?</h1>
<p>If you look at a normal synchronous test:</p>
<pre><code>it(<span class="hljs-string">"should work"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Synchronous test"</span>);
});
</code></pre>
<p>all we have to do to turn it into an asynchronous test is to add a callback function as the first parameter in the mocha test function (I like to call it <code>done</code>) like this</p>
<pre><code>it(<span class="hljs-string">"should work"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Synchronous test"</span>);
});
</code></pre>
<p>But that's an invalid asynchronous test.</p>
<h1>Invalid basic async mocha test</h1>
<p>This first async example test we show is invalid because the <code>done</code> callback is never called. Here's another example using <code>setTimeout</code> to simulate proper asynchronicity. This will show up in Mocha as a timeout error because we never signal back to mocha by calling our <code>done</code> method.</p>
<pre><code>it(<span class="hljs-string">"where we forget the done() callback!"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>)</span>{
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Test"</span>);
    }, <span class="hljs-number">200</span>);
});
</code></pre>
<h1>Valid basic async mocha test</h1>
<p>When we call the <code>done</code> method it tells Mocha the asynchronous work/test is complete.</p>
<pre><code>it<span class="hljs-list">(<span class="hljs-string">"Using setTimeout to simulate asynchronous code!"</span>, function<span class="hljs-list">(<span class="hljs-keyword">done</span>)</span>{
    setTimeout<span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">()</span> {
        done<span class="hljs-list">()</span><span class="hljs-comment">;</span>
    }, <span class="hljs-number">200</span>)</span><span class="hljs-comment">;</span>
})</span><span class="hljs-comment">;</span>
</code></pre>
<h1>Valid basic async mocha test (that fails)</h1>
<p>With asynchronous tests, the way we tell Mocha the test failed is by passing an <code>Error</code> or <code>string</code> to the <code>done(...)</code> callback</p>
<pre><code>it<span class="hljs-list">(<span class="hljs-string">"Using setTimeout to simulate asynchronous code!"</span>, function<span class="hljs-list">(<span class="hljs-keyword">done</span>)</span>{
    setTimeout<span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">()</span> {
        done<span class="hljs-list">(<span class="hljs-keyword">new</span> Error<span class="hljs-list">(<span class="hljs-string">"This is a sample failing async test"</span>)</span>)</span><span class="hljs-comment">;</span>
    }, <span class="hljs-number">200</span>)</span><span class="hljs-comment">;</span>
})</span><span class="hljs-comment">;</span>
</code></pre>
<h1>Invalid async with Promise mocha test</h1>
<p>If you were to run the below test it would fail with a timeout error.</p>
<pre><code>it(<span class="hljs-string">"Using a Promise that resolves successfully!"</span>, function(done) {
    <span class="hljs-keyword">var</span> testPromise = new <span class="hljs-type">Promise</span>(function(resolve, reject) {
        setTimeout(function() {
            resolve(<span class="hljs-string">"Hello!"</span>);
        }, <span class="hljs-number">200</span>);
    });

    testPromise.then(function(<span class="hljs-literal">result</span>) {
        expect(<span class="hljs-literal">result</span>).to.equal(<span class="hljs-string">"Hello World!"</span>);
        done();
    }, done);
});
</code></pre>
<p>If you were to open up your developer tools you may notice an error printed to the console:</p>
<pre><code>    <span class="hljs-tag">Uncaught</span> (in promise) <span class="hljs-tag">i</span> {<span class="hljs-attribute">message</span>: <span class="hljs-string">"expected 'Hello!' to equal 'Hello World!'"</span>, <span class="hljs-attribute">showDiff</span>: true, <span class="hljs-attribute">actual</span>: <span class="hljs-string">"Hello!"</span>, <span class="hljs-attribute">expected</span>: <span class="hljs-string">"Hello World!"</span>}
</code></pre>
<p>The problem here is the <code>expect(result).to.equal(&quot;Hello World!&quot;);</code> above will fail before we can signal to Mocha via the <code>done()</code> of either an error or a completion which causes a timeout.</p>
<p>We can update the above test with a <code>try/catch</code> around our expectations that could throw exceptions so that we can report any errors to Mocha if they happened.</p>
<pre><code>it<span class="hljs-list">(<span class="hljs-string">"Using a Promise that resolves successfully with wrong expectation!"</span>, function<span class="hljs-list">(<span class="hljs-keyword">done</span>)</span> {
    var testPromise = new Promise<span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">(<span class="hljs-keyword">resolve</span>, reject)</span> {
        setTimeout<span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">()</span> {
            resolve<span class="hljs-list">(<span class="hljs-string">"Hello World!"</span>)</span><span class="hljs-comment">;</span>
        }, <span class="hljs-number">200</span>)</span><span class="hljs-comment">;</span>
    })</span><span class="hljs-comment">;</span>

    testPromise.then<span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">(<span class="hljs-keyword">result</span>)</span>{
        try {
            expect<span class="hljs-list">(<span class="hljs-keyword">result</span>)</span>.to.equal<span class="hljs-list">(<span class="hljs-string">"Hello!"</span>)</span><span class="hljs-comment">;</span>
            done<span class="hljs-list">()</span><span class="hljs-comment">;</span>
        } catch<span class="hljs-list">(<span class="hljs-keyword">err</span>)</span> {
            done<span class="hljs-list">(<span class="hljs-keyword">err</span>)</span><span class="hljs-comment">;</span>
        }
    }, done)</span><span class="hljs-comment">;</span>
})</span><span class="hljs-comment">;</span>
</code></pre>
<p>This will correctly report the error in the test.</p>
<h2>But there is a better way with promises. (mostly)</h2>
<p>Mocha has built-in support for async tests that return a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>. However, run into troubles with async and promises in the hook functions like <code>before/beforEach/etc...</code>. So if you keep reading you'll see a helper function that I've not had any issues with (besides it's a bit more work...).</p>
<blockquote>
<p>Thanks to a comment from @syrnick below, I've extended this write-up...</p>
</blockquote>
<p>Async tests can be accomplished in two ways. The first is the already shown <code>done</code> callback. The second is if you returned a <code>Promise</code> object from the test. This a great building block. The above example test has become a little verbose with all the usages of <code>done</code> and the <code>try/catch</code> - it just gets a little cumbersome to write.</p>
<p>If we wanted to re-write the above test we can simplify it to return just promise.</p>
<blockquote>
<p>IMPORTANT: if you want to return a promise, you have to remove the <code>done</code> callback or mocha will assume you'll be using that first and not look for a promise return. Although I've seen comments in Mocha's github issues list where some people depend on it working with both a callback and a promise - you're mileage may vary.</p>
</blockquote>
<p>Here's an example of returning a <code>Promise</code> that correctly fails the test with the readable error message from Chaijs.</p>
<pre><code>it(<span class="hljs-string">"Using a Promise that resolves successfully with wrong expectation!"</span>, function() {
    <span class="hljs-keyword">var</span> testPromise = new <span class="hljs-type">Promise</span>(function(resolve, reject) {
        setTimeout(function() {
            resolve(<span class="hljs-string">"Hello World!"</span>);
        }, <span class="hljs-number">200</span>);
    });

    <span class="hljs-keyword">return</span> testPromise.then(function(<span class="hljs-literal">result</span>){
        expect(<span class="hljs-literal">result</span>).to.equal(<span class="hljs-string">"Hello!"</span>);
    });
});
</code></pre>
<p>The great thing here is we can remove the second <code>error</code> promise callback (where we passed in <code>done</code>) as Mocha should catch any Promise rejections and fail the test for us.</p>
<p>Running the above test will result in the following easy to understand error message:</p>
<p><code>AssertionError: expected 'Hello!' to equal 'Hello World!'</code></p>
<h1>Turn what we know above into async/await.</h1>
<p>Now that we know there are some special things we need to do in our async mocha tests (<code>done</code> callbacks and <code>try/catch</code> or <code>Promise</code>s) let's see what happens if we start to use the new ES7 async/await syntax in the language and if it can enable more readable asynchronous unit tests.</p>
<p>The beauty of the async/await syntax is we get to reduce the <code>.then(callback, done)</code>... mumbo jumbo and turn that into code that reads like it were happening synchronously. The downside of this approach is that it's not happening synchronously and we can't forget that when we're looking at code and starting to use it this way. But overall it is generally easier to reason about in this style.</p>
<p>The big changes from the above <code>Promise</code> style test and the transformed <code>async</code> test below are:</p>
<ol>
<li>Place the <code>async</code> word in front of the <code>async function(done){...</code>. This tells the system that inside of this function there may (or may not be) the use of the <code>await</code> keyword and in the end the function is turned into a <code>Promise</code> under the hood.
a Promise to simplify our unit tests.</li>
<li>We replace the <code>.then(function(result){</code> promise work and in place use the <code>await</code> keyword to have it return the promise value assign it to <code>result</code> so after that we can run our expectations against it.</li>
<li>Remove the <code>done</code> callback. If you aren't aware, <code>async/await</code> is a fancy compiler trick that under-the-hood turns the code into simple <code>Promise</code> chaining and callbacks. So we can use what we learned above about Mocha using 5. <code>return</code> the Promise.</li>
</ol>
<p>If we apply the 5 notes listed above, we see that we can greatly improve the test readability.</p>
<pre><code>it(<span class="hljs-string">"Using a Promise with async/await that resolves successfully with wrong expectation!"</span>, async function() {
    <span class="hljs-keyword">var</span> testPromise = new <span class="hljs-type">Promise</span>(function(resolve, reject) {
        setTimeout(function() {
            resolve(<span class="hljs-string">"Hello World!"</span>);
        }, <span class="hljs-number">200</span>);
    });

    <span class="hljs-keyword">var</span> <span class="hljs-literal">result</span> = await testPromise;

    expect(<span class="hljs-literal">result</span>).to.equal(<span class="hljs-string">"Hello!"</span>);
});
</code></pre>
<p>Notice the <code>async function(){</code> part above turns this into a function that will (under-the-hood) return a promise that should correclty report errors when the <code>expect(...)</code> fails.</p>
<h1>Handling errors with <code>async/await</code></h1>
<p>One interesting implementation detail around async await is that exceptions and errors are handled just like you were to handle them in synchronous code using a <code>try/catch</code>. While under-the-hood the errors turn into <code>rejected</code> <code>Promises</code>.</p>
<blockquote>
<p>NOTE: You're mileage may vary with the async/await and mocha tests with promises. I tried playing around with <code>async</code> in mocha hooks like <code>before/beforeEach</code> but ran into some troubles.</p>
</blockquote>
<p>Since there may or may-not be issues with mocha hook methods, one work-around is to leverage a <code>try/catch</code> and the <code>done</code> callback to manually handle exceptions. You may run into this so I'll show examples of how to avoid relying on Mocha to trap errors.</p>
<p>Below shows the (failing) but alternative way (not using a <code>return Promsie</code>) but using the <code>done</code> callback instead.</p>
<pre><code>it(<span class="hljs-string">"Using a Promise with async/await that resolves successfully with wrong expectation!"</span>, async function(done) {
    <span class="hljs-keyword">var</span> testPromise = new <span class="hljs-type">Promise</span>(function(resolve, reject) {
        setTimeout(function() {
            resolve(<span class="hljs-string">"Hello World!"</span>);
        }, <span class="hljs-number">200</span>);
    });

    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">var</span> <span class="hljs-literal">result</span> = await testPromise;

        expect(<span class="hljs-literal">result</span>).to.equal(<span class="hljs-string">"Hello!"</span>);

        done();
    } catch(err) {
        done(err);
    }
});
</code></pre>
<h1>Removing the test boilerplate</h1>
<p>One I started seeing the pattern and use of <code>try/catch</code> boilerplate showing up in my async tests, it became apparent that there had to be a more terse approach that could help me avoid forgetting the <code>try/catch</code> needed in each async test. This was because I would often remember the <code>async/await</code> syntax changes for my async tests but would often forget the <code>try/catch</code> which often resulted in timeout errors instead of proper failures.</p>
<blockquote>
<p>another example below with the async/await and try/catch</p>
</blockquote>
<pre><code>it(<span class="hljs-string">"Using an async method with async/await!"</span>, async function(done) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">var</span> <span class="hljs-literal">result</span> = await somethingAsync();

        expect(<span class="hljs-literal">result</span>).to.equal(something);

        done();
    } catch(err) {
        done(err);
    }
});
</code></pre>
<p>So I refactored that to reduce the friction.</p>
<h2>And the mochaAsync higher order function was born</h2>
<p>This simple little guy takes an <code>async</code> function which looks like <code>async () =&gt; {...}</code>. It then returns a higher order function which is also asynchronous but has wrapped your test function in a try/catch and also takes care of calling the mocha <code>done</code> in the proper place (either after your test is asynchronously completed, or errors out).</p>
<pre><code>var mochaAsync = <span class="hljs-function"><span class="hljs-params">(fn)</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> async (done) =&gt; {
        <span class="hljs-keyword">try</span> {
            await fn();
            done();
        } <span class="hljs-keyword">catch</span> (err) {
            done(err);
        }
    };
};
</code></pre>
<p>You can use it like this:</p>
<pre><code>it<span class="hljs-list">(<span class="hljs-string">"Sample async/await mocha test using wrapper"</span>, mochaAsync<span class="hljs-list">(<span class="hljs-keyword">async</span> <span class="hljs-list">()</span> =&gt; {
    var x = await someAsyncMethodToTest<span class="hljs-list">()</span><span class="hljs-comment">;</span>
    expect<span class="hljs-list">(<span class="hljs-keyword">x</span>)</span>.to.equal<span class="hljs-list">(<span class="hljs-keyword">true</span>)</span><span class="hljs-comment">;</span>
})</span>)</span><span class="hljs-comment">;</span>
</code></pre>
<p>It can also be used with the mocha <code>before</code>, <code>beforeEach</code>, <code>after</code>, <code>afterEach</code> setup/teardown methods.</p>
<pre><code>beforeEach<span class="hljs-list">(<span class="hljs-keyword">mochaAsync</span><span class="hljs-list">(<span class="hljs-keyword">async</span> <span class="hljs-list">()</span> =&gt; {
    await someLongSetupCode<span class="hljs-list">()</span><span class="hljs-comment">;</span>
})</span>)</span><span class="hljs-comment">;</span>
</code></pre>
<h1>In closing.</h1>
<p>This post may have seemed like quite a journey to get to the little poorly named <code>mochaAsync</code> or learn to use Mocha's Promise support but I hope it was helpful and I can't wait for the <code>async/await</code> syntax to become mainstream in JavaScript, but until then I'm thankful we have transpiling tools like <a href="http://babeljs.io">Babel</a> so we can take advantage of these features now. ESNext-pecially in our tests...</p>
<p>Happy Testing!</p>
</div>

      <a href="/2015/11/testing-asyncronous-code-with-mochajs-and-es7-async-await/#disqus_thread" data-disqus-identifier="/2015/11/testing-asyncronous-code-with-mochajs-and-es7-async-await/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/11/habit-of-a-solid-developer-changes-should-be-taken-with-baby-steps/">Habit of a Solid Developer - Part 7 - Changes Should be Taken with Baby Steps</a></h1>
    <p class="meta">
          <time datetime="2015-11-07T06:20:41.092Z" pubdate data-updated="true">Nov 6th 2015</time>


        <a href="/2015/11/habit-of-a-solid-developer-changes-should-be-taken-with-baby-steps/#disqus_thread" data-disqus-identifier="/2015/11/habit-of-a-solid-developer-changes-should-be-taken-with-baby-steps/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>﻿
<div class="seriesNote">
    <p>This article is <strong>Part 7</strong> of <strong>11</strong> in a series about <strong>Habit of a Solid Developer</strong>.</p>
    <ul>
        <li>
            Part 1 - <a href="/2015/08/habit-of-a-solid-developer-introduction/">Introduction</a>
        </li>
        <li>
            Part 2 - <a href="/2015/09/habit-of-a-solid-developer-automatically-enforce-project-conventions/">Automatically Enforce Project Conventions</a>
        </li>
        <li>
            Part 3 - <a href="/2015/09/habit-of-a-solid-developer-self-prescribed-code-reviews/">Self Prescribed Code Reviews</a>
        </li>
        <li>
            Part 4 - <a href="/2015/09/habit-of-a-solid-developer-git-dance/">Git Dance</a>
        </li>
        <li>
            Part 5 - <a href="/2015/10/habit-of-a-solid-developer-update-or-add-documentation-while-reading-code/">Update or Add Documentation while Reading Code</a>
        </li>
        <li>
            Part 6 - <a href="/2015/10/habit-of-a-solid-developer-dig-a-little-deeper/">Dig a Little Deeper</a>
        </li>
        <li>
            Part 7 - (current) - Changes Should be Taken with Baby Steps
        </li>
        <li>
            Part 8 - <a href="/2015/11/habit-of-a-solid-developer-podcasts/">Podcasts</a>
        </li>
        <li>
            Part 9 - <a href="/2016/01/habit-of-a-solid-developer-rapid-feedback/">Rapid Feedback</a>
        </li>
    </ul>
</div></p>
<p>Have you ever made some code changes and while in the process of making those changes realize you need to change something else, which leads to changes to that thing over there and then again up there, and down here, and over there and since we're in here and I've been meaning to tweak this well... and paused to realize you forgot the original goal of why you are even looking at this module of code? No never? (well I have). <code>git reset --hard</code> and start over :)</p>
<p>If you're one who likes to apply the ol Boy Scout rule of <code>Always leave the campground cleaner than you found it</code> to your code, just don't, at lest not yet. While I'm a big fan of cleaning up those legacy areas of code that just need a good sweep up, the approach taken here needs to be handled with care. I'm also referring to code that is likely covered well with automated testing.</p>
<h1>But Why?</h1>
<p>Before you go around making a bunch of cleanup changes, fixing formatting, changing variable names, general cleanup. Accomplish a tiny part of your overall objective and commit just that change.</p>
<p>If you see other things along the way, take note and come back to them later. Or if, like me you can't help yourself, just don't check all of those changes in at once. Use something like <code>git add -p</code> to <a href="http://staxmanade.com/2014/02/segregate-your-code-commits-into-tiny/">segregate your code commits into tiny topical changes</a>.</p>
<p>If the job is to <code>rename a variable</code>, don't also <code>fix spelling, format code, extract method, etc...</code>. Save those other changes for different commits.</p>
<h3>But what if you don't know what you're planning to change?</h3>
<p>Sometimes, it's good to go off and spike a big swath of changes just to get an idea how much impact a refactor could have on the architecture or project as a whole. Prototype something to get a good picture of whether a change is possible or not or to see how many coupled items need to be adjusted along the way.</p>
<p>However, you go into it knowing you will likely just undo all of your changes all together with the goal to surface more knowledgeable and either:</p>
<p>A) determine that it is a do-able change and should or should not even be attempted in a proper fashion
B) or you've uncovered some challenges that are not easily overcome and require more thought or prior preparatory refactorings.</p>
<h1>Use TDD as a forcing mechanism to small changes</h1>
<p>TDD (Test Driven Development) is a great way to take as tiny a step as possible. With this approach, you can write a test, make it pass (consider that a change) and <a href="http://staxmanade.com/2014/02/segregate-your-code-commits-into-tiny/">possibly check it in</a> to source control. One test at a time ensures that you're taking baby steps along the way to solving the bigger problem(s).</p>
<h1>Baby Steps also when Debugging</h1>
<p>Taking baby steps is also important when debugging. Running around the codebase changing X, Y, and Z just to see if you can fix a bug will often times get you in a bigger mess than the original bug you tried to fix. Making one change at a time, verifying the bug, then the next change is quite often a better approach. So consider going slow and taking baby steps.</p>
<p>It doesn't matter if you're making project-wide architectural changes or surgical bug fixes, if you can, <strong>try to take baby steps, commit the changes and verify each change along the way</strong>. It may feel like you're going slower, but in the long haul you may actually save time.</p>
<p>Happy Baby Steps!</p>
</div>

      <a href="/2015/11/habit-of-a-solid-developer-changes-should-be-taken-with-baby-steps/#disqus_thread" data-disqus-identifier="/2015/11/habit-of-a-solid-developer-changes-should-be-taken-with-baby-steps/">(Comments)</a>
    </article>
  <div class="pagination">
      <a class="prev" href="/blog/pages/2/">&larr; Older</a>
    <a href="/blog/archives">Blog Archives</a>
  </div>
</div>


    </div>
</div>
<footer role="contentinfo"><p>
  Copyright &copy; 2008-2016 - Jason Jarrett - <span class="credit">Powered by <a href="http://togglejs.github.io">Toggle</a></span>
</p>


<style>
  .jj-signup-form {
    text-align: right;
    position: fixed;
    bottom: 0;
    right: 0;
    width: 300px;
    display: none;
  }
</style>

<style>
    .jj-signup-form {
        border-width: thin;
        border-color: black;
        border-style: solid;
        background-color: white;
    }
</style>
<div class="jj-signup-form">
    <button class="jj-signup-form-close">Close</button>
    <div>
        <!-- Begin MailChimp Signup Form -->
        <link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
        <style type="text/css">
            #mc_embed_signup {
                background: #fff;
                clear: left;
                font: 14px Helvetica, Arial, sans-serif;
            }
            /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
        </style>
        <div id="mc_embed_signup">
            <form action="//staxmanade.us8.list-manage.com/subscribe/post?u=9a6f3f89fc58e1bbbddf5c3f8&amp;id=9e5406be65" method="post"
                id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                <div id="mc_embed_signup_scroll">
                    <h2>Don't miss a post...</h2>
                    <div class="mc-field-group">
                        <label for="mce-FNAME">First Name </label>
                        <input type="text" value="" name="FNAME" class="" id="mce-FNAME">
                    </div>
                    <div class="mc-field-group">
                        <label for="mce-EMAIL">Email Address  <span class="asterisk">*</span>
</label>
                        <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
                    </div>
                    <div id="mce-responses" class="clear">
                        <div class="response" id="mce-error-response" style="display:none"></div>
                        <div class="response" id="mce-success-response" style="display:none"></div>
                    </div>
                    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_9a6f3f89fc58e1bbbddf5c3f8_9e5406be65" tabindex="-1" value=""></div>
                    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
                </div>
            </form>
        </div>
        <script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script>
        <script type='text/javascript'>
            (function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[1]='FNAME';ftypes[1]='text';fnames[0]='EMAIL';ftypes[0]='email';}(jQuery));var $mcj = jQuery.noConflict(true);
        </script>
        <!--End mc_embed_signup-->
    </div>
</div>

<script src="//cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.1/js.cookie.min.js"></script>
<script>
  (function(){
    try {
      if (Cookies.get('IKnowItIsACrappyPopupButMeh') !== "clicked") {
        document.querySelector('.jj-signup-form-close').addEventListener('click', function(){
            document.querySelector('.jj-signup-form').style.display = "none";
            Cookies.set("IKnowItIsACrappyPopupButMeh", "clicked", { expires: 180 });
        });

        setTimeout(function(){
          if(window.jjdisableSignupPopup) {
            return;
          }
          document.querySelector('.jj-signup-form').style.display = "initial";
        }, 40000);
      }

    } catch(e) {
        console.log(e);
    }
  })();

</script>
</footer>
  



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



</body>
</html>
