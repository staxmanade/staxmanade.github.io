<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Developing on Staxmanade - Developing on Staxmanade</title>
  <meta name="author" content="Jason Jarrett">


   <meta name="description" content="Jason Jarrett&#x27;s Blog and Website.">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <link rel="canonical" href="http://staxmanade.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/DevelopingOnStaxmande" rel="alternate" title="Developing on Staxmanade" type="application/atom+xml">
    <script src="/js/modernizr-2.0.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./js/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/octopress.js" type="text/javascript"></script>
    <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1017448-6']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</head>

<body   >
<header role="banner"><hgroup>
  <h1><a href="/">Developing on Staxmanade</a></h1>
</hgroup>

</header>
<nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/DevelopingOnStaxmande" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
</ul>
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:staxmanade.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
<div id="main">
    <div id="content">
        
<div class="blog-index">
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/05/running-in-app-mocha-tests-within-winjs/">Running in-app mocha tests within WinJS</a></h1>
    <p class="meta">
          <time datetime="2015-05-23T21:32:45.540Z" pubdate data-updated="true">May 23rd 2015</time>


        <a href="/2015/05/running-in-app-mocha-tests-within-winjs/#disqus_thread" data-disqus-identifier="/2015/05/running-in-app-mocha-tests-within-winjs/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><blockquote>
<p>I described a while back a scenario about running <a href="http://staxmanade.com/2015/03/in-app-unit-tests/">in-app unit tests</a>. So if you'd like some background on the subject have a look there before reading here.</p>
</blockquote>
<p>This post is going to give some specifics about how to run <a href="http://mochajs.org/">MochaJS</a> tests within a Microsoft Windows JavaScript application (WinJS).</p>
<h1>Prerequisites</h1>
<p>These steps assume you already have a WinJS application, possibly using the universal template or other. In the end it doesn't matter. As long as you have a project that probably has a <code>default.html</code> file and the ability to add <code>js</code> &amp; <code>css</code> files to.</p>
<h1>Get Mocha</h1>
<p>You can acquire the mocha library however you want, <a href="http://bower.io/">Bower</a>, (Npm)(<a href="http://npmjs.com/">http://npmjs.com/</a>), or download it manually from the site (<a href="http://mochajs.org/">mochajs.org</a>).</p>
<h1>Reference Mocha Within Project &amp; App</h1>
<p>However you get the mocha source, you need to both add references to the mocha js and css files into your project file either in a <code>*.jsproj</code> file or if using a universal shared app, in the shared project.</p>
<p>Then you need to include a reference to the code in your <code>default.html</code> file.</p>
<p>In my example below you can see I used bower to download the <a href="http://mochajs.org">MochaJS</a> library.</p>
<p>The <code>mocha.setup('bdd')</code> tells mocha to use the BDD style of tests which defines the <code>describe(...)</code>, <code>it(...)</code>, etc functions.</p>
<pre><code class="language-html"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>MyApp.Windows<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- WinJS references --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"/js/bower_components/winjs/css/ui-light.css"</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/bower_components/winjs/js/base.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/bower_components/winjs/js/ui.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- TESTS--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"/js/bower_components/mocha/mocha.css"</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/bower_components/mocha/mocha.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
        mocha.setup(<span class="hljs-string">'bdd'</span>);
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- My Project js/css files below... --&gt;</span>

...Rest of default.html file excluded
</code></pre>
<h1>Create a WinJS Control for hosting Mocha reporting.</h1>
<p>Below is a sample WinJS control that can be used to host the mocha html report.</p>
<pre><code class="language-html"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">style</span>&gt;</span><span class="css">
        <span class="hljs-id">#mocha</span> <span class="hljs-rules">{
            <span class="hljs-rule"><span class="hljs-attribute">height</span>:<span class="hljs-value"> <span class="hljs-number">800px</span></span></span>;
            <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">600px</span></span></span>;
            <span class="hljs-rule"><span class="hljs-attribute">overflow</span>:<span class="hljs-value"> scroll</span></span>;
        <span class="hljs-rule">}</span></span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"fragment section1page"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">section</span> <span class="hljs-attribute">aria-label</span>=<span class="hljs-value">"Main content"</span> <span class="hljs-attribute">role</span>=<span class="hljs-value">"main"</span>&gt;</span>

            <span class="hljs-comment">&lt;!-- define a button that we can use to manually run or re-run tests --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mochaTestsRun"</span>&gt;</span>Run Tests<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>

            <span class="hljs-comment">&lt;!-- define a checkbox that allow us to toggle auto-run 
                 of the tests when we start up the app --&gt;</span>
            Auto start <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"checkbox"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mochaTestsRunOnStart"</span> /&gt;</span>


            <span class="hljs-comment">&lt;!-- this is a blank div we use to inject U.I. related tests --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"testElementContainer"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

            <span class="hljs-comment">&lt;!-- mocha throws the html output in the below div --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mocha"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">section</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre>
<pre><code class="language-javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
<span class="hljs-pi">    "use strict"</span>;

    <span class="hljs-keyword">var</span> runMochaTests = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// If you want your tests to verify nothing is leaked globally...</span>
        mocha.checkLeaks();

        <span class="hljs-comment">// specify any globals that you are OK with your tests leaking</span>
        mocha.globals([
            <span class="hljs-string">'someGlobalIAmExpecting'</span>
        ]);

        <span class="hljs-comment">// start the test run</span>
        mocha.run();
    }

    <span class="hljs-keyword">var</span> ControlConstructor = WinJS.UI.Pages.define(<span class="hljs-string">"/js/tests/tests.html"</span>, {
        <span class="hljs-comment">// This function is called after the page control contents </span>
        <span class="hljs-comment">// have been loaded, controls have been activated, and </span>
        <span class="hljs-comment">// the resulting elements have been parented to the DOM. </span>
        ready: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(element, options)</span> </span>{
            options = options || {};

            <span class="hljs-comment">// get our possibly already cached value of whether to run the tests on startup.</span>
            <span class="hljs-keyword">var</span> runOnStart = localStorage.getItem(<span class="hljs-string">"mochaTestsRunOnStart"</span>);

            <span class="hljs-comment">// checkbox to manage auto-run state</span>
            <span class="hljs-keyword">var</span> runOnStartCheckbox = element.querySelector(<span class="hljs-string">'#mochaTestsRunOnStart'</span>);
            runOnStartCheckbox.addEventListener(<span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
                localStorage.setItem(<span class="hljs-string">"mochaTestsRunOnStart"</span>, runOnStartCheckbox.checked);
            });

            <span class="hljs-comment">// button to manually trigger a test run</span>
            <span class="hljs-keyword">var</span> mochaTestsRunButton = element.querySelector(<span class="hljs-string">'#mochaTestsRun'</span>);
            mochaTestsRunButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
                runMochaTests();
            })
            runOnStartCheckbox.checked = runOnStart;

            <span class="hljs-keyword">if</span> (runOnStart &amp;&amp; !<span class="hljs-built_in">window</span>.hasRunMochaTestsAtLeastOnce) {
                <span class="hljs-comment">// this value is used to avoid extra test runs as we navigation around the app.</span>
                <span class="hljs-comment">// EX: if the test control is on a home pivot - we nav away and come back home</span>
                <span class="hljs-comment">// we probably don't want to auto-run the tests again. (use the menu button </span>
                <span class="hljs-comment">// instead if you want another test run)</span>
                <span class="hljs-built_in">window</span>.hasRunMochaTestsAtLeastOnce = <span class="hljs-literal">true</span>;
                runMochaTests();
            }

        },
    });

    <span class="hljs-comment">// The following lines expose this control constructor as a global. </span>
    <span class="hljs-comment">// This lets you use the control as a declarative control inside the </span>
    <span class="hljs-comment">// data-win-control attribute. </span>

    WinJS.Namespace.define(<span class="hljs-string">"Pod.UI.Controls"</span>, {
        TestsControl: ControlConstructor
    });
})();
</code></pre>
<h1>Handle global exceptions</h1>
<p>If you write any async code (difficult not to these days) an exception or assertion failure will not be trapped by the internal try/catch mechanism's of Mocha in a Windows WinJS environment.</p>
<p>We have to give Mocha a hint on how to hook into global exceptions.</p>
<p>Mocha tries to attach to the browser's global <code>window.onerror</code> method, and since a WinJS app doesn't use this same handler, we have to forward the exceptions and to mocha's attached <code>window.onerror</code> handler.</p>
<p>In you're <code>default.js</code> or wherever you configure the <code>app</code> you can attach to the <a href="https://msdn.microsoft.com/en-us/library/windows/apps/hh974768.aspx"><code>WinJS.Application.onerror</code></a> and after some exception massaging we can hand the exceptions to mocha so when a test fails it can be reported correctly.</p>
<pre><code class="language-javascript">    WinJS.Application.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(ex)</span> </span>{

        <span class="hljs-keyword">var</span> errorMessage, errorLine, errorUrl;
        <span class="hljs-keyword">if</span> (ex.detail.errorMessage) {
            errorMessage = ex.detail.errorMessage;
            errorLine = ex.detail.errorLine;
            errorUrl = ex.detail.errorUrl;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ex &amp;&amp;
            ex.detail &amp;&amp;
            ex.detail.exception &amp;&amp;
            ex.detail.exception.stack) {
            errorMessage = ex.detail.exception.stack;
            errorLine = <span class="hljs-literal">null</span>;
            errorUrl = <span class="hljs-literal">null</span>;
        }

        <span class="hljs-comment">// if window.onerror exists, assume mochajs is here and call it's error handler</span>
        <span class="hljs-comment">// This may be a poor assumption because 3rd party libraries could also attach</span>
        <span class="hljs-comment">// their handlers, but it's working for me so far...</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.onerror &amp;&amp; errorMessage) {
            <span class="hljs-built_in">window</span>.onerror(errorMessage, errorLine, errorUrl);
            
            <span class="hljs-comment">// return true signalling that the error's been </span>
            <span class="hljs-comment">// handled (keeping the whole app from crashing)</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }

        <span class="hljs-comment">// if we get here, assuming mochajs isn't running</span>
        <span class="hljs-comment">// let's log out the errors...</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">var</span> exMessage = <span class="hljs-built_in">JSON</span>.stringify(ex, <span class="hljs-literal">null</span>, <span class="hljs-string">'  '</span>);
            <span class="hljs-built_in">console</span>.error(exMessage);
        } <span class="hljs-keyword">catch</span> (e) {
            <span class="hljs-comment">// can't JSON serialize exception object here (probably circular reference)</span>
            <span class="hljs-comment">// log what we can...</span>
            <span class="hljs-built_in">console</span>.error(ex);
            <span class="hljs-built_in">console</span>.error(e);
        }

        <span class="hljs-comment">// I like to be stopped while debugging to possibly</span>
        <span class="hljs-comment">// poke around and do further inspection</span>
        debugger;
    }
</code></pre>
<h1>Reference the test control.</h1>
<p>While developing out the application, I like to throw it front and center in the first hub of my apps home page hub control.</p>
<p>Here's an example of how to reference the above control:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>hubPage<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"/pages/hub/hub.css"</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/tests/tests.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>

...page details trimmed for brevity...

            <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hub"</span> <span class="hljs-attribute">data-win-control</span>=<span class="hljs-value">"WinJS.UI.Hub"</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"sectionTests"</span>
                     <span class="hljs-attribute">data-win-control</span>=<span class="hljs-value">"WinJS.UI.HubSection"</span>
                     <span class="hljs-attribute">data-win-options</span>=<span class="hljs-value">"{ isHeaderStatic: true }"</span>
                     <span class="hljs-attribute">data-win-res</span>=<span class="hljs-value">"{ winControl: {'header': 'TestSection'} }"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"sectionTestscontenthost"</span> <span class="hljs-attribute">data-win-control</span>=<span class="hljs-value">"MyApp.Testing.TestsControl"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

...rest of page details trimmed for brevity...

</code></pre>
<p>If you manage to get everything wired up correctly above, when you run the app (<code>F5</code>) your mocha tests should be all set and run automatically. Oh wait, let's not forget to add a mocha test :)...</p>
<pre><code class="language-javascript">describe(<span class="hljs-string">'Mocha test spike'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{

    it(<span class="hljs-string">"should report a passing test"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
      <span class="hljs-comment">// doing nothing should be a passing test</span>
    });

    it(<span class="hljs-string">"should fail on a synchronous exception"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Some test error to make sure mocha reports a test failure"</span>)
    });

    it(<span class="hljs-string">"should fail on an asynchronous exception"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(done)</span></span>{
        setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Some test error to make sure mocha reports an async test failure"</span>)
            done();
        }, <span class="hljs-number">100</span>);
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Some test error to make sure mocha reports a test failure"</span>)
    });

});
</code></pre>
<p>Save the above as your first test file, include it so it runs on startup and verify your tests run and report correctly within the test control.</p>
<p>Happy testing!</p>
</div>

      <a href="/2015/05/running-in-app-mocha-tests-within-winjs/#disqus_thread" data-disqus-identifier="/2015/05/running-in-app-mocha-tests-within-winjs/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/04/look-at-where-definitelytyped-is-now/">Look at where DefinitelyTyped is Now</a></h1>
    <p class="meta">
          <time datetime="2015-04-13T04:18:37.055Z" pubdate data-updated="true">Apr 12th 2015</time>


        <a href="/2015/04/look-at-where-definitelytyped-is-now/#disqus_thread" data-disqus-identifier="/2015/04/look-at-where-definitelytyped-is-now/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><h1>A Little Wondering</h1>
<p>I installed Visual Studio 2015 the other night and was just poking around and stumbled upon the <a href="http://cordova.apache.org/">Cordova</a> Project Template that is provided. This not necessarily that new, but is new to me as I spend most of my time these days working on a Mac doing iOS, Docker (for server-side stuff) and other projects. Though, I miss and still enjoy the benefits of Visual Studio for some projects.</p>
<p>While looking over the project template, I was surprised to see a familiar folder structure <code>typings/cordova/*</code> in the project.</p>
<h2>Why is this folder structure familiar?</h2>
<p>Because I created it almost 2 years ago when I <a href="http://staxmanade.com/2013/02/definitelytyped-typescript-definitions/">threw together</a> a <a href="https://github.com/DefinitelyTyped/NugetAutomation">PowerShell script</a> that chucks <a href="https://github.com/borisyankov/DefinitelyTyped">DefinitelyTyped</a> TypeScript definitions up onto <a href="http://www.nuget.org/">NuGet</a>.</p>
<p>Another example of the folder structure, while I can't say for certain, but I can only guess that when the <a href="https://github.com/winjs/winjs">winjs</a> started converting over to TypeScript that they chose to put their type definitions into the same structure. I won't claim to have inspired it, but would be cool to say I did.</p>
<p>It was a bit surprising and humbling to discover Microsoft had in one of their default templates a reference to some TypeScript type definitions that (while I didn't have anything to do with the creation of the definitions, nor <a href="https://github.com/borisyankov/DefinitelyTyped">DefinitelyTyped</a>) I did created the simple little utility that runs continuously up on <a href="http://teamcity.codebetter.com/">TeamCity.CodeBetter.com</a> and tirelessly updates NuGet packages as they change over on DefinitelyTyped.</p>
<p>This reminded me, that I hadn't checked up on the NuGet user account for DefinitelyTyped in quite a while so I decided to head over to the NuGet.org, take a glance at the account and check out how many downloads there had been?</p>
<p><img src="/images/posts/definitelyTypedNugetAccountApril2015.png" alt="DefinitelyTyped NuGet account"></p>
<p>** HOLY Typings **, there've been over 2 million DT type definitions?</p>
<p>This little ditty was neat to find. I haven't done a ton with TypeScript in a while, but it's quite amazing to see the traction it is starting to gain.</p>
<p>This means that the <a href="http://teamcity.codebetter.com/">TeamCity over at CodeBetter</a> has pretty much been cranking out new and updated DefinitelyTyped TypeScript definitions for almost the last two years, but it's time to re-visit...</p>
<h1>Thanks TeamCity @ CodeBetter</h1>
<p>Before all of the new, cool, and hip online continuous integration systems came to be, one of the only free options for open source was an instance of <a href="https://www.jetbrains.com/teamcity/">JetBrains TeamCity</a> over at <a href="http://codebetter.com/">CodeBetter</a> and I'd like to throw out a big thank you for those at CodeBetter who put the time and effort into hosting this service for many of the .Net OSS projects out there.</p>
<h1>Hello AppVeyor</h1>
<p>I recently ported this job to an <a href="http://www.appveyor.com/">AppVeyor</a> build for the DT project and after a quick round of using their wonderful support to work through a hurdle, I completed a <a href="https://ci.appveyor.com/project/JasonJarrett/nugetautomation">new build</a> at AppVeyor that replicated the one originally hosted on the TeamCity server.</p>
<p>So a HUGE thanks to AppVeyor for creating such great product, and offering free builds to the OSS community.</p>
<p>I'll keep an eye on the new build for a while (before I forget about it) and hopefully it'll run for another long time to come.</p>
<p>Happy TypeScripting!</p>
</div>

      <a href="/2015/04/look-at-where-definitelytyped-is-now/#disqus_thread" data-disqus-identifier="/2015/04/look-at-where-definitelytyped-is-now/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/03/starting-to-build-an-xbox-one-podcast-player/">Starting to build an Xbox One Podcast Player</a></h1>
    <p class="meta">
          <time datetime="2015-03-17T03:47:16.590Z" pubdate data-updated="true">Mar 16th 2015</time>


        <a href="/2015/03/starting-to-build-an-xbox-one-podcast-player/#disqus_thread" data-disqus-identifier="/2015/03/starting-to-build-an-xbox-one-podcast-player/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>I'm writing this email to announce  an early sneak peek into a project I've recently started to put some of my free time towards. Here's a preview from a <a href="http://staxmanade.com/apps/xbox-one-podcast/development/">small landing page</a> I've recently put together.</p>
<blockquote>
<p>If you, like myself, felt like the Xbox One platform was missing an essential Podcast player app, then you have come to the right place.</p>
</blockquote>
<h2>Have any interest in following along with me in this journey?</h2>
<p>At the bottom of <a href="http://staxmanade.com/apps/xbox-one-podcast/development/">this page</a> is a form, if you share your name and email, you'll get early access and an insider's view of the process of building an Xbox One application.</p>
<h3>Learn More <a href="http://staxmanade.com/apps/xbox-one-podcast/development/">here...</a></h3>
</div>

      <a href="/2015/03/starting-to-build-an-xbox-one-podcast-player/#disqus_thread" data-disqus-identifier="/2015/03/starting-to-build-an-xbox-one-podcast-player/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/03/in-app-unit-tests/">In-App Unit Tests</a></h1>
    <p class="meta">
          <time datetime="2015-03-07T06:19:53.583Z" pubdate data-updated="true">Mar 6th 2015</time>


        <a href="/2015/03/in-app-unit-tests/#disqus_thread" data-disqus-identifier="/2015/03/in-app-unit-tests/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>How often do you run your unit tests? Do you even have a test project? Is running your test suite automatic or does it only run when you choose to run them? If the latter is true, then how often do you run them?</p>
<p>For most, running tests is a simple command line tool like <code>gulp test</code> or <code>rake test</code> or a builtin function in your IDE. You may even have your system covered by a Continuous Integration server, or if you want to catch issues earlier possibly even a <a href="http://staxmanade.com/2014/03/rake-psake-grunt-gulp-jake-make-cake/">git pre-commit hook</a>.</p>
<p>One thing we all probably know is the more difficult it is to run your tests, the less often they get run.</p>
<p>What if you're building in an environment that does not allow for easy test automation? What if there are no current command line task runners for the environment you're developing in?</p>
<p>You could spend way too much of your free time/life building a tool that can get the job done for you (cough - <a href="http://statlight.codeplex.com">long live StatLight/Silverlight</a> - cough). I would not necessarily recommend this approach unless you have the spare cycles to contribute a project like this to the broader community.</p>
<p>So, given that there are no external tools to rely on, and you don't want to spend however long it will take to create one for the development environment you are in, how about finding a way to integrate some sort of test run within your existing application?</p>
<p>I have always wanted to setup some unit tests that could run inside of an existing application. If you developed an app that had to ship on lots of devices (thinking android or iOS) and you could ask your users out in the wild to go to the settings page of your app and press a &quot;run tests&quot; button, how awesome would it be if this test run could collect data and send the test results back to you?</p>
<p>This is not a new idea, nor terribly unique, but I've pondered this for quite some time and until recently have not had a project were I was forced to execute on it, until now...</p>
<p>I'm playing with an app that is currently living inside a WinJS (Windows 8) (Metro - err do they call it that anymore?) environment and there are not any CLI tools out there that can be used to automate tests. However, it was easy enough to get <a href="http://mochajs.org/">Mocha</a> running within the app.</p>
<p>With MochaJS in place, I proceeded to setup a WinJS Hub in my hub-based application, after make this testing hub the first hub in my project I now have test that run after every F5 (run) of the application.</p>
<p>This will eventually have to be something I move out of the main landing U.I. when I get closer to shipping my app, but I'm liking the idea of being able to toggle my test U.I. and have them run right within my application, instantly on startup.</p>
<h1>A few benefits of this approach:</h1>
<ul>
<li>It allows me to actually write tests in an application that doesn't natively support a testing runner.</li>
<li>Fewer test gotch-ya's because of environmental reasons</li>
<li>Instant feedback on each run</li>
<li>It's an easy reminder to keep using and driving my development through tests, because the workflow is enabling it (and encouraging it).</li>
<li>(this could be considered a down side but...) since the tests are living within the actual application, I have to be careful to construct my components no to depend too heavily on the environment or configuration as we wouldn't want unit tests to mess up the running application. While it could be seen as a bit of a pain, I'm really liking how this is forcing me to write loosely coupled, highly compossable components that can be easy to swap in/out.</li>
</ul>
<h3>Will I Actually Ship In-App Tests?</h3>
<p>This one is up in the air, but so far I'm of the mind-set that I'll hide the unit-test run from the main hub, place a button deep in some about or setting page and modify the reporter to send send any failed test results, along with some metadata about the environment or system it's running on, like versions, screen size, or whatever is needed...</p>
<p>Happy Testing!</p>
</div>

      <a href="/2015/03/in-app-unit-tests/#disqus_thread" data-disqus-identifier="/2015/03/in-app-unit-tests/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/02/build-command-with-auditory-feedback/">Build Command with Auditory Feedback</a></h1>
    <p class="meta">
          <time datetime="2015-02-28T21:36:32.671Z" pubdate data-updated="true">Feb 28th 2015</time>


        <a href="/2015/02/build-command-with-auditory-feedback/#disqus_thread" data-disqus-identifier="/2015/02/build-command-with-auditory-feedback/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>Here's a short and fun little ditty I'm going to throw up here so I can find it later... <em>(because why would I try to memorize something so simple when I can put it here and share with you all?)</em>.</p>
<h1>My Builds Are Speaking to Me</h1>
<p>Running this command from my Mac command line window gives a nice audio feedback when builds are complete.</p>
<pre><code>(gulp &amp;&amp; say 'super!') || say &quot;what the what?&quot; -v Albert
</code></pre>
<h1>Some Context</h1>
<p>While doing some project work on my Mac lately I'm in the situation where I am constantly running <code>gulp</code> at the command line. This workflow could apply to any CLI build tool like <a href="http://gulpjs.com">gulp</a>, <a href="https://github.com/ruby/rake">rake</a>, make, etc and ya I know I need to spend the time getting <code>gulp watch</code> to work but let's not worry about that for now...</p>
<p>The build is not slow, but it's not fast (taking about 6) seconds. That's just enough time for me to <a href="https://www.youtube.com/watch?v=SSUXXzN26zg">see a squirrel</a> and by the time I realize the build is done, I've forgotten if I actually recently kicked off the build or if the most recent run is out of date from the latest code I've worked on...</p>
<p>So I searched for a quick way to get some auditory feedback when my build was done so I could more efficiently continue the development flow...</p>
<p>I first stumbled upon <a href="https://gist.github.com/taterbase/3154646">this gist</a> which has a NodeJS implementation <code>console.log(&quot;\007&quot;);</code>, but this produces the same beep I get when my unit tests fail - which I don't want when everything's good to go.</p>
<p>Then I found someone mention the mac <a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/say.1.html"><code>say</code></a> command which is WAY better for my needs and I settled on the following little command.</p>
<pre><code>(gulp &amp;&amp; say 'super!') || say &quot;what the what?&quot; -v Albert
</code></pre>
<p>Whats cool about this pattern is I can replace <code>gulp</code> with any other build tool on other projects like <code>rake</code>, <code>grunt</code>, <code>make</code>, etc...</p>
</div>

      <a href="/2015/02/build-command-with-auditory-feedback/#disqus_thread" data-disqus-identifier="/2015/02/build-command-with-auditory-feedback/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/02/mac-equivalent-of-the-windows-registry---ish/">Mac Equivalent of the Windows Registry - ish</a></h1>
    <p class="meta">
          <time datetime="2015-02-23T07:02:12.268Z" pubdate data-updated="true">Feb 22nd 2015</time>


        <a href="/2015/02/mac-equivalent-of-the-windows-registry---ish/#disqus_thread" data-disqus-identifier="/2015/02/mac-equivalent-of-the-windows-registry---ish/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>If you're a long time Windows power user and are recently switching over to the Mac, you may have wondered if there was something analogous to the <a href="http://en.wikipedia.org/wiki/Windows_Registry">Windows Registry</a> .</p>
<p>However, if you've always been more of a Mac user, don't run away just yet as you may learn something.</p>
<p>In case you don't know what the <a href="http://en.wikipedia.org/wiki/Windows_Registry">Windows Registry</a> is, here is a short definition from our good ol' friend <a href="http://en.wikipedia.org/wiki/Windows_Registry">Wikipedia</a>.</p>
<blockquote>
<p>Windows Registry is a hierarchical database that stores configuration settings and options on Microsoft Windows operating systems. It contains settings for low-level operating system components and for applications running on the platform that have opted to use the Registry.</p>
</blockquote>
<p>You have probably already figured that since it's called the <code>Windows Registry</code> that there is likely not a <code>Mac Registry</code> that looks/operates the same way.</p>
<p>You are correct; however, where do all of the system and applications settings get stored if there is no registry?</p>
<p>If the Windows Registry is a place where system and application settings are stored, then the Mac equivalent of the Windows Registry would be a series of <code>.plist</code> files in several preferences folder on the Mac.</p>
<p>While researching how to automate bootstrapping my Mac development computer, I stumbled upon large number of <code>.plist</code> files in several folders that correlate to the installed applications and system settings. And <img class="emoji" title="boom" alt="boom" src="https://assets.github.com/images/icons/emoji/unicode/d83d.png" height="20" width="20" align="absmiddle"> BOOM <img class="emoji" title="boom" alt="boom" src="https://assets.github.com/images/icons/emoji/unicode/d83d.png" height="20" width="20" align="absmiddle"> just like that I discovered the holy grail of my Mac's system and application settings - kind of like the first time lift up the curtain and discover the Windows Registry.</p>
<h1>What are <code>.plist</code> files?</h1>
<p>A <code>.plist</code> file is a configuration file that contains a list of properties in either plain text or binary format. I'll go into more later about how to read and update values in these files later in the post.</p>
<p>For more info on plist files, <a href="http://en.wikipedia.org/wiki/Property_list">check out the Wikipedia page...</a></p>
<h1>Where can I find plist files?</h1>
<p>I know of at least 2 locations that host the common system and application <code>.plist</code> files.</p>
<p>The first one is user specific and is in the following location:</p>
<pre><code>~/Library/Preferences/
</code></pre>
<p>In my case (since my user name is <code>jason</code>)</p>
<pre><code>/Users/jason/Library/Preferences/
</code></pre>
<p>The second location one is at the root of the system:</p>
<pre><code>/Library/Preferences/
</code></pre>
<p>If you look into these folders you'll see a large number of plist files that follow reverse domain name convention (like <code>com.apple.sample</code>).</p>
<p>Here are some (not all) examples of system configuration plist files:</p>
<pre><code>com<span class="hljs-class">.apple</span><span class="hljs-class">.ActivityMonitor</span><span class="hljs-class">.plist</span>
com<span class="hljs-class">.apple</span><span class="hljs-class">.AddressBook</span><span class="hljs-class">.plist</span>
com<span class="hljs-class">.apple</span><span class="hljs-class">.finder</span><span class="hljs-class">.plist</span>
com<span class="hljs-class">.apple</span><span class="hljs-class">.preference</span><span class="hljs-class">.general</span><span class="hljs-class">.plist</span>
com<span class="hljs-class">.apple</span><span class="hljs-class">.TextEdit</span><span class="hljs-class">.plist</span>
com<span class="hljs-class">.apple</span><span class="hljs-class">.Safari</span><span class="hljs-class">.plist</span>
</code></pre>
<p>In the same folder as the sample configuration files listed above are where you can find <code>plist</code> files that are associated to applications installed on the system.</p>
<pre><code>com<span class="hljs-class">.apple</span><span class="hljs-class">.dt</span><span class="hljs-class">.Xcode</span><span class="hljs-class">.plist</span>
com<span class="hljs-class">.google</span><span class="hljs-class">.Chrome</span><span class="hljs-class">.plist</span>
org<span class="hljs-class">.herf</span><span class="hljs-class">.Flux</span><span class="hljs-class">.plist</span>
com<span class="hljs-class">.skype</span><span class="hljs-class">.skype</span><span class="hljs-class">.plist</span>
</code></pre>
<p>Now that we can find system and application configuration <code>plist</code> files, if you try to open them in a text editor you may notice that many of them are in a binary format which would be challenging to read and understand, let alone edit.</p>
<h1>How do I read these files?</h1>
<p>The Mac comes with a command line utility called <a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/defaults.1.html">defaults</a> for reading and writing to these <code>.plist</code> files.</p>
<p>If you take an example from the above list of plist files, you can, at the command prompt type the following:</p>
<p><code>defaults read com.apple.fin&lt;tab&gt;</code> (where <code>&lt;tab&gt;</code> is the tab key that allows tab completion of the rest of the property list format) and be sure to exclude the <code>.plist</code> of the end so:</p>
<pre><code>defaults read com.apple.finder
</code></pre>
<p>will print out all of the properties to the console so you can inspect what's there.</p>
<p>You can pipe this output to <a href="http://en.wikipedia.org/wiki/Grep">grep</a> and filter for a setting name when doing searches. Once you've found a property name you want to look at you can pass it into the <code>defaults read</code> command to get the value of that specific property.</p>
<h4>Example reading a single property:</h4>
<pre><code>defaults read com.apple.finder AppleShowAllExtensions
</code></pre>
<h1>How to change property list settings?</h1>
<p><img class="emoji" title="warning" alt="warning" src="https://assets.github.com/images/icons/emoji/unicode/26a0.png" height="20" width="20" align="absmiddle"> WARNING <img class="emoji" title="warning" alt="warning" src="https://assets.github.com/images/icons/emoji/unicode/26a0.png" height="20" width="20" align="absmiddle"></p>
<p>Just like modifying the Windows Registry can mess up your system, you need to take care modifying system or application <code>plist</code> settings.</p>
<p><img class="emoji" title="warning" alt="warning" src="https://assets.github.com/images/icons/emoji/unicode/26a0.png" height="20" width="20" align="absmiddle"> WARNING <img class="emoji" title="warning" alt="warning" src="https://assets.github.com/images/icons/emoji/unicode/26a0.png" height="20" width="20" align="absmiddle"></p>
<p>Most of these settings can be changed by navigating to the application or system's respective preferences U.I. and just changing settings manually. However, the whole reason I ran down this path was to learn how to automate these setting changes.</p>
<p>When I first tried to change the settings I tried manually modifying the plist files with a GUI tool built into the Xcode developer tools.</p>
<p>However, and I have yet to understand the internals of this, after I made the changes to the plist file they would automatically get overwritten after a few seconds. So it seems that there is some official source of these values somewhere that for some reason overwrite the ones in these folder. <strong><em>I probably have that all wrong - but was an observation I had.</em></strong></p>
<h3>So if my understanding above is somewhat correct, how did I update the source?</h3>
<p>Similar to reading property list values you can use the <a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/defaults.1.html">defaults</a> command line tool to <code>write</code> changes back to the <code>.plist</code> files.</p>
<p>As an example, here's how I update <a href="http://support.apple.com/en-us/HT201732">Finder</a> to show file extensions.</p>
<pre><code>defaults write com.apple.finder AppleShowAllExtensions -boolean true
</code></pre>
<p>The configuration options are now endless.</p>
<h1>In summary:</h1>
<p>Using my new knowledge that app and system settings can be found in both <code>/Library/Preferences</code> and <code>~/Library/Preferences</code> and I can use the command line tool <a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/defaults.1.html">defaults</a> to read/write to understand and update settings.</p>
<p>I can now create a simple <code>.sh</code> script that allows me to pre-configure a new development machine with all of the settings I would like.</p>
<p>Now, each time I catch myself trying to use an application's preferences U.I. I stop myself and try to find that setting in a plist file and create a CLI command that I can save into my development setup script.</p>
<p>Happy Mac Settings Hacking!</p>
</div>

      <a href="/2015/02/mac-equivalent-of-the-windows-registry---ish/#disqus_thread" data-disqus-identifier="/2015/02/mac-equivalent-of-the-windows-registry---ish/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/02/fail-fast-with-ios-images/">Fail Fast With iOS Images</a></h1>
    <p class="meta">
          <time datetime="2015-02-12T17:06:12.682Z" pubdate data-updated="true">Feb 12th 2015</time>


        <a href="/2015/02/fail-fast-with-ios-images/#disqus_thread" data-disqus-identifier="/2015/02/fail-fast-with-ios-images/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><h1>Problem: iOS app has unwieldy, unorganized and poorly named images</h1>
<p>I've been working on a team that took over a good sized legacy iOS project where it's usage of images became a little unwieldy. Between the various app clones (targets), shared images, and images that aren't even used we'd like to reorganize, rename and just clean up the app in general.</p>
<p>But, one thing that makes me nervous is how easy it is to rename an image, forget or miss a magic-string that tries to load that image and now we've introduced a bug that may be difficult to diagnose or even discover that we introduced it.</p>
<h1>Let's fail fast?</h1>
<p>Failing fast in this context means, how can we, during development and testing time quickly fail when running the app to determine where an image attempting to be loaded does not.</p>
<blockquote>
<p>Ideally we wouldn't even have these magic-strings to deal with. Using some tool to automatically generate a compile-time safe construct that we can use to load images. However until both A) I find the darn tool that I once-upon stumbled across that does this (please leave a comment to remind me if you find it before I do...) and B) we get sed tool integrated, I threw this little helper to quickly fail fast and help us find broken image references within our iOS applications.</p>
</blockquote>
<h1>How does it work?</h1>
<p>It's a simple little <a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html">Category</a> that overrides the <code>imageNamed:</code> selector of <code>UIImage</code> and if the original cannot load an image (returns <code>nil</code>) then it will fail with a helpful assertion message.</p>
<p>This utility allowed us to quickly find images that were missing while doing our big clean sweep.</p>
<h1>How to integrate?</h1>
<p>It should be as simple as adding the <code>.h</code> &amp; <code>.m</code> files to your project and their respective targets and you should be off to the races.</p>
<p><script src="https://gist.github.com/6f462e1829a9976783c0.js?file=UIImage%2BFailFast.h"></script></p>
<p><script src="https://gist.github.com/6f462e1829a9976783c0.js?file=UIImage%2BFailFast.m"></script></p>
<h1>For DEBUG mode only...</h1>
<p>If you look closely you'll notice <code>#if DEBUG</code> wraps the implementation so when we ship to the app store we don't end up causing a crash in production if a missing image sneaks by.</p>
<p>Happy Missing Image Bashing!</p>
</div>

      <a href="/2015/02/fail-fast-with-ios-images/#disqus_thread" data-disqus-identifier="/2015/02/fail-fast-with-ios-images/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/02/how-to-diff-two-xcode-targets/">How to Diff Two Xcode Targets</a></h1>
    <p class="meta">
          <time datetime="2015-02-11T01:23:02.196Z" pubdate data-updated="true">Feb 10th 2015</time>


        <a href="/2015/02/how-to-diff-two-xcode-targets/#disqus_thread" data-disqus-identifier="/2015/02/how-to-diff-two-xcode-targets/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>If you've ever used different Xcode targets to manage different version or clones of a similar app and then had to debug why one target builds while another doesn't, finding a way to diff two targets was always challenging.</p>
<p>Sometimes it's because you forgot to check a box including a new class in multiple targets, or maybe you've integrated a new framework with <code>targetA</code> but forgot to include the framework reference in the Build Phases for <code>targetB</code>.</p>
<blockquote>
<p>I'm actually hoping that I just haven't learned the obvious way to resolve these problems and you (dear reader) will leave a comment telling me how simple it is to do with the built in tools. Until then, here's something that I hope will help others that are trying to see what two Xcode targets have different between them.</p>
</blockquote>
<h1>How about a little CLI tool: <a href="https://github.com/staxmanade/diffXcodeTargets">diffXcodeTargets</a></h1>
<p><a href="https://github.com/staxmanade/diffXcodeTargets">diffXcodeTargets</a> is a command line utility I threw together that allows you to visualize the differences between two Xcode project targets using a diff tool.</p>
<h1>Install it with <a href="https://npm.org">npm</a></h1>
<pre><code>npm install -g diffxcodetargets
</code></pre>
<h1>How to use it?</h1>
<p>You can first call it by passing in the path to your project file and no targets and it will print out what targets are available.</p>
<pre><code>&gt; diffXcodeTargets ./myProject.xcodeproj/project.pbxproj

Could not find TargetA ''. Possible targets are:
  - targetA
  - targetB
</code></pre>
<p>Now you know your available targets and you can call it with the two targets you want to diff:</p>
<pre><code>diffXcodeTargets ./myProject.xcodeproj/project.pbxproj targetA targetB
</code></pre>
<h1>How does it work?</h1>
<p>If you're curious how this tool does it's job it is actually quite simple and would love to hear any feedback...</p>
<p><a href="https://github.com/staxmanade/diffXcodeTargets"> diffXcodeTargets</a> uses the <a href="https://npmjs.org/packages/xcode">xcode</a> npm module to read/parse xcode projects and then <a href="htts://github.com/approvals/Approvals.NodeJS">approvals</a> to show a difftool with two different files.</p>
<h1>What's missing?</h1>
<p>I threw this together quickly to help diagnose some issues with a project I was working on. It does not yet support all of the various scenarios that may be needed when diffing two Xcode targets, but if you have any suggestions or ideas feel free to leave a <a href="htts://github.com/staxmanade/diffXcodeTargets/issues">github issue</a>.</p>
<p>Happy Diffing!</p>
</div>

      <a href="/2015/02/how-to-diff-two-xcode-targets/#disqus_thread" data-disqus-identifier="/2015/02/how-to-diff-two-xcode-targets/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/02/how-to-remove-files-in-git-that-should-have-been-ignored/">How to Remove Files in Git that Should Have Been Ignored</a></h1>
    <p class="meta">
          <time datetime="2015-02-10T00:50:58.037Z" pubdate data-updated="true">Feb 9th 2015</time>


        <a href="/2015/02/how-to-remove-files-in-git-that-should-have-been-ignored/#disqus_thread" data-disqus-identifier="/2015/02/how-to-remove-files-in-git-that-should-have-been-ignored/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>If sometimes come upon existing applications that use <a href="http://git-scm.com">Git</a> where files were added to the repository that should have originally been ignored. Sometimes this is because the <code>.gitignore</code> file is missing, or because certain rules were not include that probably should have been from the start.</p>
<p>There are ways in <code>git</code> to completely rewrite history to <a href="http://gitready.com/beginner/2009/03/06/ignoring-doesnt-remove-a-file.html">remove all traces</a> of the file, however most of the time, it's good to leave a commit saying <code>removed files that should have originally been ignored</code> as a good starting point (depending on the project/repo).</p>
<p>Here is a small workflow I've found to be pretty effective in helping to clean up a repository, or at least let you know what files would have originally been ignored had you setup a <code>.gitignore</code> file with some project standards...</p>
<h1>Create a well meaning <code>.gitignore</code> file</h1>
<p>You can go to <a href="https://www.gitignore.io">gitignore.io</a> and type some words like <code>xcode</code>, <code>node</code>, <code>osx</code>, or whatever platform/IDE you use for development and generate a pretty good <a href="http://git-scm.com/docs/gitignore"><code>.gitignore</code></a> base file.</p>
<h1>Create or Update local <code>.gitignore</code></h1>
<p>Once you've update your local <code>.gitignore</code> file with the rules you'd like to use, you can use the below to commit your changes;</p>
<pre><code>git add .gitignore
git commit -m 'updating .gitignore'
</code></pre>
<h1>Remove the files that should have originally been ignored.</h1>
<p>Now we want to figure out what files may have been added originally that shouldn't be there. You can run the following two commands to see which files to find this out.</p>
<pre><code>git rm --cached -r .
git add .
</code></pre>
<p>Now if you <code>git status</code> you can see what files should probably be deleted from the git repo and using the newly updated <code>.gitignore</code> file will now be ignored going forward.</p>
<p>Go ahead an commit these changes (assuming you're happy with what is being deleted and ignored).</p>
<p>Happy Gitting!</p>
</div>

      <a href="/2015/02/how-to-remove-files-in-git-that-should-have-been-ignored/#disqus_thread" data-disqus-identifier="/2015/02/how-to-remove-files-in-git-that-should-have-been-ignored/">(Comments)</a>
    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2015/02/approval-tests---command-line-tool--cli-/">Approval Tests - Command Line Tool (CLI)</a></h1>
    <p class="meta">
          <time datetime="2015-02-08T05:29:48.180Z" pubdate data-updated="true">Feb 7th 2015</time>


        <a href="/2015/02/approval-tests---command-line-tool--cli-/#disqus_thread" data-disqus-identifier="/2015/02/approval-tests---command-line-tool--cli-/">(Comments)</a>
    </p>
</header>
<div class="entry-content"><p>In <a href="http://staxmanade.com/2015/01/approval-tests---overview/">my previous post</a> I introduced <a href="http://approvaltests.com">Approval Tests</a> using the <a href="https://github.com/approvals/Approvals.NodeJS">Approvals.NodeJS</a> variant of the tool.</p>
<p>In this post I'd like to go over how you can use the command line version of <a href="https://github.com/approvals/Approvals.NodeJS">Approvals.NodeJS</a> for several different scenarios.</p>
<h1>First thing first (How to Install)</h1>
<p>Globally install <code>approvals</code> via <a href="https://www.npmjs.com/">npm</a>.</p>
<pre><code>npm install -g approvals
</code></pre>
<p>Now that you have it installed, let's go over some scenarios that you can use the approvals tool.</p>
<h1>Scenario 1: Compare JSON files downloaded from a web server.</h1>
<p>Let's say you want to see a quick file diff between two api requests.</p>
<p>You can use <code>curl</code> to download the file and pipe (<code>|</code>) it to the <code>approvals</code> CLI tool. We give it a name parameter which is used to generate the file name used to save to.</p>
<p>So if you were to run:</p>
<pre><code>curl <span class="hljs-string">https:</span><span class="hljs-comment">//api.github.com/orgs/approvals | approvals githubOrg</span>
</code></pre>
<p>This would generate two files:</p>
<p><code>githubOrg.received.txt</code> which at the time of this writing would look like:</p>
<pre><code>{
  "<span class="hljs-attribute">login</span>": <span class="hljs-value"><span class="hljs-string">"approvals"</span></span>,
  "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">36907</span></span>,
  "<span class="hljs-attribute">url</span>": <span class="hljs-value"><span class="hljs-string">"https://api.github.com/orgs/approvals"</span></span>,
  "<span class="hljs-attribute">repos_url</span>": <span class="hljs-value"><span class="hljs-string">"https://api.github.com/orgs/approvals/repos"</span></span>,
  "<span class="hljs-attribute">events_url</span>": <span class="hljs-value"><span class="hljs-string">"https://api.github.com/orgs/approvals/events"</span></span>,
  "<span class="hljs-attribute">members_url</span>": <span class="hljs-value"><span class="hljs-string">"https://api.github.com/orgs/approvals/members{/member}"</span></span>,
  "<span class="hljs-attribute">public_members_url</span>": <span class="hljs-value"><span class="hljs-string">"https://api.github.com/orgs/approvals/public_members{/member}"</span></span>,
  "<span class="hljs-attribute">avatar_url</span>": <span class="hljs-value"><span class="hljs-string">"https://avatars.githubusercontent.com/u/36907?v=3"</span></span>,
  "<span class="hljs-attribute">description</span>": <span class="hljs-value"><span class="hljs-literal">null</span></span>,
  "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-literal">null</span></span>,
  "<span class="hljs-attribute">company</span>": <span class="hljs-value"><span class="hljs-literal">null</span></span>,
  "<span class="hljs-attribute">blog</span>": <span class="hljs-value"><span class="hljs-string">"http://approvaltests.com"</span></span>,
  "<span class="hljs-attribute">location</span>": <span class="hljs-value"><span class="hljs-literal">null</span></span>,
  "<span class="hljs-attribute">email</span>": <span class="hljs-value"><span class="hljs-literal">null</span></span>,
  "<span class="hljs-attribute">public_repos</span>": <span class="hljs-value"><span class="hljs-number">13</span></span>,
  "<span class="hljs-attribute">public_gists</span>": <span class="hljs-value"><span class="hljs-number">0</span></span>,
  "<span class="hljs-attribute">followers</span>": <span class="hljs-value"><span class="hljs-number">0</span></span>,
  "<span class="hljs-attribute">following</span>": <span class="hljs-value"><span class="hljs-number">0</span></span>,
  "<span class="hljs-attribute">html_url</span>": <span class="hljs-value"><span class="hljs-string">"https://github.com/approvals"</span></span>,
  "<span class="hljs-attribute">created_at</span>": <span class="hljs-value"><span class="hljs-string">"2008-11-27T06:03:58Z"</span></span>,
  "<span class="hljs-attribute">updated_at</span>": <span class="hljs-value"><span class="hljs-string">"2014-12-28T03:02:33Z"</span></span>,
  "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"Organization"</span>
</span>}
</code></pre>
<p>and an empty <code>githubOrg.approved.txt</code> file.</p>
<p>Note when you first run this command you are prompted with the <code>received</code> file compared to the empty <code>approved</code> files; however, on an initial run, you can use the <code>--forceapproveall</code> argument to avoid the diff step and force all the contents of the <code>received</code> file into the <code>approved</code> file.</p>
<p>Now if the remote file were to change on you and you run the below command again:</p>
<pre><code>curl <span class="hljs-string">https:</span><span class="hljs-comment">//api.github.com/orgs/approvals | approvals githubOrg</span>
</code></pre>
<p>You would get a diff between the the originally <code>approved</code> file and the newly downloaded file.</p>
<h1>Scenario 2:</h1>
<p>Ok, well I actually have another great scenario for using the approvals CLI, but I believe it deserves it's own post as I'm going to introduce some nifty configuration on a Mac that I've used to setup my own development servers automatically.</p>
<p>Until next time...</p>
</div>

      <a href="/2015/02/approval-tests---command-line-tool--cli-/#disqus_thread" data-disqus-identifier="/2015/02/approval-tests---command-line-tool--cli-/">(Comments)</a>
    </article>
  <div class="pagination">
      <a class="prev" href="/blog/pages/2/">&larr; Older</a>
    <a href="/blog/archives">Blog Archives</a>
  </div>
</div>

<aside class="sidebar">
    <section>
	<!-- Begin MailChimp Signup Form -->
	<link href="//cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
	<style type="text/css">
		#mc_embed_signup input.button {
			width: inherit;
			padding-left: 10px;
			padding-right: 10px;
		}
	</style>
	<div id="mc_embed_signup">
		<form action="http://staxmanade.us8.list-manage1.com/subscribe/post?u=9a6f3f89fc58e1bbbddf5c3f8&amp;id=9e5406be65" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
			<h1>Subscribe</h1>
			<p>Enter your email to recive recent blog posts and other news</p>
			<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
		    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
		    <div style="position: absolute; left: -5000px;"><input type="text" name="b_9a6f3f89fc58e1bbbddf5c3f8_9e5406be65" value=""></div>
			<div class=""><input type="submit" value="Subscribe to blog" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
		</form>
	</div>
	<!--End mc_embed_signup-->
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
      <li class="post">
        <a href="/2015/05/running-in-app-mocha-tests-within-winjs/">Running in-app mocha tests within WinJS</a>
      </li>
      <li class="post">
        <a href="/2015/04/look-at-where-definitelytyped-is-now/">Look at where DefinitelyTyped is Now</a>
      </li>
      <li class="post">
        <a href="/2015/03/starting-to-build-an-xbox-one-podcast-player/">Starting to build an Xbox One Podcast Player</a>
      </li>
      <li class="post">
        <a href="/2015/03/in-app-unit-tests/">In-App Unit Tests</a>
      </li>
      <li class="post">
        <a href="/2015/02/build-command-with-auditory-feedback/">Build Command with Auditory Feedback</a>
      </li>
      <li class="post">
        <a href="/2015/02/mac-equivalent-of-the-windows-registry---ish/">Mac Equivalent of the Windows Registry - ish</a>
      </li>
      <li class="post">
        <a href="/2015/02/fail-fast-with-ios-images/">Fail Fast With iOS Images</a>
      </li>
  </ul>
  <a href="/blog/archives/">More posts...</a>
</section>

<section>
  <h1>GitHub: <a href="https://github.com/staxmanade">@staxmanade</a></h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/js/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'staxmanade',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/js/github.js" type="text/javascript"> </script>
</section>


</aside>

    </div>
</div>
<footer role="contentinfo"><p>
  Copyright &copy; 2015 - Jason Jarrett - <span class="credit">Powered by <a href="http://togglejs.github.io">Toggle</a></span>
</p>

</footer>
  



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



</body>
</html>
