<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Developing on Staxmanade - Developing on Staxmanade</title>
  <meta name="author" content="Jason Jarrett">


   <meta name="description" content="Jason Jarrett&#x27;s Blog and Website.">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <link rel="canonical" href="http://staxmanade.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/DevelopingOnStaxmande" rel="alternate" title="Developing on Staxmanade" type="application/atom+xml">
    <script src="/js/modernizr-2.0.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./js/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/octopress.js" type="text/javascript"></script>
    <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1017448-6']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</head>

<body   >
<header role="banner"><hgroup>
  <h1><a href="/">Developing on Staxmanade</a></h1>
</hgroup>

</header>
<nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/DevelopingOnStaxmande" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
</ul>
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:staxmanade.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
<div id="main">
    <div id="content">
        
<div class="blog-index">
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2008/11/db4o-with-systemtransactionstransaction/">Db4o with System.Transactions.TransactionScope</a></h1>
    <p class="meta">
          <time datetime="2008-11-30T22:15:00.000Z" pubdate data-updated="true">Nov 30th 2008</time>


        
    </p>
</header>
<div class="entry-content">
<div class='post'>
<p>After after reading Rob Conery's post <a href="http://blog.wekeroad.com/blog/crazy-talk-reducing-orm-friction/">http://blog.wekeroad.com/blog/crazy-talk-reducing-orm-friction/</a>. I thought I'd give it a whirl and didn't get very far before I ran into my first roadblock. DB4O version 7.4.68 doesn't support any .NET System.Transaction. (For what I could tell...)</p>  <p>Below I'll explain how I pieced this together and made it work (At least an alpha type version to work...)</p>  <p>Assume I've followed almost everything Rob has in his blog for setup (IRepository, DB4O container class, ObjectRepository&lt;T&gt;, etc...)</p>  <p>My first unit test was the following </p>  <p>[Test]   <br /><span style="color: #0000ff">public</span> <span style="color: #0000ff">void</span> CanRollbackSavedObjectInRepository()    <br />{    <br />&#160; <span style="color: #0000ff">using</span> (TransactionScope scope = <span style="color: #0000ff">new</span> TransactionScope())    <br />&#160; {    <br />&#160;&#160;&#160; _repository.Save(_dummyObject);    <br />&#160;&#160;&#160; <span style="color: #008000">//NO: scope.Complete(); Implied rollback</span>    <br />&#160; }    <br />    <br />&#160; <span style="color: #0000ff">if</span> (_repository.GetAll().Count() &gt; 0)    <br />&#160;&#160;&#160; Assert.Fail(&quot;<span style="color: #8b0000">TransactionScope Failed - count[</span>&quot; + _repository.GetAll().Count().ToString() + &quot;<span style="color: #8b0000">]</span>&quot;);    <br />}    <br /></p>  <p>And the above test fails...</p>  <p>Next was some research to figure out why this was failing... I didn't find much out there, except for some pending TODO's on the DB4O project.</p>  <p><a href="http://tracker.db4o.com/browse/COR-1376">http://tracker.db4o.com/browse/COR-1376</a>    <br /><a href="http://tracker.db4o.com/browse/COR-1143">http://tracker.db4o.com/browse/COR-1143</a></p>  <p>&#160;</p>  <p>So then it was off to figure out how frameworks implemented there resource managers to hook into the System.Transaction goo...</p>  <p>(Long story short, and several trial and error failures) The best of the solutions I found was in this open source code base. (<a href="http://code.google.com/p/uniframework/">http://code.google.com/p/uniframework/</a>)</p>  <p>In that project there was a class that managed the enlistment of a transaction, and some examples of how to use it...</p>  <p><a href="http://code.google.com/p/uniframework/source/browse/trunk/sources/Uniframework/Db4o/Db4oEnlist.cs">http://code.google.com/p/uniframework/source/browse/trunk/sources/Uniframework/Db4o/Db4oEnlist.cs</a> is the enlistment class.</p>  <p>&#160;</p>  <p>I placed this Db4oEnlist class as a private nested class inside the ObjectRepository&lt;T&gt; since I can't see why it would be used anywhere else...</p>  <p>And below is how I use them in the ObjectRepository&lt;T&gt;.</p>  <pre><span style="color: #0000ff">public</span> <span style="color: #0000ff">void</span> Delete(T item)<br />{<br />  Db4oEnlist enlist = <span style="color: #0000ff">new</span> Db4oEnlist(Container, item);<br />  <span style="color: #0000ff">bool</span> inTransaction = Enlist(enlist);<br />  Container.Delete(item);<br />  <span style="color: #0000ff">if</span> (!inTransaction)<br />    Container.Commit();<br />}</pre><br /><br /><pre><span style="color: #0000ff">public</span> <span style="color: #0000ff">void</span> Save(T item)<br />{<br />  Db4oEnlist enlist = <span style="color: #0000ff">new</span> Db4oEnlist(Container, item);<br />  <span style="color: #0000ff">bool</span> inTransaction = Enlist(enlist);<br />  Container.Store(item);<br />  <span style="color: #0000ff">if</span> (!inTransaction)<br />    Container.Commit();<br />}</pre><br /><br /><p>&#160;</p><br /><br /><p>We first create an instance of the Db4OEnlist class with the current container. This class implements the IEnlistmentNotification interface and knows how to commit/rollback/etc on the object database. We then use the private helper method Enlist() giving it the Db4OEnlist instance. This helper method enlists the sequence in any existing transactions returning if it enlisted in a transaction or not.</p><br /><br /><pre><span style="color: #0000ff">private</span> <span style="color: #0000ff">static</span> <span style="color: #0000ff">bool</span> Enlist(Db4oEnlist enlist)<br />{<br />  System.Transactions.Transaction currentTx = System.Transactions.Transaction.Current;<br />  <span style="color: #0000ff">if</span> (currentTx != <span style="color: #0000ff">null</span>)<br />  {<br />    currentTx.EnlistVolatile(enlist, EnlistmentOptions.None);<br />    <span style="color: #0000ff">return</span> <span style="color: #0000ff">true</span>;<br />  }<br />  <span style="color: #0000ff">return</span> <span style="color: #0000ff">false</span>;<br />}</pre><br /><br /><p>If we aren't in a transaction we commit the action right away, however if we are in the transaction we let the .net System.Transaction framework take care of committing the transaction.</p><br /><br /><p>Once I found the example in the &quot;uniframework&quot; it came together rather quickly...</p><br /><br /><p>Below is the ObjectRepository&lt;T&gt; I'm going forward with on testing Rob's idea of developing an application using the object database first... (we'll see how it goes)</p><br /><br /><pre><span style="color: #0000ff">public</span> <span style="color: #0000ff">class</span> ObjectRepository&lt;T&gt; :<br />  IRepository&lt;T&gt; where T : <span style="color: #0000ff">class</span><br />{<br />  <span style="color: #808080">/// &lt;summary&gt;</span><br />  <span style="color: #808080">/// Returns all T records in the repository</span><br />  <span style="color: #808080">/// &lt;/summary&gt;</span><br />  <span style="color: #0000ff">public</span> IQueryable&lt;T&gt; GetAll()<br />  {<br />    <span style="color: #0000ff">return</span> (from T items <span style="color: #0000ff">in</span> Container<br />        select items).AsQueryable();<br />  }<br /><br />  <span style="color: #808080">/// &lt;summary&gt;</span><br />  <span style="color: #808080">/// Finds an item using a passed-in expression lambda</span><br />  <span style="color: #808080">/// &lt;/summary&gt;</span><br />  <span style="color: #0000ff">public</span> IQueryable&lt;T&gt; Find(System.Linq.Expressions.Expression&lt;Func&lt;T, <span style="color: #0000ff">bool</span>&gt;&gt; expression)<br />  {<br />    <span style="color: #0000ff">return</span> GetAll().Where(expression);<br />  }<br /><br />  <span style="color: #808080">/// &lt;summary&gt;</span><br />  <span style="color: #808080">/// Saves an item to the database</span><br />  <span style="color: #808080">/// &lt;/summary&gt;</span><br />  <span style="color: #808080">/// &lt;param name=&quot;item&quot;&gt;&lt;/param&gt;</span><br />  <span style="color: #0000ff">public</span> <span style="color: #0000ff">void</span> Save(T item)<br />  {<br />    Db4oEnlist enlist = <span style="color: #0000ff">new</span> Db4oEnlist(Container, item);<br />    <span style="color: #0000ff">bool</span> inTransaction = Enlist(enlist);<br />    Container.Store(item);<br />    <span style="color: #0000ff">if</span> (!inTransaction)<br />      Container.Commit();<br />  }<br /><br />  <span style="color: #808080">/// &lt;summary&gt;</span><br />  <span style="color: #808080">/// Deletes an item from the database</span><br />  <span style="color: #808080">/// &lt;/summary&gt;</span><br />  <span style="color: #808080">/// &lt;param name=&quot;item&quot;&gt;&lt;/param&gt;</span><br />  <span style="color: #0000ff">public</span> <span style="color: #0000ff">void</span> Delete(T item)<br />  {<br />    Db4oEnlist enlist = <span style="color: #0000ff">new</span> Db4oEnlist(Container, item);<br />    <span style="color: #0000ff">bool</span> inTransaction = Enlist(enlist);<br />    Container.Delete(item);<br />    <span style="color: #0000ff">if</span> (!inTransaction)<br />      Container.Commit();<br />  }<br /><br />  <span style="color: #0000ff">private</span> <span style="color: #0000ff">static</span> <span style="color: #0000ff">bool</span> Enlist(Db4oEnlist enlist)<br />  {<br />    System.Transactions.Transaction currentTx = System.Transactions.Transaction.Current;<br />    <span style="color: #0000ff">if</span> (currentTx != <span style="color: #0000ff">null</span>)<br />    {<br />      currentTx.EnlistVolatile(enlist, EnlistmentOptions.None);<br />      <span style="color: #0000ff">return</span> <span style="color: #0000ff">true</span>;<br />    }<br />    <span style="color: #0000ff">return</span> <span style="color: #0000ff">false</span>;<br />  }<br /><br />  <span style="color: #0000ff">private</span> <span style="color: #0000ff">static</span> IObjectContainer Container<br />  {<br />    <span style="color: #0000ff">get</span><br />    {<br />      <span style="color: #0000ff">return</span> ServiceLocator.Current.GetInstance&lt;IObjectContainer&gt;();<br />    }<br />  }<br /><br />  <span style="color: #808080">/// &lt;summary&gt;</span><br />  <span style="color: #808080">/// Provides support for System.Transaction integration</span><br />  <span style="color: #808080">/// &lt;/summary&gt;</span><br />  <span style="color: #0000ff">private</span> <span style="color: #0000ff">class</span> Db4oEnlist : IEnlistmentNotification<br />  {<br />    <span style="color: #0000ff">private</span> IObjectContainer container;<br />    <span style="color: #0000ff">private</span> <span style="color: #0000ff">object</span> oldItem;<br /><br />    <span style="color: #808080">/// &lt;summary&gt;</span><br />    <span style="color: #808080">/// Initializes a new instance of the &lt;see cref=&quot;db4oEnlist&quot;/&gt; class.</span><br />    <span style="color: #808080">/// &lt;/summary&gt;</span><br />    <span style="color: #808080">/// &lt;param name=&quot;database&quot;&gt;The database.&lt;/param&gt;</span><br />    <span style="color: #808080">/// &lt;param name=&quot;item&quot;&gt;The item.&lt;/param&gt;</span><br />    <span style="color: #0000ff">public</span> Db4oEnlist(IObjectContainer container, <span style="color: #0000ff">object</span> item)<br />    {<br />      <span style="color: #0000ff">this</span>.container = container;<br />      oldItem = item;<br />    }<br /><br />    #region IEnlistmentNotification<br /><br />    <span style="color: #808080">/// &lt;summary&gt;</span><br />    <span style="color: #808080">/// Commits the specified enlistment.</span><br />    <span style="color: #808080">/// &lt;/summary&gt;</span><br />    <span style="color: #808080">/// &lt;param name=&quot;enlistment&quot;&gt;The enlistment.&lt;/param&gt;</span><br />    <span style="color: #0000ff">public</span> <span style="color: #0000ff">void</span> Commit(Enlistment enlistment)<br />    {<br />      container.Commit();<br />      oldItem = <span style="color: #0000ff">null</span>;<br />    }<br /><br />    <span style="color: #808080">/// &lt;summary&gt;</span><br />    <span style="color: #808080">/// Ins the doubt.</span><br />    <span style="color: #808080">/// &lt;/summary&gt;</span><br />    <span style="color: #808080">/// &lt;param name=&quot;enlistment&quot;&gt;The enlistment.&lt;/param&gt;</span><br />    <span style="color: #0000ff">public</span> <span style="color: #0000ff">void</span> InDoubt(Enlistment enlistment)<br />    {<br />      <span style="color: #008000">//throw new Exception(&quot;The method or operation is not implemented.&quot;);</span><br />    }<br /><br />    <span style="color: #808080">/// &lt;summary&gt;</span><br />    <span style="color: #808080">/// Prepares the specified preparing enlistment.</span><br />    <span style="color: #808080">/// &lt;/summary&gt;</span><br />    <span style="color: #808080">/// &lt;param name=&quot;preparingEnlistment&quot;&gt;The preparing enlistment.&lt;/param&gt;</span><br />    <span style="color: #0000ff">public</span> <span style="color: #0000ff">void</span> Prepare(PreparingEnlistment preparingEnlistment)<br />    {<br />      preparingEnlistment.Prepared();<br />    }<br /><br />    <span style="color: #808080">/// &lt;summary&gt;</span><br />    <span style="color: #808080">/// Rollbacks the specified enlistment.</span><br />    <span style="color: #808080">/// &lt;/summary&gt;</span><br />    <span style="color: #808080">/// &lt;param name=&quot;enlistment&quot;&gt;The enlistment.&lt;/param&gt;</span><br />    <span style="color: #0000ff">public</span> <span style="color: #0000ff">void</span> Rollback(Enlistment enlistment)<br />    {<br />      container.Rollback();<br />      container.Ext().Refresh(oldItem, <span style="color: #0000ff">int</span>.MaxValue);<br />    }<br /><br />    #endregion<br />  }<br />}</pre>  </div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Magento theme</div>
<div class='content'>
I found so many interesting stuff in your blog especially its discussion. So i must appreciate your efforts on posting these information.</div>
</div>
<div class='comment'>
<div class='author'>German Viscuso</div>
<div class='content'>
Hi!<BR/><BR/>You’ve been nominated as db4o dVP. Please see <A HREF="http://developer.db4o.com/blogs/community/archive/2009/03/04/meet-the-new-db4objects-valued-professionals-dvp-for-2009.aspx" REL="nofollow">this page</A><BR/>I don’t have your contact info!<BR/><BR/>Best!<BR/><BR/>German</div>
</div>
<div class='comment'>
<div class='author'>German Viscuso</div>
<div class='content'>
Great stuff!<BR/>See:<BR/> <BR/>http://developer.db4o.com/blogs/community/archive/2008/12/11/db4o-with-system-transactions-transactionscope.aspx<BR/><BR/>Best regards.<BR/><BR/>German Viscuso<BR/>db4objects community manager</div>
</div>
</div>
</div>

    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2008/11/wcf-silverlight-default-constructor-not/">WCF - Silverlight - Default constructor not called??</a></h1>
    <p class="meta">
          <time datetime="2008-11-25T06:02:00.000Z" pubdate data-updated="true">Nov 24th 2008</time>


        
    </p>
</header>
<div class="entry-content">
<div class='post'>
<p class="MsoNormal"></p><p class="MsoNormal">Can anyone explain why creating a default constructor (defined in a partial class) of an auto-generated Service References class for an object. Does not get executed when the object is created by a WCF service call?</p><p class="MsoNormal">I'll go through some of the basic steps I did to reproduce this, and I'll attach the project I created to do so. I would love if anyone had some insight into this... <a href="http://www.mediafire.com/?lzoyjmgty1l">SilverlightWcfConstructorTest.zip</a></p><p class="MsoNormal">1.<span class="Apple-tab-span" style="white-space:pre"> </span>Create a web service that returns some complex type. (Class1)</p><p class="MsoNormal">2.<span class="Apple-tab-span" style="white-space:pre"> </span>Create a Silverlight app that can consume the service above. (Use the Add Service Reference so it will auto-generate a service reference file).</p><p class="MsoNormal">3.<span class="Apple-tab-span" style="white-space:pre"> </span>(in Silverlight) Create a partial class to extend the Class1 created by the service reference</p><p class="MsoNormal">4.<span class="Apple-tab-span" style="white-space:pre"> </span>Add a default constructor to this partial class.</p><p class="MsoNormal">5.<span class="Apple-tab-span" style="white-space:pre"> </span>Do something in this constructor to hint that it is called.</p><p class="MsoNormal">6.<span class="Apple-tab-span" style="white-space:pre"> </span>Run it and see that the default constructor is never called when making a WCF Silverlight service call.</p><p class="MsoNormal"><br /></p><p class="MsoNormal">WHY?</p><p class="MsoNormal"><br /></p><p class="MsoNormal">I have a full project put together that you should be able to unzip and run to see this behavior…</p><p class="MsoNormal"><a href="http://www.mediafire.com/?lzoyjmgty1l">SilverlightWcfConstructorTest.zip</a><br /></p><p class="MsoNormal"><br /></p><p class="MsoNormal">Update: I have a thread started at the <a href="http://silverlight.net/forums/p/52758/138056.aspx#138056">silverlight forums</a> on this topic...</p></div>
</div>

    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2008/10/unbound-tfs-project-how-do-i-get/">unbound TFS project - how do I get the offline changes checked in?</a></h1>
    <p class="meta">
          <time datetime="2008-10-01T14:10:00.000Z" pubdate data-updated="true">Oct 1st 2008</time>


        
    </p>
</header>
<div class="entry-content">
<div class='post'>
Our company's code is currently hosted at a third party development shop and once in a while my solution gets marked as "offline". When I right click on the root of the solution node I get an option to "Go Online". If I'm in this state and I go online, it connects to TFS and scans through the entire solution looking for modified files.<br /><br />So yesterday their internet was down ALL DAY (what a pain, I never realized how dependent I was on source control). So I was trying to edit a file and V.S. kept trying to check it out from TFS before making the edit, which would fail, and leave the file in a read only state. This sucked because I wasn't able make changes to any file.<br /><br />I did the first thing I knew of on how to get my files in a state that I could work with for the day. I went to File -> Source Control -> Change Source Control and proceeded to "Unbind" each project from tfs. This allowed me to work for the day, make changes, etc without being road blocked by TFS.<br /><br />Then this morning I came to work and the companies internet was working, and I was able to get to TFS successfully. I re-opened the solution, and unfortuantely in my "Pending Changes" tab there was only a couple files checked out. This was not good because I knew I made many more changes than it thought I had.<br /><br />This is where the first paragraph above comes into play... I wanted visual studio to figure out all the things I did yesterday because I knew I wasn't going to remember all the files I touched. So I googled about VS's offline/online modes and ran across this blog.<br /><br /><a href="http://blogs.msdn.com/benryan/archive/2007/12/12/when-and-how-does-my-solution-go-offline.aspx">http://blogs.msdn.com/benryan/archive/2007/12/12/when-and-how-does-my-solution-go-offline.aspx</a><br /><br />After reading some of the details about how VS works with TFS I decided to try and get my solution "offline" so I could bring it back online and allow it to figure out my changed files...<br /><br />To accomplish this I opened up regedit. Followed Ben's pointer to<br /><br />HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\9.0\TeamFoundation\Servers\<myexternalcompaniestfs>\<br /><br />In there I set<br />AutoReconnect=0<br />Offline=1<br /><br /><br />When I re-opened my solution. It opened in offline mode. I was then able to bring the solution online and as expected, it noticed all the changes I made yesterday. (THANK YOU TFS, would have been nice to do this w/out hacking the registry though).<br /><br /><br /></myexternalcompaniestfs></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Staxmanade</div>
<div class='content'>
If I click on my solution in the "Solution Explorer" the only buttons if have are...  "Properties", "Add New Solution Folder", and "Refresh Status" (this is a VisualSVN button)...<BR/><BR/>is there some sort of option I need to enable to see this command?</div>
</div>
<div class='comment'>
<div class='author'>justncase</div>
<div class='content'>
There is a button on the top of the solution explorer for going offline/online. It's awfully convenient.</div>
</div>
</div>
</div>

    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2008/09/how-can-c-variable-have-sign-in-front/">How can C# variable have an @ sign in front of it?</a></h1>
    <p class="meta">
          <time datetime="2008-09-14T04:26:00.000Z" pubdate data-updated="true">Sep 13th 2008</time>


        
    </p>
</header>
<div class="entry-content"><p>I remember a year ago I noticed in some code a coworker put together had a variable with an @ sign in front of it. At first I was baffled that it even compiled. I asked my c-worker about it and he said he had no clue as to why it was there and what it was for... so then I spent some time googling and couldn&#39;t find anything on the net describing this and why it compiled.</p>
<p>basically what I&#39;m talking about is if you have some code</p>
<pre><code class="lang-C#">private void MyMethod(string myparam)
{
    int a = @myparam.Length;
}
</code></pre>
<p>Notice the @ sign in front of the myparam variable... That is what I saw in my co-workers code and I couldn&#39;t explain how that worked...</p>
<p>now, nearly a year later I was perusing through the SLUnity framework on codeplex [] and saw the @ sign again...</p>
<pre><code class="lang-C#">public void UnregisterSubscriber(string publishedEventName, EventHandler subscriber)
{
    PublishedEvent @event = GetEvent(publishedEventName);
    @event.RemoveSubscriber(subscriber);
    RemoveDeadEvents();
}
</code></pre>
<p>I did some more googling and still can&#39;t find anything, (I&#39;m sure it&#39;s out there, just can&#39;t put together the right search criteria)...</p>
<p>Then I went back to the code, looked at it for a minute, and it dawned on me that &quot;event&quot; is a keyword in c#... Then I thought, maybe this is what you can do to use a C# keyword in another context than the desired reason to have the keyword.</p>
<p>So I wrote a little test to see if this hypothesis was correct.</p>
<pre><code class="lang-C#">private static void MyMethod(string class)
{
    int a = class.Length;
}
</code></pre>
<p>this won&#39;t compile because of the &quot;class&quot; keyword...</p>
<p>then I put the @ sign in front of class</p>
<pre><code class="lang-C#">private static void MyMethod(string @class)
{
    int a = @class.Length;
}
</code></pre>
<p>and it not only compiled, but you also get intellisense on the variable...</p>
<p>How cool...</p>
<p>I&#39;m not sure I would do that on a regular basis, seems like it might be a bit of a pain to write... However maybe framework code may need to have this to allow it to be more readable to it&#39;s consumers? Anyone know why on this?  </p>
<p><h2>Comments</h2></p>
<div class='comments'>
<div class='comment'>
<div class='author'>Anonymous</div>
<div class='content'>
nice one :), had me fooled for a bit too when I found a variable named @@delegate</div>
</div>
<div class='comment'>
<div class='author'>Justin Chase</div>
<div class='content'>
That is exactly what it is for, so you can use reserved words for variable names. You&#39;ll see this in some of the .NET framework even, with method parameters named @object in some places. I suspect it was added to C# specifically to be compatible with libraries written in other languages so that when it generates methods for you and uses the defined parameter name it won&#39;t have a compile error if it happens to be a C# keyword.</div>
</div>
</div>
</div>

    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2008/09/wcf-service-proxy-inside-silverlight/">WCF Service Proxy inside Silverlight with a generic type</a></h1>
    <p class="meta">
          <time datetime="2008-09-14T01:32:00.000Z" pubdate data-updated="true">Sep 13th 2008</time>


        
    </p>
</header>
<div class="entry-content"><p>We&#39;ve implemented a silverlight 2 business application communicating through WCF and I just had to blog about something I found possible in .net in general...</p>
<p>On the server side we have a very simple generic object used to communicate validation issues back to our Silverlight client when a web service method is called. Here&#39;s the basic interface.</p>
<pre><code class="lang-C#">public interface IValidatedResult&lt;T&gt;
{
  T Result { get; set; }
  List&lt;string&gt; ValidationIssues { get; set; }
}
</code></pre>
<p>Now if you had a method that exposed this generic result object through your web service...</p>
<pre><code class="lang-C#">public ValidatedResult&lt;long&gt; StringLength(string param1)
{
  return new ValidatedResult&lt;long&gt;(param1.Length);
}
</code></pre>
<p>Now if you to to the silverlight project tell Visual Studio to generate a proxy for you (against the service you just created) it will give you a proxy with an object that is not generic. You end up with some autogenerated code that looks more like...</p>
<pre><code class="lang-C#">public partial class ValidatedResultOflong : object, System.ComponentModel.INotifyPropertyChanged
{

  private long ResultField;

  private System.Collections.ObjectModel.ObservableCollection&lt;string&gt; ValidationIssuesField;

  [System.Runtime.Serialization.DataMemberAttribute()]
  public long Result
  {
    get
    {
      return this.ResultField;
    }
    set
    {
      if ((this.ResultField.Equals(value) != true))
      {
        this.ResultField = value;
        this.RaisePropertyChanged(&quot;Result&quot;);
      }
    }
  }

  [System.Runtime.Serialization.DataMemberAttribute()]
  public System.Collections.ObjectModel.ObservableCollection&lt;string&gt; ValidationIssues
  {
    get
    {
      return this.ValidationIssuesField;
    }
    set
    {
      if ((object.ReferenceEquals(this.ValidationIssuesField, value) != true))
      {
        this.ValidationIssuesField = value;
        this.RaisePropertyChanged(&quot;ValidationIssues&quot;);
      }
    }
  }

  // stripped out the INotifyPropertyChanged goo
}
</code></pre>
<p>Notice the non generic type <code>ValidatedResultOflong</code> that was generated? This non generic object is great and all except when you want to do some generic processing on these objects. For things like error handling, validation handling... if we had to create different handling methods for all of these different objects, that could prove to be laborious...</p>
<p>Say I wanted to write an extension method to do some generic processing on all objects that are a ValidatedResult of T... Unfortunately there is no common signature we can key off of to write this method with the proxy code generated by V.S.</p>
<p>Then I thought I would try something... Can you have a partial class in one area which contains a common property, in this case each contains a &quot;Result&quot; and a &quot;ValidationIssues&quot; property and another partial class in a different location that declares it implements an interface which defines that &quot;Result&quot; and &quot;ValidationIssues&quot; property... and would that compile?</p>
<p>So I wrote my first test...</p>
<p>Here is our auto generated partial class simulated...</p>
<pre><code class="lang-C#">public partial class Foo
{
  public bool Result { get; set; }
}
</code></pre>
<p>I then wrote a generic result of T to define the object has a Result property.</p>
<pre><code class="lang-C#">public interface IResult&lt;T&gt;
{
  T Result { get; set; }
}
</code></pre>
<p>And now the specific implementation with a long Result type.</p>
<pre><code class="lang-C#">public partial class Foo : IResult&lt;long&gt; {}
</code></pre>
<p>After putting those three structures together I hit Build in VS and to my surprise (at first, but now it makes total sense) it compiled... This was great news. This meant I could create a generic processor for my wcf objects in silverlight... I&#39;ll show how on the silverlight side below...</p>
<p>I defined the validated result contract as follows...</p>
<pre><code class="lang-C#">public interface IResultProperty&lt;T&gt;
{
  T Result { get; }
}

public interface IValidatedResult&lt;T&gt; : IResultProperty&lt;T&gt;
{
  List&lt;string&gt; ValidationIssues { get; set; }
}
</code></pre>
<p>This meant I could quickly create partial class stubs for each of the wcf generated objects that looked like... ValidatedResultOf{object} and would define to the compiler that all these objects truly implemented the ValidationIssues and Result property.</p>
<p>Here&#39;s an example of the partial class for the <code>ValidatedResultOflong</code></p>
<pre><code class="lang-C#">public partial class ValidatedResultOflong : IValidatedResult&lt;long&gt; { }
</code></pre>
<p>With that in place, this meant I could create some generic handling methods for all of my objects that now implement <code>IValidatedResult&lt;T&gt;</code>...</p>
<pre><code class="lang-C#">public static bool HasValidationIssues&lt;T&gt;(this T validatedResult)
where T : IValidatedResult&lt;T&gt;
{
  if (validatedResult != null &amp;amp;&amp;amp;
  validatedResult.ValidationIssues != null &amp;amp;&amp;amp;
  validatedResult.ValidationIssues.Count &gt; 0)
  return true;
  else
  return false;
}
</code></pre>
<p>Don&#39;t know if i&#39;ve very heard anyone talk about one partial class containing some property or common method and being able to create another partial class that defines the interface contract for that... Pretty cool...</p>
<h2 id="comments">Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Jason.Jarrett</div>
<div class='content'>
  Interesting observation. Thanks for sharing.

  I haven&#39;t pushed it very far (bool, string, MyCustomObject, etc)</div>
</div>
<div class='comment'>
  <div class='author'>Boris Modylevsky</div>
  <div class='content'>
    Thanks for the post. It&#39;s really exciting to receive a proxy of Generic class. It really works smoothly with &quot;simple&quot; classes. But more complex ones result with random names in Silverlight proxy. For example, my <code>_SimpleTree&lt;Item&gt;_</code> became <em>SimpleTreeNodeOfItemErNMAaNV</em></div>
  </div>
<div class='comment'>
  <div class='author'>Jason.Jarrett</div>
  <div class='content'>
    Ok, I quickly threw an example together. I didn&#39;t comment much, but the code&#39;s there and &quot;works on my box...&quot;

    Let me know if you have any troubles either understanding it, or getting it working.

    I&#39;ve never used this file host service, but giving it a try... I&#39;ve placed the project here <a href="http://www.filesavr.com/validatedresultsample"> http://www.filesavr.com/validatedresultsample</a>

    Also the only concepts to really look at here are the `ValidatedResult<T>`` and the notion of the partial classes used along side the VS service reference code to get the extension methods to work... This by no means follows best practices with some of this stuff.

    Good luck!</div>
  </div>
<div class='comment'>
  <div class='author'>greg</div>
  <div class='content'>
    ... very much appreciated!!</div>
  </div>
<div class='comment'>
  <div class='author'>Jason.Jarrett</div>
  <div class='content'>
    Greg,

    I will try to put together an example and post it here soon.</div>
  </div>
<div class='comment'>
  <div class='author'>greg</div>
  <div class='content'>
    ... too many snippets for me to get the big picture... It looks promising, though. Do you have a simple working example you could post? I am interested in the generic proxy concept whether used within Silverlight or otherwise.
    Thanks in advance.</div>
  </div>
</div>
</div>

    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2008/08/unitdrivens-ui-gets-minor-makeover/">UnitDriven&#x27;s UI Gets a Minor Makeover</a></h1>
    <p class="meta">
          <time datetime="2008-08-31T05:57:00.000Z" pubdate data-updated="true">Aug 30th 2008</time>


        
    </p>
</header>
<div class="entry-content">
<div class='post'>
I had some time to play around with and learn WPF within Silverlight. It's a modest start, but I just had to blog about it...<br /><br />We've started a project at my current job using Silverlight. Researching different framework options I ran across the <a href="http://codeplex.com/UnitDriven">UnitDriven</a> project on codeplex. After downloading and checking out the silverlight testing UI...<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_L6Vw0x_R3iw/SLo1BRz-hyI/AAAAAAAAAAQ/u2fJw1V0ivw/s1600-h/Csla.net.Original.jpg"><img style="margin: 0pt 10px 10px 0pt; float: left; cursor: pointer;" src="http://4.bp.blogspot.com/_L6Vw0x_R3iw/SLo1BRz-hyI/AAAAAAAAAAQ/u2fJw1V0ivw/s320/Csla.net.Original.jpg" alt="" id="BLOGGER_PHOTO_ID_5240559412476544802" border="0" /></a><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />I decided this was a place I could take a stab at learning some silverlight UI. ok... So it's getting late and it's certainly not perfect, but here's where I am now.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_L6Vw0x_R3iw/SLo1XFQ2E0I/AAAAAAAAAAY/7_HbNVjZ9Ss/s1600-h/Csla.net.NewSkin.jpg"><img style="margin: 0pt 10px 10px 0pt; float: left; cursor: pointer;" src="http://3.bp.blogspot.com/_L6Vw0x_R3iw/SLo1XFQ2E0I/AAAAAAAAAAY/7_HbNVjZ9Ss/s320/Csla.net.NewSkin.jpg" alt="" id="BLOGGER_PHOTO_ID_5240559787065086786" border="0" /></a><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />The only really tricky piece was... The original UI used nested ListBox controls which threw me down a path of thinking the program was broken... basically with a ListBox inside of a ListBox you have to select the first item, then the sub item, and in this application, only then, can you select the "Run" button to execute the unit test... I spent time looking through code trying to figure out if there was a bug in the testing contexts.<br /><br />The solution to this was to convert the ListBox to an ItemsControl. Which allowed me to select multiple buttons without having to first select the ListBox sub item...<br /><br />I then had to wrap everything inside of a ScrollViewer because the ItemsControl doesn't create one automatically like the ListBox does.<br />[EDIT]<br />Unfortunately wrapping everything in the ScrollViewer removed a feature the older version had, namely, at the top of the control is a display of the # succeeded/# Total. Wrapping everything in the ScrollViewer removed the ability to scroll through tests while that value was being updated during tests...<br /><br />So I updated the main grid in the XAML, and shifted a few things around to allow this old feature to be seen in the new UI.<br />[/EDIT]<br /><br />after that was done, it was basically playing around with different styling elements to end up with the UI above.<br /><br />It was a good simple exploratoin into some of the Silverlight's WPF capabilities.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Nermin</div>
<div class='content'>
Your work on this patch is trully appreciated.  That listbox issue was trully annoying one.</div>
</div>
<div class='comment'>
<div class='author'>Justin Chase</div>
<div class='content'>
Thanks for the patch, I applied it today.</div>
</div>
</div>
</div>

    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2008/05/how-best-to-expose-value-that-could/">How best to expose a value that could throw an error?</a></h1>
    <p class="meta">
          <time datetime="2008-05-14T22:46:00.000Z" pubdate data-updated="true">May 14th 2008</time>


        
    </p>
</header>
<div class="entry-content"><p>If you have a class that needs to expose some value (either by a Property, or a &quot;getter&quot; function) and there is a chance that getting this value could cause an exception. How do you best expose that value?</p>
<p>I originally had a Property that exposed some value where, if in a certain state, would throw an exception.</p>
<p>Microsoft FxCop recommends.</p>
<blockquote>
<p>Do not explicitly raise exceptions from unexpected
locations. There are some methods, such as Equals and
GetHashCode, which users do not expect to raise exceptions.
Therefore calls to these methods are not commonly
wrapped in try catch blocks.</p>
</blockquote>
<p>So if FxCop recommends not raising an exception from a Property&#39;s getter, we&#39;ll just throw it in a function. Come to find out now FxCop says...</p>
<blockquote>
<p>Properties should be used instead of Get/Set methods
in most situations. Methods are preferable to properties
in the following situations: the operation is a conversion,
is expensive or has an observable side-effect; the
order of execution is important; calling the member
twice in succession creates different results; a member
is static but returns a mutable value; or the member
returns an array.</p>
</blockquote>
<p>So, which is the best method?</p>
<p>I went back to the Property method because it really is mimicking the usage of a property...</p>
<p>Any suggestions out there?</p>
</div>

    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2008/04/binarysearchordefault/">BinarySearchOrDefault()</a></h1>
    <p class="meta">
          <time datetime="2008-04-14T03:52:00.000Z" pubdate data-updated="true">Apr 13th 2008</time>


        
    </p>
</header>
<div class="entry-content">
<div class='post'>
When you need to use BinarySearch on a large List&lt;T&gt;, you need to declare a long to hold the return index value of the search. When the item in the list is not found the value returned from the binary search is negative and depending on it's value can mean different things. However most of the time I use this search method I don't care about these other options. Either give me the value I am searching for or give me the default value of &lt;T&gt;.<br /><br />I wrote a little helper extension that will return the found object or if the item could not be fount it returns default(T).<br /><br /><pre class="csharpcode"><br /><span class="kwrd">public</span> <span class="kwrd">static</span> T BinarySearchOrDefault&lt;T&gt;(<span class="kwrd">this</span><br />   List&lt;T&gt; list,<br />   T item,<br />   IComparer&lt;T&gt; comparer)<br />{<br />   <span class="kwrd">int</span> returnIndex = list.BinarySearch(item, comparer);<br /><br />   <span class="kwrd">if</span> (returnIndex &gt;= 0)<br />       <span class="kwrd">return</span> list[returnIndex];<br />   <span class="kwrd">else</span><br />       <span class="kwrd">return</span> <span class="kwrd">default</span>(T);<br />}<br /></pre></div>
</div>

    </article>
    <article>
        <header>
    <h1 class="entry-title"><a href="http://staxmanade.com/2008/04/timing-debug-code-using-lamdas/">Timing Debug Code Using Lambda&#x27;s</a></h1>
    <p class="meta">
          <time datetime="2008-04-11T15:29:00.000Z" pubdate data-updated="true">Apr 11th 2008</time>


        
    </p>
</header>
<div class="entry-content">
<div class='post'>
In applications that require responsiveness it's sometimes hard, while in the middle of development to test what implementation of some code is faster.<br /><br />Below I've created an example of an easy way to time some action or group of actions within a method to quickly determine how long it would take to do it one way or another.<br /><br /><!-- code formatted by http://manoli.net/csharpformat/ --><br /><pre class="csharpcode"><br /><span class="kwrd">public</span> <span class="kwrd">void</span> SomeMethodIAmWorkingOn()<br />{<br /> TimeAction(<br />   () =&gt;<br />   {<br />     <span class="kwrd">for</span>  (<span class="kwrd">int</span> i = 0;  i &lt;  100; i++)<br />       SomeMethodIAmTiming();<br />     SomeNextStep();<br />   },<br />   <span class="str">"Timing method SomeMethodIAmTiming 100 times..."</span>);<br />}<br /><br /><span class="kwrd">public</span> <span class="kwrd">static</span> <span class="kwrd">long</span> TimeAction(<br /> System.Action action, <span class="kwrd"><br /> string</span> debugNote)<br />{<br /> <span class="kwrd">long</span> time = TimeAction(action);<br /><br /> System.Diagnostics.Debug.WriteLine(<br />   <span class="kwrd">string</span>.Format(<br />   <span class="str">"TimeAction:{0}ms, NOTE: {1},"</span>,<br />   time,<br />   debugNote)<br /> );<br /><br /> <span class="kwrd">return</span> time;<br />}<br /><br /><span class="kwrd">public</span> <span class="kwrd">static</span> <span class="kwrd">long</span> TimeAction(<br /> System.Action action)<br />{<br /> Stopwatch watch = Stopwatch.StartNew();<br /> action();<br /> watch.Stop();<br /> <span class="kwrd">return</span> watch.ElapsedMilliseconds;<br />}</pre></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Jason.Jarrett</div>
<div class='content'>
whoops - Thanks for the suggested update...</div>
</div>
<div class='comment'>
<div class='author'>Anonymous</div>
<div class='content'>
Lambda, not lamda. ;)</div>
</div>
</div>
</div>

    </article>
  <div class="pagination">
    <a href="/blog/archives">Blog Archives</a>
      <a class="next" href="/blog/pages/14/">Newer &rarr;</a>
  </div>
</div>

<aside class="sidebar">
    <section>
	<!-- Begin MailChimp Signup Form -->
	<link href="//cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
	<style type="text/css">
		#mc_embed_signup input.button {
			width: inherit;
			padding-left: 10px;
			padding-right: 10px;
		}
	</style>
	<div id="mc_embed_signup">
		<form action="http://staxmanade.us8.list-manage1.com/subscribe/post?u=9a6f3f89fc58e1bbbddf5c3f8&amp;id=9e5406be65" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
			<h1>Subscribe</h1>
			<p>Enter your email to recive recent blog posts and other news</p>
			<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
		    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
		    <div style="position: absolute; left: -5000px;"><input type="text" name="b_9a6f3f89fc58e1bbbddf5c3f8_9e5406be65" value=""></div>
			<div class=""><input type="submit" value="Subscribe to blog" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
		</form>
	</div>
	<!--End mc_embed_signup-->
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
      <li class="post">
        <a href="/2015/01/how-to-install-clang-format-and-formatting-objective-c-files/">How to install clang-format and formatting Objective-C files</a>
      </li>
      <li class="post">
        <a href="/2015/01/custom-static-blog-generator---no-longer-using-octopress/">Custom Static Blog Generator - No Longer Using Octopress</a>
      </li>
      <li class="post">
        <a href="/2014/12/use-different-git-diff-tools-per-file-extension/">Use different Git Diff Tools Per File Extension</a>
      </li>
      <li class="post">
        <a href="/2014/12/introducing-skypeit---command-line-skype-phone-calls/">Introducing SkypeIt - Command Line Skype Phone Calls</a>
      </li>
      <li class="post">
        <a href="/2014/12/thoughts-on-working-remotely-from-home/">Thoughts on Working Remotely from Home</a>
      </li>
      <li class="post">
        <a href="/2014/11/one-of-the-simplest-things-you-can-do-to-improve-email-communication/">One of the Simplest Things You can do to Improve Email Communication</a>
      </li>
      <li class="post">
        <a href="/2014/06/move-a-git-branch-while-on-a-different-branch/">Updating git branches.</a>
      </li>
  </ul>
</section>

<section>
  <h1>GitHub: <a href="https://github.com/staxmanade">@staxmanade</a></h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/js/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'staxmanade',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/js/github.js" type="text/javascript"> </script>
</section>


</aside>

    </div>
</div>
<footer role="contentinfo"><p>
  Copyright &copy; 2015 - Jason Jarrett - <span class="credit">Powered by <a href="http://togglejs.github.io">Toggle</a></span>
</p>

</footer>
  
<script type="text/javascript">
      var disqus_shortname = 'developingonstaxmanade';
      
        var disqus_script = 'count.js';
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



</body>
</html>
